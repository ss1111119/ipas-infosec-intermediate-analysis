<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è³‡å®‰æŠ€è¡“ - æ»²é€æ¸¬è©¦å·¥å…·è§£æ | äº’å‹•è©¦é¡Œ</title>
    
    <!-- å¼•å…¥å­—é«” Noto Sans TC -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- FontAwesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" xintegrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <!-- è¨­å®š Tailwind ä¸»é¡Œ -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#2563eb', // å°ˆæ¥­è—
                        highlight: '#fef9c3', // æŸ”å’Œé»ƒ
                        success: '#059669', // ç¶ 
                        error: '#dc2626', // ç´…
                    },
                    fontFamily: {
                        sans: ['"Noto Sans TC"', 'sans-serif'],
                    }
                }
            }
        }
    </script>

    <style>
        body {
            background-color: #f3f4f6;
            color: #1f2937;
            font-size: 16px;
            line-height: 1.6;
        }

        /* å®¹å™¨å„ªåŒ– */
        #quiz-container {
            max-width: 900px;
            margin: 2rem auto;
            background: #ffffff;
            border-radius: 16px;
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1);
        }

        /* é¸é …äº’å‹• */
        .option-label {
            cursor: pointer;
            transition: all 0.2s ease;
            border: 2px solid #e5e7eb;
        }
        .option-label:hover:not(.disabled) {
            border-color: #2563eb;
            background-color: #eff6ff;
            transform: translateY(-2px);
        }
        .option-label.selected {
            border-color: #2563eb;
            background-color: #eff6ff;
        }
        .option-label.correct {
            border-color: #059669 !important;
            background-color: #d1fae5 !important;
        }
        .option-label.wrong {
            border-color: #dc2626 !important;
            background-color: #fee2e2 !important;
        }
        .option-label.disabled {
            cursor: default;
            opacity: 0.9;
        }

        /* å‹•ç•« */
        @keyframes fadeInUp {
            from { opacity: 0; transform: translate3d(0, 20px, 0); }
            to { opacity: 1; transform: translate3d(0, 0, 0); }
        }
        .animate-fade-in-up {
            animation: fadeInUp 0.5s ease-out forwards;
        }

        /* è‡ªå®šç¾©è©³ç´°è³‡è¨Šå€å¡Šæ¨£å¼ */
        details.custom-details > summary {
            list-style: none;
            cursor: pointer;
            outline: none;
        }
        details.custom-details > summary::-webkit-details-marker {
            display: none;
        }
        
        /* ç­”æ¡ˆæ¨¡ç³Šé®ç½© (é»æ“Šé¡¯ç¤º) */
        .spoiler-answer {
            background-color: #e5e7eb;
            color: transparent;
            border-radius: 4px;
            padding: 0 4px;
            cursor: pointer;
            transition: all 0.3s;
            user-select: none;
        }
        .spoiler-answer:hover, .spoiler-answer.revealed {
            background-color: #dcfce7;
            color: #166534;
            font-weight: bold;
        }
        .spoiler-answer::before {
            content: 'é»æ“Šçœ‹ç­”æ¡ˆ';
            color: #6b7280;
            font-size: 0.8em;
            display: inline-block;
            width: 100%;
            text-align: center;
        }
        .spoiler-answer.revealed::before {
            display: none;
        }

        /* æ‰‹æ©Ÿç‰ˆèª¿æ•´ */
        @media (max-width: 768px) {
            #quiz-container { margin: 1rem; border-radius: 12px; }
            body { font-size: 15px; }
        }
    </style>
</head>
<body class="antialiased min-h-screen flex flex-col items-center justify-center py-4">

    <div id="quiz-container" class="w-full relative overflow-hidden">
        
        <!-- Header -->
        <header class="bg-gradient-to-r from-blue-600 to-indigo-700 text-white p-6 md:p-8">
            <div class="flex justify-between items-center mb-2">
                <span class="bg-white/20 text-xs md:text-sm px-3 py-1 rounded-full font-medium tracking-wide">Q29</span>
                <span class="text-xs md:text-sm font-light opacity-90">ç‹€æ…‹ï¼š<span id="status-text">æœªä½œç­”</span></span>
            </div>
            <div class="flex items-center gap-3">
                <span class="bg-red-500 text-white text-xs px-2 py-1 rounded shadow-sm">è³‡å®‰æŠ€è¡“</span>
                <h1 class="text-xl md:text-2xl font-bold">æ»²é€æ¸¬è©¦å·¥å…·æ‡‰ç”¨</h1>
            </div>
        </header>

        <!-- Context -->
        <div class="px-6 md:px-8 pt-8 pb-4">
            <div class="bg-blue-50 border-l-4 border-primary p-4 rounded-r-lg">
                <p class="text-gray-700 text-sm md:text-base">
                    <i class="fas fa-info-circle text-primary mr-2"></i>
                    æƒ…å¢ƒï¼šæ»²é€æ¸¬è©¦å·¥å…·çš†æœ‰å…¶ã€Œæ ¸å¿ƒå°ˆç”¨é ˜åŸŸã€ã€‚è«‹ä¾æ“šå·¥å…·ç‰¹æ€§ï¼Œåˆ¤æ–·ä¸‹åˆ—æ•˜è¿°ä½•è€…æ­£ç¢ºã€‚
                </p>
            </div>
        </div>

        <!-- Question -->
        <div class="px-6 md:px-8 py-2">
            <h2 class="text-lg md:text-xl font-bold text-gray-800 mb-6 leading-relaxed">
                é—œæ–¼æ»²é€æ¸¬è©¦å·¥å…·çš„æ•˜è¿°ï¼Œä¸‹åˆ—ä½•è€…<span class="text-success border-b-4 border-success/30">æ­£ç¢º</span>ï¼Ÿ
            </h2>
            <form id="quiz-form" class="space-y-4">
                <div id="options-container"></div>
            </form>
        </div>

        <!-- Action -->
        <div class="px-6 md:px-8 py-6 flex flex-col md:flex-row gap-4 justify-center border-b border-gray-100">
            <button id="submit-btn" class="btn-action w-full md:w-1/2 bg-primary hover:bg-blue-700 text-white font-bold rounded-xl shadow-lg flex items-center justify-center gap-2 py-3">
                <i class="fas fa-paper-plane"></i> é€å‡ºç­”æ¡ˆ
            </button>
            <button id="retry-btn" class="hidden btn-action w-full md:w-1/2 bg-gray-600 hover:bg-gray-700 text-white font-bold rounded-xl shadow-lg flex items-center justify-center gap-2 py-3">
                <i class="fas fa-redo"></i> é‡æ–°æŒ‘æˆ°
            </button>
        </div>

        <!-- Feedback & Explanation (Hidden initially) -->
        <div id="feedback-section" class="hidden px-6 md:px-8 py-6 bg-gray-50">
            
            <div id="result-header" class="flex items-center gap-3 mb-6 animate-fade-in-up"></div>

            <!-- Tab Buttons for Explanations -->
            <div class="flex flex-wrap gap-2 mb-4 animate-fade-in-up" style="animation-delay: 0.1s;">
                <button onclick="switchTab('step1')" class="tab-btn bg-white border border-gray-300 px-4 py-2 rounded-lg text-sm font-bold text-gray-600 hover:bg-blue-50 focus:ring-2 focus:ring-blue-500 active-tab" data-tab="step1">è§£é¡Œä¸‰æ­¥é©Ÿ</button>
                <button onclick="switchTab('step4')" class="tab-btn bg-white border border-gray-300 px-4 py-2 rounded-lg text-sm font-bold text-gray-600 hover:bg-blue-50 focus:ring-2 focus:ring-blue-500" data-tab="step4">é¸é …è©³è§£</button>
                <button onclick="switchTab('concept')" class="tab-btn bg-white border border-gray-300 px-4 py-2 rounded-lg text-sm font-bold text-gray-600 hover:bg-blue-50 focus:ring-2 focus:ring-blue-500" data-tab="concept">å»¶ä¼¸èˆ‡é¿å‘</button>
            </div>

            <!-- Explanation Content Cards -->
            <div class="bg-white border border-gray-200 rounded-xl overflow-hidden shadow-sm animate-fade-in-up relative min-h-[300px]" style="animation-delay: 0.2s;">
                
                <!-- Tab 1: è§£é¡Œä¸‰æ­¥é©Ÿ -->
                <div id="content-step1" class="tab-content p-6 space-y-6">
                    <h3 class="font-bold text-lg text-gray-800 border-b pb-2 mb-4"><i class="fas fa-shoe-prints text-primary mr-2"></i>è§£é¡Œé‚è¼¯æ‹†è§£</h3>
                    
                    <div class="space-y-4">
                        <div class="flex gap-3">
                            <span class="flex-shrink-0 bg-blue-100 text-blue-800 text-xs font-bold px-2 py-1 rounded h-fit mt-1">ç¬¬ä¸€æ­¥ï¼šæ‰¾é—œéµå­—</span>
                            <p class="text-gray-700 text-sm">
                                æ»²é€æ¸¬è©¦å·¥å…·ã€John the Ripperã€Hashcatã€Aircrack-ngã€Nmapã€Wiresharkã€OWASP ZAPã€‚<br>
                                é¡Œç›®å•çš„æ˜¯ <span class="text-red-500 font-bold">ä¸»è¦ç”¨é€”</span>ã€‚
                            </p>
                        </div>
                        <div class="flex gap-3">
                            <span class="flex-shrink-0 bg-blue-100 text-blue-800 text-xs font-bold px-2 py-1 rounded h-fit mt-1">ç¬¬äºŒæ­¥ï¼šç™½è©±ç¿»è­¯</span>
                            <p class="text-gray-700 text-sm">
                                ã€Œä¸‹é¢é€™äº›é§­å®¢æˆ–è³‡å®‰å·¥å…·ï¼Œå“ªä¸€çµ„å·¥å…·è¢«æ‹¿ä¾†åšçš„äº‹æƒ…ï¼Œæè¿°æ˜¯å°çš„ï¼Ÿã€
                            </p>
                        </div>
                        <div class="flex gap-3">
                            <span class="flex-shrink-0 bg-blue-100 text-blue-800 text-xs font-bold px-2 py-1 rounded h-fit mt-1">ç¬¬ä¸‰æ­¥ï¼šè§£é¡Œæ€è·¯</span>
                            <div class="text-gray-700 text-sm space-y-2">
                                <p>1. æŠŠå·¥å…·åˆ†é¡ï¼ˆå¯†ç¢¼ã€ç„¡ç·šã€ç¶²è·¯ã€ç¶²ç«™ï¼‰ã€‚</p>
                                <p>2. çœ‹é¡Œç›®æè¿°æ˜¯å¦å°æ‡‰æ­£ç¢ºåˆ†é¡ã€‚</p>
                                <p>3. <strong class="text-gray-800">ç”Ÿæ´»ä¾‹å­</strong>ï¼šå°±åƒæ‹¿èºçµ²èµ·å­ï¼ˆå·¥å…·ï¼‰èªªä¸»è¦ç”¨ä¾†æ•²é‡˜å­ï¼ˆç”¨é€”ï¼‰ï¼Œå·¥å…·æœ¬èº«æœ‰åï¼Œä½†ç”¨é€”è¬›éŒ¯å°±æ˜¯éŒ¯ã€‚</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tab 2: é¸é …è©³è§£ (Step 4) -->
                <div id="content-step4" class="tab-content p-6 space-y-4 hidden">
                    <h3 class="font-bold text-lg text-gray-800 border-b pb-2 mb-4"><i class="fas fa-list-check text-primary mr-2"></i>ç¬¬å››æ­¥ï¼šé¸é …æ·±åº¦åˆ†æ</h3>
                    
                    <div class="space-y-4">
                        <div class="p-3 bg-red-50 rounded-lg border-l-4 border-red-400">
                            <p class="font-bold text-red-700 mb-1">(A) John the Ripper å’Œ Hashcat</p>
                            <p class="text-sm text-gray-700"><i class="fas fa-times text-red-500 mr-1"></i> éŒ¯åœ¨ã€Œç¤¾äº¤å·¥ç¨‹ã€ã€‚</p>
                            <p class="text-sm text-gray-600 mt-1">æ­£è§£ï¼šå®ƒå€‘æ˜¯ <strong>å¯†ç¢¼ç ´è§£å·¥å…·</strong> (Hash Cracking)ã€‚</p>
                        </div>

                        <div class="p-3 bg-red-50 rounded-lg border-l-4 border-red-400">
                            <p class="font-bold text-red-700 mb-1">(B) Aircrack-ng å’Œ Kismet</p>
                            <p class="text-sm text-gray-700"><i class="fas fa-times text-red-500 mr-1"></i> éŒ¯åœ¨ã€Œæœ‰ç·šç¶²è·¯ã€ã€‚</p>
                            <p class="text-sm text-gray-600 mt-1">æ­£è§£ï¼šå®ƒå€‘æ˜¯ <strong>ç„¡ç·šç¶²è·¯ (Wi-Fi)</strong> åˆ†æèˆ‡ç ´è§£å·¥å…·ã€‚</p>
                        </div>

                        <div class="p-3 bg-green-50 rounded-lg border-l-4 border-green-500">
                            <p class="font-bold text-green-700 mb-1">(C) Nmap å’Œ Wireshark</p>
                            <p class="text-sm text-gray-700"><i class="fas fa-check text-green-500 mr-1"></i> æ­£ç¢ºï¼</p>
                            <p class="text-sm text-gray-600 mt-1">Nmap æƒæè¨­å‚™èˆ‡ç«¯å£ï¼ŒWireshark åˆ†æå°åŒ…æµé‡ï¼Œå…©è€…éƒ½æ˜¯ç¶²è·¯å±¤æ ¸å¿ƒå·¥å…·ã€‚</p>
                        </div>

                        <div class="p-3 bg-red-50 rounded-lg border-l-4 border-red-400">
                            <p class="font-bold text-red-700 mb-1">(D) OWASP ZAP å’Œ Burp Suite</p>
                            <p class="text-sm text-gray-700"><i class="fas fa-times text-red-500 mr-1"></i> éŒ¯åœ¨ã€Œä½œæ¥­ç³»çµ±æ¼æ´ã€ã€‚</p>
                            <p class="text-sm text-gray-600 mt-1">æ­£è§£ï¼šå®ƒå€‘æ˜¯ <strong>Web æ‡‰ç”¨ç¨‹å¼</strong> (ç¶²ç«™) å®‰å…¨æ¸¬è©¦å·¥å…·ã€‚</p>
                        </div>
                    </div>
                </div>

                <!-- Tab 3: å»¶ä¼¸èˆ‡é¿å‘ -->
                <div id="content-concept" class="tab-content p-6 space-y-6 hidden">
                    
                    <!-- è§€å¿µè£œå…… -->
                    <div>
                        <h4 class="font-bold text-gray-800 mb-2 text-sm"><i class="fas fa-book-open text-blue-500 mr-1"></i> è§€å¿µè£œå……èˆ‡èˆ‰ä¸€åä¸‰</h4>
                        <ul class="list-disc list-inside text-sm text-gray-600 space-y-1 ml-1">
                            <li><strong class="text-gray-800">å®šç¾©</strong>ï¼šæ»²é€æ¸¬è©¦å·¥å…·æ˜¯æ¨¡æ“¬æ”»æ“Šè€…è¡Œç‚ºï¼Œæ‰¾å‡ºç³»çµ±å¼±é»çš„å°ˆç”¨è»Ÿé«”ã€‚</li>
                            <li><strong class="text-gray-800">èˆ‰ä¸€åä¸‰</strong>ï¼šè‹¥é¡Œç›®èªªã€ŒNmap ç”¨æ–¼ Web è¡¨å–®æ¸¬è©¦ã€â†’ éŒ¯ï¼è‹¥èªªã€ŒBurp Suite ç”¨æ–¼ SQL Injection æ¸¬è©¦ã€â†’ å°ï¼</li>
                        </ul>
                    </div>

                    <!-- é™·é˜±èˆ‡ç›²é» -->
                    <div class="bg-yellow-50 p-4 rounded-lg">
                        <h4 class="font-bold text-yellow-800 mb-2 text-sm"><i class="fas fa-exclamation-triangle mr-1"></i> å¸¸è¦‹é™·é˜±èˆ‡å¿ƒç†ç›²é»</h4>
                        <ul class="space-y-2 text-sm text-gray-700">
                            <li><span class="font-bold text-yellow-700">ç›²é»ï¼š</span>è¦ºå¾—ã€Œåæ­£éƒ½æ˜¯è³‡å®‰å·¥å…·ï¼Œæ‡‰è©²å·®ä¸å¤šã€ï¼Œå¿½ç•¥äº†å°ˆç”¨æ€§ã€‚</li>
                            <li><span class="font-bold text-yellow-700">é¿å‘æŒ‡å—ï¼š</span>çœ‹åˆ°å·¥å…·åç¨±ï¼Œç«‹åˆ»åœ¨è…¦ä¸­è²¼æ¨™ç±¤ï¼ˆå¯†ç¢¼ / ç„¡ç·š / ç¶²è·¯ / Webï¼‰ã€‚</li>
                        </ul>
                    </div>

                    <!-- å£è¨£ -->
                    <div class="bg-indigo-50 p-4 rounded-lg text-center border border-indigo-100">
                        <h4 class="font-bold text-indigo-800 mb-2 text-sm">ğŸ“ è¨˜æ†¶å£è¨£</h4>
                        <p class="text-indigo-900 font-medium">
                            ã€ŒJohnã€Hash â†’ å¯†ç¢¼<br>
                            Airã€Kismet â†’ ç„¡ç·š<br>
                            Nmap æ‰¾é–€ï¼ŒWireshark çœ‹è©±<br>
                            ZAPã€Burp â†’ æ‰“ç¶²ç«™ã€
                        </p>
                    </div>
                </div>

            </div>
        </div>

        <!-- Self-Check Section (Visible Question, Hidden Answer) -->
        <div class="px-6 md:px-8 py-6 bg-white border-t border-gray-100 mt-4 mb-8">
            <h3 class="font-bold text-gray-800 mb-4 flex items-center gap-2">
                <i class="fas fa-clipboard-check text-green-600"></i> è‡ªæˆ‘æª¢æ¸¬ (é»æ“ŠæŸ¥çœ‹ç­”æ¡ˆ)
            </h3>
            
            <div class="space-y-3">
                
                <!-- Q1 -->
                <div class="border border-gray-200 rounded-lg p-4 hover:shadow-sm transition-shadow">
                    <p class="font-medium text-gray-800 mb-2 text-sm md:text-base">
                        1. å¦‚æœé¡Œç›®æŠŠ Burp Suite èªªæˆã€Œç”¨ä¾†æƒæç³»çµ±æ¼æ´ã€ï¼Œæ­£ç¢ºå—ï¼Ÿ
                    </p>
                    <div class="spoiler-answer" onclick="this.classList.add('revealed')">
                        ä¸æ­£ç¢ºï¼Œå®ƒæ˜¯ Web æ‡‰ç”¨ç¨‹å¼æ¸¬è©¦å·¥å…·
                    </div>
                </div>

                <!-- Q2 -->
                <div class="border border-gray-200 rounded-lg p-4 hover:shadow-sm transition-shadow">
                    <p class="font-medium text-gray-800 mb-2 text-sm md:text-base">
                        2. Aircrack-ng ä¸»è¦é‡å°å“ªä¸€ç¨®ç¶²è·¯ç’°å¢ƒï¼Ÿ
                    </p>
                    <div class="spoiler-answer" onclick="this.classList.add('revealed')">
                        ç„¡ç·šç¶²è·¯ï¼ˆWi-Fiï¼‰
                    </div>
                </div>

                <!-- Q3 -->
                <div class="border border-gray-200 rounded-lg p-4 hover:shadow-sm transition-shadow">
                    <p class="font-medium text-gray-800 mb-2 text-sm md:text-base">
                        3. ç‚ºä»€éº¼ Nmap å¸¸è¢«ç¨±ç‚ºã€Œæ»²é€æ¸¬è©¦ç¬¬ä¸€æ­¥ã€ï¼Ÿ
                    </p>
                    <div class="spoiler-answer" onclick="this.classList.add('revealed')">
                        å› ç‚ºå®ƒèƒ½å…ˆæ‰¾å‡ºç¶²è·¯ä¸Šæœ‰å“ªäº›è¨­å‚™èˆ‡é–‹æ”¾æœå‹™
                    </div>
                </div>

            </div>
        </div>

    </div>

    <!-- Toast -->
    <div id="toast" class="fixed top-5 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white px-6 py-3 rounded-full shadow-2xl opacity-0 pointer-events-none transition-all duration-300 z-50 flex items-center gap-2">
        <i class="fas fa-exclamation-circle text-yellow-400"></i>
        <span>è«‹å…ˆé¸æ“‡ä¸€å€‹ç­”æ¡ˆï¼</span>
    </div>

    <script>
        // è³‡æ–™èˆ‡é‚è¼¯
        const quizData = {
            id: "29",
            correctAnswer: "C",
            options: [
                { id: "A", text: "John the Ripper å’Œ Hashcatï¼Œä¸»è¦ç”¨åœ¨ç¤¾äº¤å·¥ç¨‹" },
                { id: "B", text: "Aircrack-ng å’Œ Kismet ç”¨åœ¨æœ‰ç·šç¶²è·¯åˆºæ¢åˆ†æ" },
                { id: "C", text: "Nmap å’Œ Wireshark ç”¨æ–¼è­˜åˆ¥ç¶²è·¯ä¸­çš„è¨­å‚™ï¼Œä»¥åŠå®ƒå€‘é–‹æ”¾çš„ç«¯å£å’Œæœå‹™" },
                { id: "D", text: "OWASP ZAP å’Œ Burp Suite ç”¨åœ¨ä½œæ¥­ç³»çµ±æ¼æ´åˆ†æ" }
            ]
        };

        const elements = {
            container: document.getElementById('options-container'),
            submitBtn: document.getElementById('submit-btn'),
            retryBtn: document.getElementById('retry-btn'),
            feedback: document.getElementById('feedback-section'),
            resultHeader: document.getElementById('result-header'),
            status: document.getElementById('status-text'),
            toast: document.getElementById('toast')
        };

        let isAnswered = false;

        function init() {
            // Shuffle
            let options = [...quizData.options];
            for (let i = options.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [options[i], options[j]] = [options[j], options[i]];
            }

            // Render
            elements.container.innerHTML = '';
            options.forEach(opt => {
                const label = document.createElement('label');
                label.className = `option-label flex items-start p-4 rounded-xl border-2 border-gray-200 bg-white mb-3 cursor-pointer select-none`;
                label.dataset.id = opt.id;
                label.onclick = () => selectOption(label);
                
                label.innerHTML = `
                    <input type="radio" name="opt" value="${opt.id}" class="hidden">
                    <div class="w-6 h-6 rounded-full border-2 border-gray-300 mr-4 flex-shrink-0 flex items-center justify-center mt-0.5 transition-colors">
                        <div class="w-3 h-3 bg-white rounded-full opacity-0 transition-opacity inner-circle"></div>
                    </div>
                    <div class="option-content text-gray-700">(${opt.id}) ${opt.text}</div>
                `;
                elements.container.appendChild(label);
            });

            // Reset UI
            elements.feedback.classList.add('hidden');
            elements.submitBtn.classList.remove('hidden');
            elements.retryBtn.classList.add('hidden');
            elements.status.innerText = "æœªä½œç­”";
            elements.status.className = "";
            isAnswered = false;
            
            // Reset Self-Check spoilers
            document.querySelectorAll('.spoiler-answer').forEach(el => el.classList.remove('revealed'));
            
            // Reset Tabs
            switchTab('step1');

            document.getElementById('quiz-container').scrollIntoView({ behavior: 'smooth' });
        }

        function selectOption(label) {
            if (isAnswered) return;
            document.querySelectorAll('.option-label').forEach(el => {
                el.classList.remove('selected');
                el.querySelector('.inner-circle').style.opacity = '0';
                el.querySelector('.w-6').classList.remove('bg-primary', 'border-primary');
            });
            label.classList.add('selected');
            label.querySelector('input').checked = true;
            label.querySelector('.inner-circle').style.opacity = '1';
            label.querySelector('.w-6').classList.add('bg-primary', 'border-primary');
        }

        function submit() {
            const selected = document.querySelector('input[name="opt"]:checked');
            if (!selected) {
                elements.toast.style.opacity = '1';
                elements.toast.style.top = '20px';
                setTimeout(() => { elements.toast.style.opacity = '0'; elements.toast.style.top = '-50px'; }, 2000);
                return;
            }

            isAnswered = true;
            const val = selected.value;
            const isCorrect = val === quizData.correctAnswer;

            // Update UI options
            document.querySelectorAll('.option-label').forEach(lbl => {
                lbl.classList.add('disabled');
                lbl.onclick = null;
                if (lbl.dataset.id === quizData.correctAnswer) lbl.classList.add('correct');
                else if (lbl.dataset.id === val && !isCorrect) lbl.classList.add('wrong');
            });

            // Status
            elements.status.innerText = isCorrect ? "ç­”å°ï¼" : "ç­”éŒ¯";
            elements.status.className = isCorrect ? "text-success font-bold" : "text-error font-bold";

            // Feedback Header
            elements.resultHeader.innerHTML = isCorrect 
                ? `<div class="w-10 h-10 rounded-full bg-green-100 flex items-center justify-center"><i class="fas fa-check text-success text-xl"></i></div><h2 class="text-xl font-bold text-gray-800">å›ç­”æ­£ç¢ºï¼</h2>`
                : `<div class="w-10 h-10 rounded-full bg-red-100 flex items-center justify-center"><i class="fas fa-times text-error text-xl"></i></div><h2 class="text-xl font-bold text-gray-800">å›ç­”éŒ¯èª¤ï¼Œæ­£ç¢ºç­”æ¡ˆæ˜¯ (C)</h2>`;

            elements.feedback.classList.remove('hidden');
            elements.submitBtn.classList.add('hidden');
            elements.retryBtn.classList.remove('hidden');

            setTimeout(() => elements.feedback.scrollIntoView({ behavior: 'smooth', block: 'nearest' }), 100);
        }

        // Tab Switching Logic
        window.switchTab = function(tabName) {
            // Hide all content
            document.querySelectorAll('.tab-content').forEach(el => el.classList.add('hidden'));
            // Show selected content
            document.getElementById(`content-${tabName}`).classList.remove('hidden');
            
            // Update buttons
            document.querySelectorAll('.tab-btn').forEach(btn => {
                if(btn.dataset.tab === tabName) {
                    btn.classList.add('bg-blue-50', 'text-primary', 'border-blue-200');
                    btn.classList.remove('text-gray-600', 'border-gray-300');
                } else {
                    btn.classList.remove('bg-blue-50', 'text-primary', 'border-blue-200');
                    btn.classList.add('text-gray-600', 'border-gray-300');
                }
            });
        }

        elements.submitBtn.onclick = submit;
        elements.retryBtn.onclick = init;
        init();

    </script>
</body>
</html>