<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Q9: OWASP CDM 結構解析 | 全方位教學版</title>
    
    <!-- 外部資源載入 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" xintegrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" xintegrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>

    <script>
        tailwind.config = {
            // 關鍵修正：封鎖 collapse 類別，避免與 Bootstrap 衝突
            blocklist: ['collapse'],
            theme: {
                extend: {
                    colors: {
                        primary: '#2563eb',
                        highlight: '#fef9c3',
                        success: '#059669',
                        danger: '#dc2626',
                    },
                    fontFamily: {
                        sans: ['"Noto Sans TC"', 'sans-serif'],
                    }
                }
            }
        }
    </script>

    <style>
        body {
            background-color: #f3f4f6;
            font-family: 'Noto Sans TC', sans-serif;
            color: #374151;
            line-height: 1.6;
        }

        .main-container {
            max-width: 900px;
            margin: 2rem auto;
            background: #ffffff;
            border-radius: 16px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            overflow: hidden;
            padding: 0;
        }

        /* 選項卡片 */
        .option-card {
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            padding: 1rem;
            margin-bottom: 0.75rem;
            cursor: pointer;
            transition: all 0.2s ease;
            position: relative;
            display: flex;
            align-items: start;
        }
        .option-card:hover { border-color: #2563eb; background-color: #eff6ff; transform: translateY(-2px); }
        .option-card.selected { border-color: #2563eb; background-color: #eff6ff; box-shadow: 0 0 0 1px #2563eb; }
        .option-card.disabled { pointer-events: none; opacity: 0.8; }

        /* 結果狀態 */
        .status-correct { border-color: #059669 !important; background-color: #ecfdf5 !important; }
        .status-wrong { border-color: #dc2626 !important; background-color: #fef2f2 !important; }
        .status-missed { border-style: dashed !important; border-color: #059669 !important; }

        /* 章節標題 */
        .section-title {
            display: flex;
            align-items: center;
            color: #1e40af;
            font-weight: 700;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid #e5e7eb;
        }
        .section-title i { margin-right: 0.75rem; }

        /* 標籤 */
        .step-badge {
            background-color: #2563eb;
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.875rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
            display: inline-block;
        }

        /* 隱藏答案 spoiler */
        .spoiler {
            background-color: #1f2937;
            color: #1f2937;
            border-radius: 4px;
            padding: 0 4px;
            cursor: pointer;
            user-select: none;
            transition: all 0.3s;
        }
        .spoiler:hover, .spoiler.revealed {
            background-color: #fef9c3;
            color: #b45309;
        }

        /* 關鍵修正：強制覆蓋 Tailwind 對 collapse 的 visibility 設定 */
        .accordion-collapse.collapse {
            visibility: visible !important;
        }
        /* 確保 Bootstrap 的隱藏邏輯仍然有效 */
        .accordion-collapse.collapse:not(.show) {
            display: none !important;
        }

        /* 動畫 */
        .fade-in-up { animation: fadeInUp 0.5s ease-out forwards; }
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* RWD */
        @media (max-width: 768px) {
            .main-container { margin: 0.5rem; border-radius: 0; }
            .p-responsive { padding: 1.5rem !important; }
            .btn-responsive { width: 100%; margin-top: 0.5rem; }
        }
        .p-responsive { padding: 2.5rem; }
        
        /* 關鍵字高亮 */
        .kw-highlight { background-color: #fff7ed; color: #c2410c; padding: 2px 6px; border-radius: 4px; font-weight: bold; border: 1px solid #ffedd5; }
    </style>
</head>
<body>

    <div class="main-container">
        <!-- Header -->
        <div class="bg-primary text-white p-4 d-flex justify-content-between align-items-center">
            <div>
                <span class="badge bg-white text-primary mb-1">Q9</span>
                <h1 class="h5 mb-0 fw-bold">OWASP CDM 結構解析</h1>
            </div>
            <div class="text-white opacity-75 text-sm">
                <i class="fa-solid fa-graduation-cap me-1"></i> 完整教學模式
            </div>
        </div>

        <div class="p-responsive">
            <!-- Context -->
            <div class="mb-4 p-3 bg-gray-50 rounded-3 border-start border-4 border-gray-400">
                <h6 class="text-gray-500 text-xs uppercase tracking-wider mb-1 font-bold">情境背景</h6>
                <p class="mb-0 text-sm text-gray-700">
                    你的公司正在導入 <strong>OWASP Cyber Defense Matrix (CDM)</strong> 來盤點目前的資安防禦缺口。作為資安專員，你需要向管理層解釋這個矩陣的基本結構與原理，請判斷下列敘述是否正確。
                </p>
            </div>

            <!-- Question -->
            <div class="mb-5">
                <div class="mb-2">
                    <span class="badge bg-blue-100 text-blue-800 me-2">NIST CSF</span>
                    <span class="badge bg-orange-100 text-orange-800 me-2">資安管理</span>
                    <span class="badge bg-red-100 text-red-800">複選題</span>
                </div>
                <h2 class="h5 fw-bold lh-base mb-4">
                    關於 OWASP 網路防禦矩陣 (CDM) 基本結構的敘述，下列何者<span class="text-danger fw-bold border-bottom border-danger">錯誤</span>？
                </h2>
                <div id="options-container"></div>
            </div>

            <!-- Action Area -->
            <div class="d-flex justify-content-end gap-2 border-top pt-3">
                <button id="submit-btn" class="btn btn-primary px-4 btn-responsive fw-bold shadow-sm" onclick="submitAnswer()">
                    <i class="fa-solid fa-paper-plane me-2"></i>送出答案
                </button>
                <button id="retry-btn" class="btn btn-outline-secondary px-4 btn-responsive fw-bold d-none" onclick="resetQuiz()">
                    <i class="fa-solid fa-rotate-right me-2"></i>重新挑戰
                </button>
            </div>

            <!-- Feedback Area -->
            <div id="feedback-area" class="mt-4 d-none">
                <div class="alert alert-dismissible fade show d-flex align-items-center" role="alert" id="feedback-alert">
                    <i class="fa-solid fa-circle-info fa-xl me-3" id="feedback-icon"></i>
                    <div>
                        <h5 class="alert-heading fw-bold mb-1" id="feedback-title">結果判定</h5>
                        <p class="mb-0" id="feedback-message"></p>
                    </div>
                </div>
            </div>

            <!-- Explain Area (The Meat) -->
            <div id="explain-area" class="mt-5 d-none fade-in-up">
                
                <!-- 0. 正確答案與核心理由 -->
                <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-5">
                    <h3 class="text-lg font-bold text-blue-800 mb-2">正確答案：B、C</h3>
                    <p class="text-blue-700 mb-0">一句話理由：CDM 的兩個軸應是「CSF 五大功能」與「資產類別」，而 CSF 五大功能的第五項是 <span class="fw-bold">Recover (復原)</span>，不是 Asset Management。</p>
                </div>

                <!-- 1. 關鍵字與翻譯 -->
                <div class="mb-5">
                    <h4 class="section-title"><i class="fa-solid fa-magnifying-glass"></i>第一、二步：找關鍵字 & 白話翻譯</h4>
                    <div class="row g-4">
                        <div class="col-md-6">
                            <div class="bg-white p-3 rounded shadow-sm border h-100">
                                <span class="step-badge">關鍵字</span>
                                <ul class="list-unstyled space-y-2 mt-2">
                                    <li><span class="kw-highlight">OWASP CDM</span>：題目問矩陣長怎樣、兩個軸是什麼。</li>
                                    <li><span class="kw-highlight">NIST CSF 五個功能</span>：Identify, Protect, Detect, Respond, Recover。</li>
                                    <li><span class="kw-highlight">兩個維度</span>：矩陣一定有兩個軸。</li>
                                    <li><span class="kw-highlight">資產類別</span>：Devices, Apps, Networks, Data, Users。</li>
                                    <li><span class="kw-highlight">資產管理</span>：陷阱字，容易混淆。</li>
                                </ul>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="bg-white p-3 rounded shadow-sm border h-100">
                                <span class="step-badge">白話翻譯</span>
                                <p class="mt-2 text-gray-700">這題在問：「CDM 這個矩陣，是用哪兩條軸畫出來的？有沒有把 CSF 五大功能或資產類別講錯？尤其是 <strong class="text-danger">CSF 的五大功能，背錯一個字就錯</strong>。」</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 2. 解題思路 -->
                <div class="mb-5">
                    <h4 class="section-title"><i class="fa-solid fa-lightbulb"></i>第三步：解題思路與原理</h4>
                    
                    <div class="mb-3">
                        <h5 class="font-bold text-gray-800">解題三步驟：</h5>
                        <ol class="list-decimal list-inside text-gray-700 ms-2">
                            <li>先背牢 CSF 五大功能：Identify、Protect、Detect、Respond、Recover。</li>
                            <li>確認 CDM 的另一個軸：資產類別 (Devices / Applications / Networks / Data / Users)。</li>
                            <li>檢查選項是否把「矩陣軸線」講錯，或把「功能名稱」背錯。</li>
                        </ol>
                    </div>

                    <div class="row g-3 mt-2">
                        <div class="col-md-6">
                            <div class="bg-gray-50 p-3 rounded border">
                                <h6 class="font-bold text-gray-700 mb-2">原理與規則</h6>
                                <p class="text-sm text-gray-600 mb-0">
                                    CDM 目標是「盤點防禦是否完整」。<br>
                                    一軸是 <span class="fw-bold">功能</span> (做什麼防禦)，<br>
                                    一軸是 <span class="fw-bold">資產</span> (保護誰)。<br>
                                    交叉點空白 = 缺口。
                                </p>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="bg-yellow-50 p-3 rounded border border-yellow-200">
                                <h6 class="font-bold text-yellow-800 mb-2">生活例子 (具象化)</h6>
                                <p class="text-sm text-gray-700 mb-0">
                                    就像讀書計畫表：<br>
                                    <strong>橫軸 (資產)</strong>：國、英、數 (科目)<br>
                                    <strong>縱軸 (功能)</strong>：預習、上課、複習、測驗 (動作)<br>
                                    如果「數學 × 複習」這格是空的，就知道漏做了。
                                </p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 3. 選項分析 -->
                <div class="mb-5">
                    <h4 class="section-title"><i class="fa-solid fa-list-check"></i>第四步：選項分析</h4>
                    <div class="accordion" id="accordionOptions">
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseA">
                                    <span class="badge bg-success me-2">正確</span> (A) CDM 可協助企業評估更有邏輯與結構
                                </button>
                            </h2>
                            <div id="collapseA" class="accordion-collapse collapse">
                                <div class="accordion-body text-gray-700">
                                    為什麼這句是對的？<br>
                                    CDM 的核心價值就是把零散的資安產品與措施，用矩陣整理起來，讓盤點更有結構。這句話符合 CDM 的目的。
                                </div>
                            </div>
                        </div>
                        <div class="accordion-item border-danger">
                            <h2 class="accordion-header">
                                <button class="accordion-button text-danger fw-bold" type="button" data-bs-toggle="collapse" data-bs-target="#collapseB">
                                    <span class="badge bg-danger me-2">錯誤</span> (B) 矩陣結構為 CSF 五功能及以資產類別為主的兩個維度
                                </button>
                            </h2>
                            <div id="collapseB" class="accordion-collapse collapse show">
                                <div class="accordion-body bg-red-50 text-gray-800">
                                    <strong>為什麼錯？</strong><br>
                                    語意邏輯錯誤。矩陣本來就是「兩個維度」。<br>
                                    正確說法是：一個維度是 CSF 五大功能，另一個維度是資產類別。<br>
                                    選項寫得好像「兩個維度都是資產類別」或語意不清，與 CDM 結構不符。
                                </div>
                            </div>
                        </div>
                        <div class="accordion-item border-danger">
                            <h2 class="accordion-header">
                                <button class="accordion-button text-danger fw-bold" type="button" data-bs-toggle="collapse" data-bs-target="#collapseC">
                                    <span class="badge bg-danger me-2">錯誤</span> (C) CSF 五功能包含...與資產管理 (Asset Management)
                                </button>
                            </h2>
                            <div id="collapseC" class="accordion-collapse collapse show">
                                <div class="accordion-body bg-red-50 text-gray-800">
                                    <strong>為什麼錯？ (關鍵陷阱)</strong><br>
                                    CSF 五大功能是：Identify, Protect, Detect, Respond, <span class="fw-bold text-success">Recover (復原)</span>。<br>
                                    選項把最後一個改成了「資產管理」。<br>
                                    <em>註：資產管理其實是 Identify 功能底下的一個子類別。</em>
                                </div>
                            </div>
                        </div>
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseD">
                                    <span class="badge bg-success me-2">正確</span> (D) 資產類別包含設備、應用、網路、資料與人員
                                </button>
                            </h2>
                            <div id="collapseD" class="accordion-collapse collapse">
                                <div class="accordion-body text-gray-700">
                                    為什麼這句是對的？<br>
                                    CDM 定義的五大資產類別正是：Devices, Applications, Networks, Data, Users。完全正確。
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 4. 補充與延伸 -->
                <div class="mb-5">
                    <h4 class="section-title"><i class="fa-solid fa-puzzle-piece"></i>觀念補充與觸類旁通</h4>
                    <div class="row g-4">
                        <div class="col-md-6">
                            <h5 class="text-sm font-bold text-gray-500 uppercase">核心定義</h5>
                            <ul class="list-group list-group-flush text-sm">
                                <li class="list-group-item bg-transparent"><strong>NIST CSF：</strong>用五大功能分類資安工作，是框架。</li>
                                <li class="list-group-item bg-transparent"><strong>CDM：</strong>用「CSF × 資產」畫成矩陣，做缺口分析 (Gap Analysis)。</li>
                            </ul>
                        </div>
                        <div class="col-md-6">
                            <h5 class="text-sm font-bold text-gray-500 uppercase">舉一反三 (變化題型)</h5>
                            <ul class="list-group list-group-flush text-sm">
                                <li class="list-group-item bg-transparent"><i class="fa-solid fa-angles-right text-primary me-2"></i>問順序：Identify → Protect → Detect → Respond → Recover。</li>
                                <li class="list-group-item bg-transparent"><i class="fa-solid fa-angles-right text-primary me-2"></i>問歸屬：Asset Management 屬於哪個功能？(答：Identify)。</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- 5. 記憶口訣與陷阱 -->
                <div class="row g-4 mb-5">
                    <div class="col-md-6">
                        <div class="bg-indigo-50 p-4 rounded-xl border border-indigo-100 h-100">
                            <h4 class="font-bold text-indigo-800 mb-3"><i class="fa-solid fa-brain me-2"></i>記憶口訣</h4>
                            <div class="mb-3">
                                <strong class="text-primary">CSF 五功能：</strong><br>
                                <span class="text-xl fw-bold">「識、保、偵、回、復」</span><br>
                                <span class="text-sm text-gray-600">(Identify, Protect, Detect, Respond, Recover)</span>
                            </div>
                            <div>
                                <strong class="text-primary">CDM 結構：</strong><br>
                                <span class="text-lg fw-bold">「功能 × 資產 ＝ 矩陣」</span><br>
                                <span class="text-sm text-gray-600">(一軸做什麼，一軸保護誰)</span>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="bg-red-50 p-4 rounded-xl border border-red-100 h-100">
                            <h4 class="font-bold text-red-800 mb-3"><i class="fa-solid fa-triangle-exclamation me-2"></i>常見陷阱 & 避坑指南</h4>
                            <p class="mb-2"><strong><i class="fa-solid fa-eye-slash me-2"></i>心理盲點：</strong></p>
                            <p class="text-sm text-gray-700 mb-3">看到 "Asset Management" 很像大標題，就以為是五大功能之一；其實它只是 Identify 底下的子項。</p>
                            <p class="mb-2"><strong><i class="fa-solid fa-shield-halved me-2"></i>避坑檢查：</strong></p>
                            <ul class="text-sm text-gray-700 list-disc list-inside">
                                <li>CSF 五大功能最後一個是不是 <strong>Recover</strong>？如果不是，就先判錯。</li>
                                <li>CDM 是不是「兩個軸」？如果敘述混亂，判錯。</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- 6. 自我檢測 (Interactive) -->
                <div class="bg-gray-800 text-white rounded-xl p-4">
                    <h4 class="font-bold mb-3"><i class="fa-solid fa-clipboard-question me-2"></i>自我檢測 (點擊黑條看答案)</h4>
                    <div class="space-y-4">
                        <div>
                            <p class="mb-1 text-gray-300">1. CSF 五大功能依時序排列，正確順序是什麼？</p>
                            <div class="spoiler" onclick="this.classList.toggle('revealed')">答案：Identify → Protect → Detect → Respond → Recover</div>
                        </div>
                        <div class="border-t border-gray-600 pt-3">
                            <p class="mb-1 text-gray-300">2. 「Asset Management（資產管理）」在 CSF 是屬於哪個功能底下？</p>
                            <div class="spoiler" onclick="this.classList.toggle('revealed')">答案：Identify（識別）底下的子項/類別</div>
                        </div>
                        <div class="border-t border-gray-600 pt-3">
                            <p class="mb-1 text-gray-300">3. 如果某公司「網路 (Network)」在「Detect (偵測)」這一格是空的，代表什麼？</p>
                            <div class="spoiler" onclick="this.classList.toggle('revealed')">答案：代表網路層缺乏偵測能力（例如缺少 IDS/NDR、缺少流量監控與告警）。</div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <!-- Toast -->
    <div class="toast-container position-fixed bottom-0 end-0 p-3">
        <div id="validationToast" class="toast align-items-center text-white bg-danger border-0" role="alert" aria-live="assertive" aria-atomic="true">
            <div class="d-flex">
                <div class="toast-body">
                    <i class="fa-solid fa-circle-exclamation me-2"></i> 請至少選擇一個選項！
                </div>
                <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        // Data
        const quizData = [
            { id: 'A', text: "(A) 網路防禦矩陣 (CDM) 可協助企業的整體資安綜合防護評估更有邏輯與結構", isCorrect: false },
            { id: 'B', text: "(B) 矩陣基本結構可區分為 NIST 網路安全框架 (CSF) 的五個功能以及以資產類別為主的兩個維度", isCorrect: true },
            { id: 'C', text: "(C) NIST 網路安全框架 (CSF) 之框架核心的五個功能維度包含識別、保護、偵測、回應與資產管理 (Asset Management)", isCorrect: true },
            { id: 'D', text: "(D) 資產類別維度包含設備 (Devices)、應用程式 (Application)、網路 (Network)、資料 (Data) 與人員 (User)", isCorrect: false }
        ];

        function initQuiz() {
            const container = document.getElementById('options-container');
            container.innerHTML = '';
            
            // Randomize options
            const shuffledOptions = [...quizData].sort(() => Math.random() - 0.5);

            shuffledOptions.forEach(opt => {
                const card = document.createElement('div');
                card.className = 'option-card';
                card.id = `card-${opt.id}`;
                card.onclick = (e) => toggleSelection(card, `check-${opt.id}`);

                const checkbox = document.createElement('input');
                checkbox.type = 'checkbox';
                checkbox.className = 'custom-checkbox form-check-input me-3';
                checkbox.style.minWidth = '20px';
                checkbox.style.minHeight = '20px';
                checkbox.id = `check-${opt.id}`;
                checkbox.value = opt.id;
                checkbox.onclick = (e) => e.stopPropagation();
                checkbox.onchange = () => updateCardStyle(card, checkbox);

                const label = document.createElement('label');
                label.className = 'form-check-label w-100 cursor-pointer';
                label.htmlFor = `check-${opt.id}`;
                label.innerText = opt.text;
                label.style.pointerEvents = 'none';

                card.appendChild(checkbox);
                card.appendChild(label);
                container.appendChild(card);
            });
        }

        function toggleSelection(card, checkboxId) {
            const checkbox = document.getElementById(checkboxId);
            if (checkbox.disabled) return;
            checkbox.checked = !checkbox.checked;
            updateCardStyle(card, checkbox);
        }

        function updateCardStyle(card, checkbox) {
            checkbox.checked ? card.classList.add('selected') : card.classList.remove('selected');
        }

        function submitAnswer() {
            const checkboxes = document.querySelectorAll('input[type="checkbox"]');
            const userSelected = Array.from(checkboxes).filter(cb => cb.checked).map(cb => cb.value);

            if (userSelected.length === 0) {
                new bootstrap.Toast(document.getElementById('validationToast')).show();
                return;
            }

            checkboxes.forEach(cb => {
                cb.disabled = true;
                document.getElementById(`card-${cb.value}`).classList.add('disabled');
            });

            document.getElementById('submit-btn').classList.add('d-none');
            document.getElementById('retry-btn').classList.remove('d-none');

            const correctIds = quizData.filter(q => q.isCorrect).map(q => q.id).sort();
            const isPerfect = JSON.stringify(correctIds) === JSON.stringify(userSelected.sort());

            // Visual feedback on cards
            quizData.forEach(opt => {
                const card = document.getElementById(`card-${opt.id}`);
                const checkbox = document.getElementById(`check-${opt.id}`);
                const isUserChecked = checkbox.checked;
                const isActuallyCorrect = opt.isCorrect;

                card.classList.remove('selected');
                if (isUserChecked && isActuallyCorrect) {
                    card.classList.add('status-correct');
                    addIcon(card, 'fa-check', 'text-success');
                } else if (isUserChecked && !isActuallyCorrect) {
                    card.classList.add('status-wrong');
                    addIcon(card, 'fa-xmark', 'text-danger');
                } else if (!isUserChecked && isActuallyCorrect) {
                    card.classList.add('status-missed');
                    const badge = document.createElement('span');
                    badge.className = 'badge bg-success position-absolute top-50 end-0 translate-middle-y me-3';
                    badge.innerText = '應選此項';
                    card.appendChild(badge);
                }
            });

            showResult(isPerfect);
        }

        function addIcon(card, iconClass, colorClass) {
            const icon = document.createElement('i');
            icon.className = `fa-solid ${iconClass} ${colorClass} position-absolute top-50 end-0 translate-middle-y me-3 fa-lg`;
            card.appendChild(icon);
        }

        function showResult(isPerfect) {
            const feedbackArea = document.getElementById('feedback-area');
            const feedbackAlert = document.getElementById('feedback-alert');
            const feedbackTitle = document.getElementById('feedback-title');
            const feedbackMsg = document.getElementById('feedback-message');
            const feedbackIcon = document.getElementById('feedback-icon');

            feedbackArea.classList.remove('d-none');
            feedbackArea.classList.add('fade-in-up');

            if (isPerfect) {
                feedbackAlert.className = 'alert alert-success d-flex align-items-center';
                feedbackIcon.className = 'fa-solid fa-circle-check fa-xl me-3';
                feedbackTitle.innerText = '完全正確！';
                feedbackMsg.innerText = '你準確找出了敘述中的邏輯謬誤與名詞錯誤。';
            } else {
                feedbackAlert.className = 'alert alert-danger d-flex align-items-center';
                feedbackIcon.className = 'fa-solid fa-triangle-exclamation fa-xl me-3';
                feedbackTitle.innerText = '有些誤差喔！';
                feedbackMsg.innerText = '正確答案應包含 (B) 與 (C)。請參考下方詳解。';
            }

            document.getElementById('explain-area').classList.remove('d-none');
            setTimeout(() => {
                document.getElementById('feedback-area').scrollIntoView({ behavior: 'smooth', block: 'center' });
            }, 100);
        }

        function resetQuiz() {
            document.getElementById('feedback-area').classList.add('d-none');
            document.getElementById('explain-area').classList.add('d-none');
            document.getElementById('submit-btn').classList.remove('d-none');
            document.getElementById('retry-btn').classList.add('d-none');
            window.scrollTo({ top: 0, behavior: 'smooth' });
            setTimeout(initQuiz, 300);
        }

        window.onload = initQuiz;
    </script>
</body>
</html>