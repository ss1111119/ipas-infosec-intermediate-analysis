<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>iPAS è³‡å®‰é˜²è­·å¯¦å‹™ - DDoS å°ˆé¡Œå¯¦æˆ° (Q17-Q20)</title>
    <style>
        /* --- åŸºç¤è¨­å®š --- */
        :root {
            --primary-color: #2c3e50;
            --accent-color: #3498db;
            --bg-color: #f4f6f8;
            --card-bg: #ffffff;
            --text-main: #333333;
            --text-secondary: #555555;
            --success-bg: #e8f5e9;
            --success-text: #2e7d32;
            --error-bg: #fce4ec;
            --error-text: #c62828;
            --border-radius: 16px;
            --shadow: 0 4px 20px rgba(0,0,0,0.08);
            
            /* æ¨™ç±¤é…è‰²ç³»çµ± */
            --tag-law: #607d8b;
            --tag-iso: #27ae60;
            --tag-zt: #8e44ad;
            --tag-net: #2980b9;
            --tag-sec: #c0392b;
            --tag-mgm: #d35400;
        }

        * {
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: system-ui, "Noto Sans TC", "Microsoft JhengHei", sans-serif;
            font-size: 16px;
            line-height: 1.6;
            background-color: var(--bg-color);
            color: var(--text-main);
            margin: 0;
            padding: 0;
        }

        /* --- å®¹å™¨èˆ‡ä½ˆå±€ --- */
        .container {
            max-width: 960px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        @media (max-width: 768px) {
            .container {
                padding: 15px;
                width: 100%;
            }
        }

        /* --- Header --- */
        header {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 10px;
        }

        h1 {
            margin: 0;
            font-size: 1.35rem;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .progress-container {
            width: 100%;
            background-color: #eee;
            border-radius: 10px;
            height: 10px;
            overflow: hidden;
            margin-top: 5px;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--accent-color), #2980b9);
            width: 0%;
            transition: width 0.4s ease;
        }

        .status-text {
            font-size: 0.9rem;
            color: var(--text-secondary);
            font-weight: bold;
        }

        /* --- æƒ…å¢ƒå€å¡Š --- */
        .global-context {
            background-color: #e3f2fd;
            border-radius: var(--border-radius);
            padding: 20px;
            border-left: 5px solid var(--accent-color);
            box-shadow: var(--shadow);
        }

        .context-title {
            font-weight: bold;
            color: var(--tag-net);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 1.1rem;
        }

        .context-content {
            font-size: 1rem;
        }
        
        .context-image {
            max-width: 100%;
            border-radius: 8px;
            margin-top: 15px;
            margin-left: auto;
            margin-right: auto;
            border: 1px solid #ddd;
            display: block;
        }
        
        .image-caption {
            font-size: 0.85rem;
            color: #666;
            text-align: center;
            margin-top: 8px;
            font-style: italic;
        }

        /* --- Tabs --- */
        .tabs-container {
            display: flex;
            gap: 10px;
            overflow-x: auto;
            padding-bottom: 5px;
            scrollbar-width: none;
        }
        
        .tabs-container::-webkit-scrollbar {
            display: none;
        }

        .tab-btn {
            background: var(--card-bg);
            border: 2px solid transparent;
            border-radius: 12px;
            padding: 10px 20px;
            min-width: 90px;
            font-weight: bold;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            height: 50px;
        }

        .tab-btn.active {
            background: var(--primary-color);
            color: #fff;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(44, 62, 80, 0.3);
        }

        .tab-btn.correct {
            border-color: var(--success-text);
            color: var(--success-text);
            background: var(--success-bg);
        }
        
        .tab-btn.active.correct {
            background: var(--success-text);
            color: #fff;
        }

        .tab-btn.wrong {
            border-color: var(--error-text);
            color: var(--error-text);
            background: var(--error-bg);
        }

        .tab-btn.active.wrong {
            background: var(--error-text);
            color: #fff;
        }

        /* --- é¡Œç›®å¡ç‰‡ --- */
        .question-card {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 30px;
            box-shadow: var(--shadow);
            animation: fadeIn 0.4s ease-in-out;
            display: none;
        }

        .question-card.active-card {
            display: block;
        }

        .q-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            border-bottom: 1px solid #eee;
            padding-bottom: 15px;
        }

        .tag {
            font-size: 0.85rem;
            padding: 5px 12px;
            border-radius: 20px;
            color: #fff;
            font-weight: bold;
            white-space: nowrap;
            letter-spacing: 0.5px;
        }

        .tag-law { background-color: var(--tag-law); }
        .tag-iso { background-color: var(--tag-iso); }
        .tag-zt { background-color: var(--tag-zt); }
        .tag-net { background-color: var(--tag-net); }
        .tag-sec { background-color: var(--tag-sec); }
        .tag-mgm { background-color: var(--tag-mgm); }

        .q-text {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 30px;
            line-height: 1.7;
            color: #222;
        }

        .highlight-negative {
            color: #c0392b;
            font-weight: 800;
            text-decoration: underline;
            text-decoration-thickness: 3px;
            text-underline-offset: 3px;
        }

        /* --- é¸é …å€åŸŸ --- */
        .options-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .option-item {
            position: relative;
            display: flex;
            align-items: center;
            padding: 16px 20px;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s;
            background: #fff;
            min-height: 50px;
            font-size: 1.05rem;
        }

        .option-item:hover {
            border-color: #bdc3c7;
            background-color: #f8f9fa;
        }

        .option-item input {
            position: absolute;
            opacity: 0;
            cursor: pointer;
            height: 0;
            width: 0;
        }

        .checkmark {
            height: 26px;
            width: 26px;
            background-color: #eee;
            border-radius: 50%;
            margin-right: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            transition: all 0.2s;
        }

        .option-item.multi .checkmark {
            border-radius: 6px;
        }

        .option-item:hover input ~ .checkmark {
            background-color: #ccc;
        }

        .option-item input:checked ~ .checkmark {
            background-color: var(--primary-color);
        }

        .checkmark:after {
            content: "";
            display: none;
        }

        .option-item input:checked ~ .checkmark:after {
            display: block;
        }

        .option-item .checkmark:after {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: white;
        }
        
        .option-item.multi .checkmark:after {
            width: 6px;
            height: 12px;
            border: solid white;
            border-width: 0 3px 3px 0;
            transform: rotate(45deg);
            border-radius: 0;
            background: transparent;
            margin-bottom: 3px;
        }

        .option-item.correct-ans {
            border-color: var(--success-text);
            background-color: var(--success-bg);
        }
        
        .option-item.wrong-ans {
            border-color: var(--error-text);
            background-color: var(--error-bg);
            opacity: 0.8;
        }
        
        .option-item.disabled {
            pointer-events: none;
        }

        .opt-label {
            font-weight: 800;
            margin-right: 10px;
            min-width: 25px;
            color: var(--primary-color);
        }

        /* --- æ“ä½œå€ --- */
        .action-area {
            margin-top: 35px;
            display: flex;
            gap: 15px;
            justify-content: flex-end;
            border-top: 1px solid #eee;
            padding-top: 20px;
        }

        .btn {
            padding: 12px 28px;
            border-radius: 50px;
            border: none;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.1s, opacity 0.2s, box-shadow 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
            min-height: 48px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .btn:active {
            transform: scale(0.96);
        }

        .btn-submit {
            background: linear-gradient(135deg, var(--primary-color), #34495e);
            color: white;
        }
        
        .btn-submit:hover {
            box-shadow: 0 6px 12px rgba(44, 62, 80, 0.3);
        }

        .btn-reset {
            background-color: #95a5a6;
            color: white;
            display: none;
        }

        /* --- è©³è§£å€ (æ–°ç‰ˆçµæ§‹) --- */
        .explain-section {
            margin-top: 30px;
            border-top: 3px dashed #d1d8dd;
            padding-top: 30px;
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .explain-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
        }

        .explain-card {
            background: #fff;
            border: 1px solid #e0e0e0;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.03);
        }

        .explain-header {
            background: #f8f9fa;
            padding: 12px 18px;
            font-weight: bold;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            gap: 10px;
            border-bottom: 1px solid #eee;
            font-size: 1.05rem;
        }
        
        /* å€å¡Šç‰¹å®šé…è‰² */
        .header-step1 { background: #e3f2fd; color: #1565c0; } /* é—œéµå­— */
        .header-step2 { background: #fff3e0; color: #ef6c00; } /* ç™½è©± */
        .header-step3 { background: #e8f5e9; color: #2e7d32; } /* æ€è·¯ */
        .header-step4 { background: #f3e5f5; color: #7b1fa2; } /* é¸é … */
        .header-trap { background: #ffebee; color: #c62828; }  /* é™·é˜± */
        .header-golden { background: linear-gradient(135deg, #fff8e1, #ffecb3); color: #8d6e63; } /* é‡‘å¥ */

        .explain-body {
            padding: 18px;
            font-size: 1rem;
            color: #444;
            line-height: 1.8;
        }
        
        .explain-body ul, .explain-body ol {
            margin: 0;
            padding-left: 25px;
        }
        
        .explain-body li {
            margin-bottom: 8px;
        }

        .highlight-text {
            background-color: #fff176;
            padding: 0 4px;
            border-radius: 4px;
            font-weight: bold;
            color: #333;
        }

        /* è‡ªæˆ‘æª¢æ¸¬æ¨£å¼ */
        details.self-check {
            background: #e1f5fe;
            border: 1px solid #b3e5fc;
            border-radius: 12px;
            overflow: hidden;
        }

        details.self-check summary {
            padding: 15px;
            cursor: pointer;
            font-weight: bold;
            color: #0277bd;
            list-style: none;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        details.self-check summary::-webkit-details-marker {
            display: none;
        }
        
        details.self-check summary::after {
            content: '+';
            font-size: 1.5rem;
            line-height: 1;
        }
        
        details.self-check[open] summary::after {
            content: '-';
        }

        .check-content {
            padding: 20px;
            background: #fff;
            border-top: 1px solid #b3e5fc;
            color: #333;
        }
        
        .answer-box {
            margin-top: 15px;
            padding: 15px;
            background: #f1f8e9;
            border-radius: 8px;
            color: #33691e;
            font-weight: bold;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(15px); }
            to { opacity: 1; transform: translateY(0); }
        }

    </style>
</head>
<body>

<div class="container">
    <!-- Header -->
    <header>
        <div class="header-top">
            <h1>ğŸ›¡ï¸ iPAS è³‡å®‰é˜²è­·å¯¦å‹™ - DDoS å°ˆé¡Œå¯¦æˆ°</h1>
            <div class="status-text">å®Œæˆé€²åº¦ï¼š<span id="progress-text">0/4</span></div>
        </div>
        <div class="progress-container">
            <div class="progress-bar" id="progress-bar"></div>
        </div>
    </header>

    <!-- Global Context -->
    <div class="global-context">
        <div class="context-title">
            ğŸ“ é¡Œçµ„å…±åŒæƒ…å¢ƒ
        </div>
        <div class="context-content">
            æŸæ–°å‰µå…¬å¸å°å¤–æä¾›å±•ç¤ºç”¨çš„ Web ä¼ºæœå™¨ï¼Œä¾›æ¥­å‹™äººå“¡åœ¨å…¬å¸å¤–éƒ¨é€²è¡Œç”¢å“ Demoã€‚
            <br>æŸæ—¥æ¥­å‹™åæ‡‰åœ¨å¤–éƒ¨ç„¡æ³•é€£å›å±•ç¤ºä¼ºæœå™¨ï¼Œä½† MIS æª¢æŸ¥å¾Œç™¼ç¾ï¼š
            <ul>
                <li>å…¬å¸å°å¤–ä¸Šç¶²é›»è·¯æ­£å¸¸ã€‚</li>
                <li>å…§éƒ¨å“¡å·¥é€£å¤–ä¸Šç¶²äº¦æ­£å¸¸ã€‚</li>
                <li>ä¸»æ©Ÿé€£ç·šç´€éŒ„èˆ‡ç¶²è·¯å´éŒ„è³‡æ–™é¡¯ç¤ºçŸ­æ™‚é–“å…§å‡ºç¾å¤§é‡ç•°å¸¸è«‹æ±‚ã€‚</li>
            </ul>
            ç ”åˆ¤é­å— DDoS é¡å‹æ”»æ“Šï¼Œå°è‡´å°å¤–æœå‹™å“è³ªä¸‹é™ã€‚å…¬å¸<strong>è³‡æºæœ‰é™</strong>ï¼Œå¸Œæœ›ä»¥ã€Œ<strong>æœ€ä½æˆæœ¬ã€æœ€é«˜æ•ˆç›Š</strong>ã€æ–¹å¼å»ºç«‹é˜²è­·ã€‚
            <img src="https://i.meee.com.tw/veoEf96.png" alt="DDoSé€£ç·šç•°å¸¸ç¤ºæ„åœ–" class="context-image">
            <div class="image-caption">é™„åœ–ï¼šå±•ç¤ºæœå‹™é­å¤§é‡é€£ç·šè«‹æ±‚ï¼Œé€£ç·šæ•¸ï¼ˆSessionsï¼‰å‚ç›´é£†å‡ç¤ºæ„</div>
        </div>
    </div>

    <!-- Navigation Tabs -->
    <div class="tabs-container" id="tabs-container">
        <!-- Tabs will be injected by JS -->
    </div>

    <!-- Questions Area -->
    <div id="questions-container">
        <!-- Questions will be injected by JS -->
    </div>

</div>

<script>
    // --- é¡Œç›®è³‡æ–™åº« (Enhanced) ---
    const quizData = {
        groupTitle: "DDoS æ”»æ“Šèˆ‡é˜²è­·å¯¦å‹™",
        questions: [
            {
                id: 17,
                tag: "ç¶²è·¯æ”»æ“Šåˆ¤æ–·",
                tagClass: "tag-net",
                text: "è«‹å•æ¥­å‹™ç„¡æ³•åœ¨å¤–éƒ¨å±•ç¤ºæœŸé–“ï¼Œå…¬å¸æœ€å¯èƒ½é­å—ä¸‹åˆ—ä»€éº¼é¡å‹çš„æ”»æ“Šï¼Ÿ",
                type: "single",
                options: ["è·¨ç«™è…³æœ¬æ”»æ“Š (XSS)", "DNS æ´ªæ°´æ”»æ“Š (DNS Flood)", "HTTP æ´ªæ°´æ”»æ“Š (HTTP Flood)", "ICMP æ´ªæ°´æ”»æ“Š (ICMP Flood)"],
                correct: ["HTTP æ´ªæ°´æ”»æ“Š (HTTP Flood)"],
                detailedAnalysis: {
                    keywords: `<span class="highlight-text">å¤–éƒ¨ç„¡æ³•é€£ç·š</span>ã€<span class="highlight-text">å…§éƒ¨é€£å¤–æ­£å¸¸</span>ã€<span class="highlight-text">HTTP é€£ç·šæš´å¢</span>ã€‚`,
                    vernacular: `æƒ³åƒä½ çš„å…¬å¸æ˜¯ä¸€å®¶ç†±é–€é¤å»³ã€‚<br>
                                 <b>å¤–éƒ¨ç„¡æ³•é€£ç·š</b>ï¼šé–€å£è¢«ä¸€ç¾¤å‡å®¢äººå µä½äº†ï¼ŒçœŸå®¢äººé€²ä¸ä¾†ã€‚<br>
                                 <b>å…§éƒ¨é€£å¤–æ­£å¸¸</b>ï¼šä½†æ˜¯åº—å“¡å¾å¾Œé–€å‡ºå»è²·æ±è¥¿æ˜¯é †æš¢çš„ï¼ˆè¡¨ç¤ºè·¯æ²’æ–·ï¼Œæ˜¯é–€å£å¡äº†ï¼‰ã€‚<br>
                                 <b>HTTP é€£ç·šæš´å¢</b>ï¼šé€™ç¾¤å‡å®¢äººä¸€ç›´åœ¨é–€å£å¤§å–Šã€Œæˆ‘è¦çœ‹èœå–®ï¼ã€ï¼ˆHTTP Requestï¼‰ï¼Œè®“æ«ƒå°å¿™æ­»ã€‚`,
                    logic: `<ul>
                                <li><b>è§£é¡Œæ­¥é©Ÿ 1 (æª¢æŸ¥é »å¯¬)</b>ï¼šé¡Œç›®èªªã€Œå…§éƒ¨é€£å¤–æ­£å¸¸ã€ï¼Œä»£è¡¨ç¶²è·¯ç®¡ç·šæ²’å¡çˆ† â†’ åˆªé™¤é »å¯¬æ¶ˆè€—å‹æ”»æ“Šï¼ˆå¦‚ ICMP Floodï¼‰ã€‚</li>
                                <li><b>è§£é¡Œæ­¥é©Ÿ 2 (æª¢æŸ¥ç›®æ¨™)</b>ï¼šåªæœ‰ Web æœå‹™æ›é» â†’ é‡å°æ‡‰ç”¨å±¤ï¼ˆLayer 7ï¼‰ã€‚</li>
                                <li><b>è§£é¡Œæ­¥é©Ÿ 3 (æª¢æŸ¥è­‰æ“š)</b>ï¼šåœ–è¡¨é¡¯ç¤º HTTP å”å®šè«‹æ±‚æš´å¢ â†’ é–å®š HTTP Floodã€‚</li>
                                <li><b>ç”Ÿæ´»ä¾‹å­</b>ï¼šé€™å°±åƒã€ŒF5 æŒ‰éµç²¾éˆã€æ”»æ“Šï¼Œä¸€ç§’é˜é‡æ–°æ•´ç†ç¶²é ä¸€è¬æ¬¡ï¼Œä¼ºæœå™¨å°±è¢«ç´¯å®äº†ã€‚</li>
                            </ul>`,
                    options: `<ul>
                                <li><b>(A) XSS</b>ï¼šæ˜¯åœ¨åˆ¥äººçš„ç€è¦½å™¨å·åŸ·è¡Œç¨‹å¼ï¼Œé€šå¸¸ä¸æœƒè®“ä¼ºæœå™¨æ›æ‰ã€‚</li>
                                <li><b>(B) DNS Flood</b>ï¼šæ˜¯æ”»æ“Š DNS Serverï¼Œè®“å¤§å®¶æŸ¥ä¸åˆ° IPï¼Œè·Ÿ HTTP æš´å¢ç„¡é—œã€‚</li>
                                <li><b>(C) HTTP Flood</b>ï¼šæ­£è§£ï¼Œé‡å° Web Server çš„è³‡æºè€—ç›¡æ”»æ“Šã€‚</li>
                                <li><b>(D) ICMP Flood</b>ï¼šæœƒå¡æ»¿é »å¯¬ï¼Œå°è‡´ã€Œå…§éƒ¨é€£å¤–ã€ä¹Ÿæœƒå¡é “ï¼Œèˆ‡é¡Œæ„ä¸ç¬¦ã€‚</li>
                              </ul>`,
                    supplement: `<b>æ³•æ¢/å®šç¾©ï¼š</b>é˜»æ–·æœå‹™æ”»æ“Š (DoS) æŒ‡çš„æ˜¯è®“æˆæ¬Šä½¿ç”¨è€…ç„¡æ³•å–å¾—æ‡‰æœ‰çš„è³‡æºæˆ–æœå‹™ã€‚<br>
                                 <b>è§¸é¡æ—é€šï¼š</b>å¦‚æœæ˜¯é‡å° SSL/TLS æ¡æ‰‹éç¨‹çš„æ”»æ“Šï¼Œæœƒæ¶ˆè€—æ›´å¤šä¼ºæœå™¨ç®—åŠ›ï¼ˆHTTPS Floodï¼‰ã€‚`,
                    mnemonic: `ã€Œç¶²ç«™å¡ã€ç¶²è·¯å¥½ â†’ HTTP Floodï¼›<br>è£¡å¤–éƒ½ä¸é€š â†’ é »å¯¬è¢«å¡çˆ†ã€`,
                    traps: `<b>å¿ƒç†ç›²é»ï¼š</b>çœ‹åˆ°ã€Œç„¡æ³•é€£ç·šã€å°±ç›´è¦ºé¸æœ€å¸¸è¦‹çš„ Ping æ”»æ“Š (ICMP Flood)ã€‚<br>
                            <b>é¿å‘æŒ‡å—ï¼š</b>ä¸€å®šè¦å›é ­çœ‹ã€Œå…§éƒ¨ä¸Šç¶²æ­£ä¸æ­£å¸¸ã€ï¼Œé€™æ˜¯å€åˆ† L7 (æ‡‰ç”¨å±¤) å’Œ L3/L4 (ç¶²è·¯å±¤) æ”»æ“Šçš„é»ƒé‡‘é—œéµã€‚`,
                    selfCheckQ: `å¦‚æœæ”»æ“Šè®Šæˆ Syn Floodï¼Œé˜²ç«ç‰† Log æœƒçœ‹åˆ°ä»€éº¼ç‹€æ…‹çš„é€£ç·šæš´å¢ï¼Ÿ`,
                    selfCheckA: `SYN_RECV (æ”¶åˆ° SYN ä½†é‚„æ²’å®Œæˆæ¡æ‰‹çš„åŠé–‹é€£ç·šç‹€æ…‹)ã€‚`
                }
            },
            {
                id: 18,
                tag: "æ”»æ“Šç›®çš„",
                tagClass: "tag-sec",
                text: "æ‰¿ä¸Šé¡Œï¼Œè«‹å•ä¸‹åˆ—ä½•é …ã€Œä¸æ˜¯ã€åˆ†æ•£å¼é˜»æ–·æœå‹™ (DDoS) æ”»æ“Šçš„ç ´å£ç›®çš„ï¼Ÿ",
                type: "single",
                options: ["ç™±ç˜“ç³»çµ±æœå‹™ä¸»æ©Ÿ", "ç ´å£ç³»çµ±æœå‹™ç¨‹å¼", "å½±éŸ¿ç¶²é æœå‹™æ­£å¸¸é‹ä½œ", "å¡çˆ†æœå‹™ç¶²è·¯çš„é »å¯¬"],
                correct: ["ç ´å£ç³»çµ±æœå‹™ç¨‹å¼"],
                detailedAnalysis: {
                    keywords: `<span class="highlight-text">DDoS</span>ã€<span class="highlight-negative">ä¸æ˜¯</span>ã€<span class="highlight-text">ç ´å£ç›®çš„</span>ã€‚`,
                    vernacular: `é§­å®¢ç™¼å‹• DDoS å°±åƒæ˜¯æ‰¾äººå»åŒ…åœåº—å®¶æŠ—è­°ã€‚<br>
                                 <b>ç›®çš„</b>ï¼šè®“åº—å®¶æ²’è¾¦æ³•åšç”Ÿæ„ï¼ˆæœå‹™ä¸­æ–·ï¼‰ã€‚<br>
                                 <b>éç›®çš„</b>ï¼šæŠ—è­°ç¾¤çœ¾é€šå¸¸ä¸æœƒè¡é€²å»æŠŠåº—å®¶çš„è£æ½¢æ‹†äº†æˆ–æŠŠéŒ¢å·èµ°ï¼ˆç ´å£ç¨‹å¼/ç«Šå–è³‡æ–™ï¼‰ã€‚`,
                    logic: `<ul>
                                <li><b>è§£é¡Œæ­¥é©Ÿ 1</b>ï¼šç¢ºèªæ”»æ“Šé¡å‹ï¼šDDoS æ˜¯ã€Œå¯ç”¨æ€§ã€(Availability) çš„æ®ºæ‰‹ã€‚</li>
                                <li><b>è§£é¡Œæ­¥é©Ÿ 2</b>ï¼šå€åˆ†è³‡å®‰ä¸‰è¦ç´ ï¼šDDoS ä¸è² è²¬å·çœ‹ (æ©Ÿå¯†æ€§)ã€ä¸è² è²¬ç«„æ”¹ (å®Œæ•´æ€§)ã€‚</li>
                                <li><b>è§£é¡Œæ­¥é©Ÿ 3</b>ï¼šåˆªå»æ³•ï¼šæ‰¾ä¸€å€‹é—œæ–¼ã€Œä¿®æ”¹ã€åˆªé™¤ã€ç ´å£æª”æ¡ˆã€çš„é¸é …ã€‚</li>
                                <li><b>ç”Ÿæ´»ä¾‹å­</b>ï¼šé«˜é€Ÿå…¬è·¯å¡è»Šï¼ˆDDoSï¼‰æœƒè®“ä½ å›ä¸äº†å®¶ï¼Œä½†ä¸æœƒæŠŠä½ çš„è»Šæ‹†è§£æ‰ï¼ˆç ´å£ç¨‹å¼ï¼‰ã€‚</li>
                            </ul>`,
                    options: `<ul>
                                <li><b>(A) ç™±ç˜“ä¸»æ©Ÿ</b>ï¼šæ˜¯ DDoS ç›®çš„ã€‚</li>
                                <li><b>(B) ç ´å£ç¨‹å¼</b>ï¼š<b>ä¸æ˜¯</b> DDoS ç›®çš„ã€‚é€™é€šå¸¸éœ€è¦å…¥ä¾µæ¬Šé™æˆ–ç—…æ¯’ã€‚</li>
                                <li><b>(C) å½±éŸ¿é‹ä½œ</b>ï¼šæ˜¯ DDoS ç›®çš„ã€‚</li>
                                <li><b>(D) å¡çˆ†é »å¯¬</b>ï¼šæ˜¯ DDoS ç›®çš„ã€‚</li>
                              </ul>`,
                    supplement: `<b>è§¸é¡æ—é€šï¼š</b>å‹’ç´¢è»Ÿé«” (Ransomware) æ‰æ˜¯é‡å°ã€Œå®Œæ•´æ€§ã€ï¼ˆåŠ å¯†æª”æ¡ˆï¼‰èˆ‡ã€Œå¯ç”¨æ€§ã€çš„æ··åˆæ”»æ“Šã€‚<br>
                                 <b>CIA ä¸‰è¦ç´ ï¼š</b>DDoS ç ´å£ A (Availability)ã€‚`,
                    mnemonic: `ã€ŒDDoS åªå¡è·¯ã€ä¸æ‹†å±‹ï¼›<br>è®“äººä¸èƒ½ç”¨ã€ä¸æ˜¯è®“äººå£æ‰ã€‚ã€`,
                    traps: `<b>å¿ƒç†ç›²é»ï¼š</b>è¦ºå¾—ã€Œæœå‹™å£äº†ã€ç­‰æ–¼ã€Œç¨‹å¼å£äº†ã€ã€‚å…¶å¯¦æœå‹™åªæ˜¯ã€Œå¿™ä¸éä¾†ã€ï¼Œç¨‹å¼ç¢¼æœ¬èº«å®Œå¥½ç„¡ç¼ºã€‚`,
                    selfCheckQ: `å¦‚æœé§­å®¢çš„ç›®çš„æ˜¯ã€Œç«Šå–å®¢æˆ¶å€‹è³‡ã€ï¼Œä»–æœƒç™¼å‹• DDoS å—ï¼Ÿ`,
                    selfCheckA: `é€šå¸¸ä¸æœƒï¼ŒDDoS åè€Œæœƒå¼•èµ·æ³¨æ„ã€‚ç«Šå–å€‹è³‡é€šå¸¸è¦ä½èª¿å…¥ä¾µ (APT)ã€‚ä¸éæœ‰æ™‚ DDoS æœƒä½œç‚ºç…™éœ§å½ˆæ©è­·å…¥ä¾µã€‚`
                }
            },
            {
                id: 19,
                tag: "é˜²ç¦¦æŠ€è¡“",
                tagClass: "tag-tech",
                text: "é‡å° TCP SYN Flood æ”»æ“Šï¼Œä¸‹åˆ—ä½•é …æ‡‰å°ç­–ç•¥ã€Œå¯èƒ½ç„¡æ³•æœ‰æ•ˆç·©è§£ã€æ”»æ“Šçš„å½±éŸ¿ï¼Ÿ",
                type: "single",
                options: ["å•Ÿç”¨ DNS åå‘ä»£ç†", "è¨­å®š TCP é€£æ¥é€Ÿç‡é™åˆ¶", "å•Ÿç”¨ SYN Cookies æ©Ÿåˆ¶", "å°‡å±•ç¤ºæœå‹™éƒ¨ç½²åˆ°å…§å®¹æ´¾é£ç¶²è·¯ (CDN) ä¸Š"],
                correct: ["å•Ÿç”¨ DNS åå‘ä»£ç†"],
                detailedAnalysis: {
                    keywords: `<span class="highlight-text">TCP SYN Flood</span>ã€<span class="highlight-negative">ç„¡æ³•æœ‰æ•ˆç·©è§£</span>ã€‚`,
                    vernacular: `æœ‰äººæƒ¡ä½œåŠ‡æ‰“é›»è©±è¨‚ä½ï¼ˆSYNï¼‰ï¼Œåº—å“¡æ¥èµ·é›»è©±ï¼ˆSYN-ACKï¼‰å°æ–¹å°±ä¸å‡ºè²ä¹Ÿä¸æ›æ–·ï¼Œå°è‡´é›»è©±ç·šå…¨è¢«ä½”æ»¿ã€‚é¡Œç›®å•ã€Œå“ªä¸€æ‹›æ²’ç”¨ã€ã€‚`,
                    logic: `<ul>
                                <li><b>è§£é¡Œæ­¥é©Ÿ 1 (å®šä½å±¤ç´š)</b>ï¼šSYN Flood æ˜¯ Layer 4 (å‚³è¼¸å±¤) æ”»æ“Šã€‚</li>
                                <li><b>è§£é¡Œæ­¥é©Ÿ 2 (æª¢è¦–é¸é …)</b>ï¼šDNS æ˜¯ Layer 7 (æ‡‰ç”¨å±¤) æˆ–åŸºç¤è¨­æ–½æŸ¥è©¢ã€‚</li>
                                <li><b>è§£é¡Œæ­¥é©Ÿ 3 (åˆ¤æ–·æœ‰æ•ˆæ€§)</b>ï¼šæ”»æ“Šè€…æ—¢ç„¶å·²ç¶“åœ¨æ‰“ä½ çš„ IP (é€²è¡Œ TCP æ¡æ‰‹)ï¼Œé‚£ä»–æ—©å°±æŸ¥å®Œ DNS äº†ï¼Œç”šè‡³ä¸éœ€è¦ DNSã€‚æ‰€ä»¥å¼„ DNS åå‘ä»£ç†æ•‘ä¸äº† TCP é€£ç·šå¡è»Šã€‚</li>
                            </ul>`,
                    options: `<ul>
                                <li><b>(A) DNS åå‘ä»£ç†</b>ï¼š<b>ç„¡æ•ˆ</b>ã€‚é€™æ˜¯æŸ¥é›»è©±ç°¿çš„æ©Ÿåˆ¶ï¼Œæ“‹ä¸äº†ç›´æ¥æ‰“é›»è©±é€²ä¾†çš„é¨·æ“¾ã€‚</li>
                                <li><b>(B) é€Ÿç‡é™åˆ¶</b>ï¼šæœ‰æ•ˆï¼Œé™åˆ¶åŒä¸€å€‹è™Ÿç¢¼æ‰“ä¾†çš„é »ç‡ã€‚</li>
                                <li><b>(C) SYN Cookies</b>ï¼šæœ‰æ•ˆï¼Œä¸ä½”ç”¨è¨˜æ†¶é«”ï¼Œçµ¦å°æ–¹ä¸€å€‹åŠ å¯†è™Ÿç¢¼ç‰Œï¼ŒçœŸçš„å›ä¾†ç¢ºèªæ‰çµ¦ä½å­ã€‚</li>
                                <li><b>(D) CDN</b>ï¼šæœ‰æ•ˆï¼Œè«‹ä¸€å †åˆ†åº—å¹«å¿™æ¥é›»è©±ã€‚</li>
                              </ul>`,
                    supplement: `<b>è§€å¿µå»¶ä¼¸ï¼š</b>DNS Sinkhole æ‰æ˜¯ç”¨ä¾†è™•ç†æƒ¡æ„ç¶²åŸŸè§£æçš„æŠ€è¡“ï¼Œä½†å°ç›´æ‰“ IP çš„ SYN Flood æ•ˆæœä¹Ÿæœ‰é™ã€‚<br>
                                 <b>åŸç†ï¼š</b>åˆ©ç”¨ TCP ä¸‰å‘äº¤æ¡çš„è¨­è¨ˆæ¼æ´ï¼Œè£½é€ å¤§é‡ã€ŒåŠé–‹é€£ç·šã€è€—ç›¡ Server è¨˜æ†¶é«”ã€‚`,
                    mnemonic: `ã€ŒSYN æ‰“é€£ç·š (L4)ï¼ŒDNS æŸ¥åœ°å€ï¼›<br>åœ°å€æŸ¥åˆ°äº†ï¼Œå†è—é›»è©±ç°¿ä¹Ÿæ²’ç”¨ã€‚ã€`,
                    traps: `<b>å¿ƒç†ç›²é»ï¼š</b>çœ‹åˆ° "Proxy" (ä»£ç†) å°±è¦ºå¾—è¬èƒ½ã€‚è¦åˆ†æ¸…æ¥šæ˜¯ HTTP Proxy (èƒ½æ“‹ L7) é‚„æ˜¯ DNS Proxy (æ“‹ä¸äº† L4)ã€‚`,
                    selfCheckQ: `SYN Cookies çš„ç¼ºé»æ˜¯ä»€éº¼ï¼Ÿ`,
                    selfCheckA: `æœƒéºå¤±ä¸€äº› TCP çš„é€²éšé¸é …è³‡è¨Š (å¦‚ Window Scale)ï¼Œä¸”è¨ˆç®— Hash æœƒæ¶ˆè€—ä¸€é» CPUã€‚`
                }
            },
            {
                id: 20,
                tag: "NIST CSF / æ‡‰è®Š",
                tagClass: "tag-mgm",
                text: "åƒè€ƒ NIST CSF æ¡†æ¶ï¼Œåœ¨ã€Œè³‡æºæœ‰é™ã€æƒ…æ³ä¸‹ï¼Œæ‡‰å°å…¥å“ªäº› DDoS é˜²è­·æ©Ÿåˆ¶æœ€ç‚ºåˆé©ï¼Ÿ(è¤‡é¸ï¼šé¸ä¸‰é …)",
                type: "multi",
                options: [
                    "RS.CO-02ï¼šç•¶ç™¼ç”Ÿ DDoS äº‹ä»¶æ™‚ï¼Œå³æ™‚èˆ‡å…§å¤–éƒ¨åˆ©å®³é—œä¿‚äººæºé€š",
                    "ID.IM-01ï¼šæ“´å¢ç¶²è·¯é »å¯¬èˆ‡è¨­å‚™æ•ˆèƒ½ä»¥æé«˜ DDoS æ”»æ“Šçš„é–€æª»",
                    "DE.CM-01ï¼šå¢è¨­æ–°ä¸–ä»£é˜²ç«ç‰†é™åˆ¶æƒ¡æ„æµé‡èˆ‡åµæ¸¬ç•°å¸¸å¨è„…",
                    "RS.MA-01ï¼šä¸€æ—¦ç™¼ç”Ÿ DDoS æ”»æ“Šæ™‚å¯ä»¥å•Ÿå‹•ç¶²è·¯ä¸Šæ¸¸æ¥­è€…çš„æµé‡æ¸…æ´—æœå‹™"
                ],
                correct: [
                    "RS.CO-02ï¼šç•¶ç™¼ç”Ÿ DDoS äº‹ä»¶æ™‚ï¼Œå³æ™‚èˆ‡å…§å¤–éƒ¨åˆ©å®³é—œä¿‚äººæºé€š",
                    "DE.CM-01ï¼šå¢è¨­æ–°ä¸–ä»£é˜²ç«ç‰†é™åˆ¶æƒ¡æ„æµé‡èˆ‡åµæ¸¬ç•°å¸¸å¨è„…",
                    "RS.MA-01ï¼šä¸€æ—¦ç™¼ç”Ÿ DDoS æ”»æ“Šæ™‚å¯ä»¥å•Ÿå‹•ç¶²è·¯ä¸Šæ¸¸æ¥­è€…çš„æµé‡æ¸…æ´—æœå‹™"
                ],
                detailedAnalysis: {
                    keywords: `<span class="highlight-text">è³‡æºæœ‰é™</span>ã€<span class="highlight-text">NIST CSF</span>ã€<span class="highlight-text">DDoS</span>ã€‚`,
                    vernacular: `å°å…¬å¸æ²’éŒ¢ï¼Œè¢«æ”»æ“Šäº†æ€éº¼è¾¦ï¼Ÿè¦æŒ‘ã€Œä¾¿å®œåˆå¤§ç¢—ã€çš„æ–¹æ³•ã€‚`,
                    logic: `<ul>
                                <li><b>è§£é¡Œæ­¥é©Ÿ 1 (æ ¸å¿ƒé™åˆ¶)</b>ï¼šæŠ“ä½ã€Œæœ€ä½æˆæœ¬ã€é€™å€‹é—œéµã€‚</li>
                                <li><b>è§£é¡Œæ­¥é©Ÿ 2 (ç¯©é¸é¸é …)</b>ï¼š
                                    <ul>
                                        <li>æºé€š (SOP) â†’ å…è²» (äººåŠ›æˆæœ¬)ã€‚</li>
                                        <li>è²·é »å¯¬ â†’ è¶…è²´ (ç„¡åº•æ´)ã€‚</li>
                                        <li>é˜²ç«ç‰† â†’ å¿…è¦æŠ•è³‡ (ä¸”èƒ½æ“‹å¤šç¨®æ”»æ“Š)ã€‚</li>
                                        <li>æµé‡æ¸…æ´— â†’ ä¾éœ€ä»˜è²» (è¢«æ”»æ“Šæ‰é–‹)ï¼Œæ¯”è‡ªå»ºä¾¿å®œã€‚</li>
                                    </ul>
                                </li>
                                <li><b>åŸç†</b>ï¼šNIST CSF å¼·èª¿ Identify, Protect, Detect, Respond, Recoverã€‚è³‡æºåˆ†é…è¦å¹³è¡¡ã€‚</li>
                            </ul>`,
                    options: `<ul>
                                <li><b>(A) æºé€š</b>ï¼šRS (Respond) ç¯„ç–‡ï¼Œä¾¿å®œæœ‰æ•ˆã€‚</li>
                                <li><b>(B) æ“´é »å¯¬</b>ï¼šID (Identify) ç¯„ç–‡ï¼Œä½†æˆæœ¬æ¥µé«˜ï¼Œä¸ç¬¦é¡Œæ„ã€‚</li>
                                <li><b>(C) é˜²ç«ç‰†</b>ï¼šDE (Detect) ç¯„ç–‡ï¼Œé«˜ CP å€¼ã€‚</li>
                                <li><b>(D) æ¸…æ´—</b>ï¼šRS (Respond) ç¯„ç–‡ï¼Œå€ŸåŠ›ä½¿åŠ›ã€‚</li>
                              </ul>`,
                    supplement: `<b>è§¸é¡æ—é€šï¼š</b>å¦‚æœæ˜¯ã€Œè³‡æºç„¡ä¸Šé™ã€çš„é‡‘èæ¥­ï¼Œé‚£ (B) æ“´å……é »å¯¬ä¹Ÿæ˜¯å¿…è¦çš„åŸºç¤å»ºè¨­ã€‚`,
                    mnemonic: `ã€Œæ²’éŒ¢åˆ¥æ‹šé »å¯¬ï¼Œè¦æœƒå«äºº(ISP)å¹«å¿™ï¼Œ<br>é‚„æœ‰è¨˜å¾—å®‰æ’«è€é—†(æºé€š)ã€‚ã€`,
                    traps: `<b>é¿å‘æŒ‡å—ï¼š</b>ä¸è¦çœ‹åˆ°ã€Œæé«˜æ”»æ“Šé–€æª»ã€å°±è¦ºå¾—å¥½ã€‚é¡Œç›®æœ‰ã€Œè³‡æºæœ‰é™ã€é€™å€‹ç·Šç®å’’ã€‚`,
                    selfCheckQ: `NIST CSF çš„äº”å¤§åŠŸèƒ½é †åºï¼Ÿ`,
                    selfCheckA: `è­˜åˆ¥ (ID) â†’ ä¿è­· (PR) â†’ åµæ¸¬ (DE) â†’ å›æ‡‰ (RS) â†’ å¾©åŸ (RC)ã€‚`
                }
            }
        ]
    };

    // --- å…¨åŸŸç‹€æ…‹ ---
    const state = {
        answers: {}, 
        status: {},
        shuffledOptions: {}
    };

    // --- åˆå§‹åŒ– ---
    function init() {
        renderTabs();
        prepareQuestions();
        renderQuestions();
        updateProgress();
        switchTab(quizData.questions[0].id);
    }

    // --- æ´—ç‰Œæ¼”ç®—æ³• ---
    function shuffleArray(array) {
        let currentIndex = array.length, randomIndex;
        const newArray = [...array];
        while (currentIndex != 0) {
            randomIndex = Math.floor(Math.random() * currentIndex);
            currentIndex--;
            [newArray[currentIndex], newArray[randomIndex]] = [
                newArray[randomIndex], newArray[currentIndex]];
        }
        return newArray;
    }

    // --- æº–å‚™é¡Œç›® ---
    function prepareQuestions() {
        const labels = ['A', 'B', 'C', 'D', 'E', 'F'];
        quizData.questions.forEach(q => {
            const optsObj = q.options.map((opt, idx) => ({
                text: opt,
                originalIndex: idx
            }));
            const shuffled = shuffleArray(optsObj);
            state.shuffledOptions[q.id] = shuffled.map((item, idx) => ({
                ...item,
                label: labels[idx]
            }));
        });
    }

    // --- æ¸²æŸ“ Tabs ---
    function renderTabs() {
        const container = document.getElementById('tabs-container');
        container.innerHTML = quizData.questions.map((q) => `
            <button class="tab-btn" id="tab-${q.id}" onclick="switchTab(${q.id})">
                Q${q.id}
                <span id="icon-${q.id}"></span>
            </button>
        `).join('');
    }

    // --- æ¸²æŸ“é¡Œç›® (æ ¸å¿ƒé‚è¼¯æ›´æ–°) ---
    function renderQuestions() {
        const container = document.getElementById('questions-container');
        container.innerHTML = quizData.questions.map(q => {
            const options = state.shuffledOptions[q.id];
            const isMulti = q.type === 'multi';
            const inputType = isMulti ? 'checkbox' : 'radio';
            const da = q.detailedAnalysis; // ç°¡å¯«

            // é¡Œç›®é—œéµå­—æ¨™ç´…
            const highlightedText = highlightKeywords(q.text);

            return `
            <div class="question-card" id="card-${q.id}">
                <div class="q-header">
                    <span class="tag ${q.tagClass}">${q.tag}</span>
                    <span class="tag" style="background:#999; margin-left:10px;">${isMulti ? 'è¤‡é¸é¡Œ' : 'å–®é¸é¡Œ'}</span>
                </div>
                
                <div class="q-text">
                    ${q.id}. ${highlightedText}
                </div>

                <div class="options-list" id="opts-list-${q.id}">
                    ${options.map(opt => `
                        <label class="option-item ${isMulti ? 'multi' : ''}" id="opt-item-${q.id}-${opt.label}">
                            <input type="${inputType}" name="q${q.id}" value="${opt.text}">
                            <div class="checkmark"></div>
                            <span class="opt-label">${opt.label}.</span>
                            <span class="opt-text">${opt.text}</span>
                        </label>
                    `).join('')}
                </div>

                <div class="action-area">
                    <button class="btn btn-submit" id="btn-submit-${q.id}" onclick="checkAnswer(${q.id})">
                        é€å‡ºç­”æ¡ˆ
                    </button>
                    <button class="btn btn-reset" id="btn-reset-${q.id}" onclick="resetQuestion(${q.id})">
                        â†º é‡æ–°ä½œç­”
                    </button>
                </div>

                <!-- è©³è§£å€å¡Š -->
                <div class="explain-section" id="explain-${q.id}">
                    <div class="explain-grid">
                        
                        <div class="explain-card">
                            <div class="explain-header header-step1">ğŸ¯ ç¬¬ä¸€æ­¥ï¼šæ‰¾é—œéµå­—</div>
                            <div class="explain-body">${da.keywords}</div>
                        </div>

                        <div class="explain-card">
                            <div class="explain-header header-step2">ğŸ—£ï¸ ç¬¬äºŒæ­¥ï¼šç™½è©±ç¿»è­¯</div>
                            <div class="explain-body">${da.vernacular}</div>
                        </div>

                        <div class="explain-card">
                            <div class="explain-header header-step3">ğŸ’¡ ç¬¬ä¸‰æ­¥ï¼šè§£é¡Œæ€è·¯</div>
                            <div class="explain-body">${da.logic}</div>
                        </div>

                        <div class="explain-card">
                            <div class="explain-header header-step4">ğŸ” ç¬¬å››æ­¥ï¼šé¸é …åˆ†æ</div>
                            <div class="explain-body">${da.options}</div>
                        </div>

                        <div class="explain-card">
                            <div class="explain-header" style="background:#e0f2f1; color:#00695c;">ğŸ“š è§€å¿µè£œå……èˆ‡å»¶ä¼¸</div>
                            <div class="explain-body">${da.supplement}</div>
                        </div>

                        <div class="explain-card" style="border-color:#ffe0b2;">
                            <div class="explain-header header-golden">ğŸ§  è¨˜æ†¶å£è¨£</div>
                            <div class="explain-body" style="text-align:center; font-size:1.1rem; font-weight:bold; color:#8d6e63;">${da.mnemonic}</div>
                        </div>

                        <div class="explain-card">
                            <div class="explain-header header-trap">âš ï¸ å¸¸è¦‹é™·é˜± & é¿å‘æŒ‡å—</div>
                            <div class="explain-body">${da.traps}</div>
                        </div>

                        <details class="self-check">
                            <summary>ğŸ§ è‡ªæˆ‘æª¢æ¸¬ï¼š${da.selfCheckQ}</summary>
                            <div class="check-content">
                                <div class="answer-box">
                                    ğŸ’¡ ç­”æ¡ˆï¼š${da.selfCheckA}
                                </div>
                            </div>
                        </details>

                    </div>
                </div>
            </div>
            `;
        }).join('');
    }

    // --- é—œéµå­—æ¨™ç´…é‚è¼¯ ---
    function highlightKeywords(text) {
        const negativeWords = ["ä¸æ­£ç¢º", "ä¸æ˜¯", "éŒ¯èª¤", "æœ€ä¸é©ç”¨", "ç„¡æ³•", "å¯èƒ½ç„¡æ³•"];
        let newText = text;
        negativeWords.forEach(word => {
            const regex = new RegExp(word, "g");
            newText = newText.replace(regex, `<span class="highlight-negative">${word}</span>`);
        });
        return newText;
    }

    // --- åˆ‡æ› Tab ---
    function switchTab(id) {
        document.querySelectorAll('.question-card').forEach(card => card.classList.remove('active-card'));
        document.getElementById(`card-${id}`).classList.add('active-card');
        
        document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
        document.getElementById(`tab-${id}`).classList.add('active');
        
        window.scrollTo({ top: 180, behavior: 'smooth' });
    }

    // --- æª¢æŸ¥ç­”æ¡ˆ ---
    function checkAnswer(id) {
        const qData = quizData.questions.find(q => q.id === id);
        const selectedInputs = document.querySelectorAll(`input[name="q${id}"]:checked`);
        const userAnswers = Array.from(selectedInputs).map(input => input.value);
        
        if (userAnswers.length === 0) return;

        const sortedUser = [...userAnswers].sort();
        const sortedCorrect = [...qData.correct].sort();
        const isCorrect = JSON.stringify(sortedUser) === JSON.stringify(sortedCorrect);
        
        state.status[id] = isCorrect ? 'correct' : 'wrong';
        state.answers[id] = userAnswers;

        const optionsList = document.getElementById(`opts-list-${id}`);
        const inputs = optionsList.querySelectorAll('input');
        
        inputs.forEach(input => {
            const parent = input.closest('.option-item');
            parent.classList.add('disabled');
            
            if (qData.correct.includes(input.value)) {
                parent.classList.add('correct-ans');
            } else if (input.checked && !qData.correct.includes(input.value)) {
                parent.classList.add('wrong-ans');
            }
        });

        document.getElementById(`btn-submit-${id}`).style.display = 'none';
        document.getElementById(`btn-reset-${id}`).style.display = 'flex';

        const explainSec = document.getElementById(`explain-${id}`);
        explainSec.style.display = 'block';
        explainSec.scrollIntoView({ behavior: 'smooth', block: 'start' });

        updateTabStatus(id, isCorrect);
        updateProgress();
    }

    // --- æ›´æ–° Tab ç‹€æ…‹ ---
    function updateTabStatus(id, isCorrect) {
        const tab = document.getElementById(`tab-${id}`);
        const icon = document.getElementById(`icon-${id}`);
        
        tab.classList.remove('correct', 'wrong');
        tab.classList.add(isCorrect ? 'correct' : 'wrong');
        icon.innerHTML = isCorrect ? 'âœ“' : 'âœ—';
    }

    // --- é‡ç½®å–®é¡Œ ---
    function resetQuestion(id) {
        state.status[id] = null;
        state.answers[id] = [];
        
        const inputs = document.querySelectorAll(`input[name="q${id}"]`);
        inputs.forEach(input => input.checked = false);
        
        const optionItems = document.querySelectorAll(`#opts-list-${id} .option-item`);
        optionItems.forEach(item => {
            item.classList.remove('correct-ans', 'wrong-ans', 'disabled');
        });

        document.getElementById(`explain-${id}`).style.display = 'none';
        document.getElementById(`btn-submit-${id}`).style.display = 'flex';
        document.getElementById(`btn-reset-${id}`).style.display = 'none';

        const tab = document.getElementById(`tab-${id}`);
        const icon = document.getElementById(`icon-${id}`);
        tab.classList.remove('correct', 'wrong');
        icon.innerHTML = '';
        
        updateProgress();
        switchTab(id);
    }

    // --- æ›´æ–°é€²åº¦æ¢ ---
    function updateProgress() {
        const total = quizData.questions.length;
        const completed = Object.keys(state.status).filter(k => state.status[k] !== null).length;
        const percent = (completed / total) * 100;
        
        document.getElementById('progress-bar').style.width = `${percent}%`;
        document.getElementById('progress-text').innerText = `${completed}/${total}`;
    }

    window.onload = init;
</script>

</body>
</html>