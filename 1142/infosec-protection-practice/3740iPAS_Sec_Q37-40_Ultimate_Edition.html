<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>iPAS è³‡å®‰å·¥ç¨‹å¸«æ¨¡æ“¬é¡Œçµ„ (Q37-40) çµ‚æ¥µè©³è§£ç‰ˆ</title>
    <style>
        :root {
            --primary: #2c3e50;
            --accent: #3498db;
            --success: #27ae60;
            --success-bg: #e8f5e9;
            --error: #c0392b;
            --error-bg: #fce4ec;
            --warning: #f39c12;
            --text: #333333;
            --bg: #f4f7f6;
            --card-bg: #ffffff;
            --border-radius: 12px;
            --shadow: 0 4px 15px rgba(0,0,0,0.08);
            
            /* Tag Colors */
            --tag-sec: #c0392b;
            --tag-mgm: #d35400;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: system-ui, "Noto Sans TC", "Microsoft JhengHei", sans-serif;
            background-color: var(--bg);
            color: var(--text);
            line-height: 1.6;
            font-size: 16px;
            padding-bottom: 60px;
        }

        /* Container */
        .container {
            max-width: 960px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        header {
            background: var(--card-bg);
            padding: 20px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            margin-bottom: 20px;
        }

        h1 {
            font-size: 1.5rem;
            color: var(--primary);
            font-weight: 700;
            margin-bottom: 10px;
        }

        .progress-track {
            background: #eee;
            height: 10px;
            border-radius: 5px;
            overflow: hidden;
            margin-top: 10px;
        }

        .progress-bar {
            height: 100%;
            background: var(--accent);
            width: 0%;
            transition: width 0.4s ease;
        }

        /* Group Context */
        .group-context {
            background-color: #e3f2fd;
            color: #0d47a1;
            padding: 15px 20px;
            border-radius: var(--border-radius);
            margin-bottom: 20px;
            border-left: 5px solid var(--accent);
            font-size: 0.95rem;
        }

        /* Tabs */
        .tabs-area {
            display: flex;
            gap: 10px;
            overflow-x: auto;
            margin-bottom: 20px;
            padding-bottom: 5px;
        }

        .tab-btn {
            flex: 0 0 auto;
            padding: 10px 20px;
            border: none;
            background: #e0e0e0;
            border-radius: 20px;
            cursor: pointer;
            font-weight: bold;
            color: #555;
            transition: all 0.2s;
        }

        .tab-btn.active {
            background: var(--primary);
            color: white;
            transform: scale(1.05);
        }

        .tab-btn.correct { background: var(--success); color: white; }
        .tab-btn.wrong { background: var(--error); color: white; }

        /* Question Card */
        .card {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 25px;
            box-shadow: var(--shadow);
            margin-bottom: 25px;
        }

        .q-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
        }

        .q-tag {
            background: #666;
            color: white;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 0.8rem;
        }
        .tag-sec { background: var(--tag-sec); }
        .tag-mgm { background: var(--tag-mgm); }

        .q-text {
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 20px;
        }

        .negative-keyword {
            color: var(--error);
            text-decoration: underline;
            font-weight: 900;
        }

        /* Options */
        .options-grid {
            display: grid;
            gap: 12px;
        }

        .option-item {
            display: flex;
            align-items: center;
            padding: 15px;
            border: 2px solid #eee;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
        }

        .option-item:hover:not(.disabled) {
            background: #f8f9fa;
            border-color: #ccc;
        }

        .option-item.disabled {
            cursor: default;
        }

        .option-item.correct-ans {
            background: var(--success-bg);
            border-color: var(--success);
            color: #155724;
        }
        
        .option-item.wrong-ans {
            background: var(--error-bg);
            border-color: var(--error);
            color: #721c24;
        }

        .option-item input {
            margin-right: 15px;
            transform: scale(1.3);
        }

        /* Action Buttons */
        .action-area {
            margin-top: 25px;
            text-align: center;
        }

        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 50px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            color: white;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: transform 0.1s;
        }

        .btn:active { transform: scale(0.95); }
        .btn-submit { background: var(--primary); }
        .btn-reset { background: #7f8c8d; }

        /* Explanation Sections (Rich Content) */
        .explanation-container {
            display: none;
            margin-top: 30px;
            animation: fadeIn 0.5s;
        }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .step-card {
            background: white;
            border: 1px solid #e0e0e0;
            border-radius: 10px;
            margin-bottom: 15px;
            overflow: hidden;
        }

        .step-header {
            background: #f1f2f6;
            padding: 12px 20px;
            font-weight: bold;
            color: var(--primary);
            border-bottom: 1px solid #ddd;
            display: flex;
            align-items: center;
        }

        .step-icon { margin-right: 10px; font-size: 1.2rem; }

        .step-content {
            padding: 20px;
            font-size: 0.95rem;
            color: #444;
        }

        .highlight {
            background: #fff3cd;
            padding: 2px 5px;
            border-radius: 3px;
            font-weight: bold;
            color: #856404;
        }

        /* Specific Styles for Sections */
        .section-logic { border-left: 5px solid var(--accent); }
        .section-trap { border-left: 5px solid var(--error); }
        .section-memo { border-left: 5px solid var(--warning); background: linear-gradient(to right, #fffdf5, #fff); }
        
        /* Self Check */
        .self-check-box {
            background: #f8f9fa;
            border: 2px dashed #bdc3c7;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
        }

        .check-item { margin-bottom: 15px; }
        .check-q { font-weight: bold; margin-bottom: 8px; display: block; }
        
        .check-ans { 
            display: none; 
            margin-top: 8px; 
            padding: 10px; 
            background: #d4edda; 
            color: #155724; 
            border-radius: 5px; 
        }

        .btn-toggle-ans {
            font-size: 0.8rem;
            padding: 5px 12px;
            background: var(--accent);
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>iPAS è³‡å®‰é¡Œçµ„ (Q37-40) çµ‚æ¥µè§£æç‰ˆ</h1>
        <div>å®Œæˆé€²åº¦ï¼š<span id="progress-text">0/4</span></div>
        <div class="progress-track">
            <div class="progress-bar" id="progress-bar"></div>
        </div>
    </header>

    <div class="group-context">
        <strong>ã€é¡Œçµ„å…±åŒæƒ…å¢ƒã€‘</strong><br>
        æœ¬é¡Œçµ„æƒ…å¢ƒæ¶µè“‹ä¼æ¥­è³‡å®‰å¯¦å‹™ï¼ŒåŒ…å« DevSecOps æµç¨‹å°å…¥ã€Web æ»²é€æ¸¬è©¦åŸ·è¡Œã€é«˜å±¤ç®¡ç†å ±å‘Šæ’°å¯«ï¼Œä»¥åŠå¼±é»æƒæå¾Œçš„åˆ†é¡èˆ‡ä¿®è£œç­–ç•¥ã€‚è«‹æ ¹æ“šé€™äº›è·å ´æƒ…å¢ƒé€²è¡Œåˆ¤æ–·ã€‚
    </div>

    <div class="tabs-area" id="tabs-area"></div>

    <div id="question-area"></div>
</div>

<script>
    // --- Rich Content Data ---
    const quizData = [
        {
            id: 37,
            tag: "æŠ€è¡“",
            tagClass: "tag-sec",
            text: "ã€æƒ…å¢ƒï¼šDevSecOpsã€‘é–‹ç™¼åœ˜éšŠå¸Œæœ›å»ºç«‹è‡ªå‹•åŒ–åŸå§‹ç¢¼æª¢æ¸¬æ©Ÿåˆ¶ï¼Œç¬¦åˆã€Œå®‰å…¨å·¦ç§» (Shift Left)ã€ç²¾ç¥ï¼Œç›¡æ—©ç™¼ç¾å¼±é»ã€‚ä¸‹åˆ—ä½•ç¨®æŠ€è¡“æœ€é©åˆæ•´åˆè‡³ CI/CD å·¥ä½œæµç¨‹ä¸­ï¼Ÿ",
            type: "single",
            options: ["éœæ…‹æ‡‰ç”¨å®‰å…¨æ¸¬è©¦ (SAST)", "SQL è³‡æ–™è¡¨æ¯”å°å·¥å…·", "é»‘ç®±æ¸¬è©¦ (Black-box Testing)", "å‹•æ…‹æ‡‰ç”¨å®‰å…¨æ¸¬è©¦ (DAST)"],
            correct: ["A"],
            explanation: {
                step1: "é—œéµå­—ï¼šè‡ªå‹•åŒ–åŸå§‹ç¢¼æª¢æ¸¬ã€DevSecOpsã€CI/CDã€æå‰ç™¼ç¾å¼±é» (Shift Left)ã€‚",
                step2: "ç™½è©±ç¿»è­¯ï¼šå¦‚æœä½ æƒ³åœ¨å·¥ç¨‹å¸«å‰›å¯«å¥½ç¨‹å¼ç¢¼æ™‚ï¼Œå°±è‡ªå‹•æª¢æŸ¥æœ‰æ²’æœ‰å¯«éŒ¯å°è‡´å®‰å…¨æ¼æ´ï¼Œå“ªç¨®å·¥å…·æœ€é©åˆå¡é€²è‡ªå‹•åŒ–æµç¨‹è£¡ï¼Ÿ",
                step3: {
                    title: "è§£é¡Œæ€è·¯èˆ‡åŸç†",
                    content: `
                        <ul>
                            <li><strong>åŸç†ï¼š</strong>DevSecOps å¼·èª¿ã€Œå®‰å…¨å·¦ç§»ã€ï¼Œä¹Ÿå°±æ˜¯åœ¨è»Ÿé«”é–‹ç™¼ç”Ÿå‘½é€±æœŸ (SDLC) çš„è¶Šæ—©æœŸ (å·¦é‚Š) é€²è¡Œæ¸¬è©¦è¶Šå¥½ã€‚</li>
                            <li><strong>æ­¥é©Ÿ 1ï¼š</strong>çœ‹åˆ°ã€ŒåŸå§‹ç¢¼æª¢æ¸¬ã€ï¼Œç›´æ¥è¯æƒ³åˆ°ç™½ç®±æ¸¬è©¦ (White-box)ã€‚</li>
                            <li><strong>æ­¥é©Ÿ 2ï¼š</strong>SAST (Static Application Security Testing) æ˜¯é‡å°åŸå§‹ç¢¼é€²è¡Œéœæ…‹åˆ†æçš„æŠ€è¡“ï¼Œä¸éœ€è¦åŸ·è¡Œç¨‹å¼ã€‚</li>
                            <li><strong>æ­¥é©Ÿ 3ï¼š</strong>SAST é€Ÿåº¦å¿«ï¼Œé©åˆåœ¨ CI/CD çš„ Build éšæ®µè‡ªå‹•åŸ·è¡Œï¼Œç¬¦åˆã€Œç›¡æ—©ç™¼ç¾ã€çš„éœ€æ±‚ã€‚</li>
                            <li><strong>ç”Ÿæ´»ä¾‹å­ï¼š</strong>é€™å°±åƒè“‹æˆ¿å­ã€‚SAST æ˜¯åœ¨ç•«è¨­è¨ˆåœ–æ™‚å°±æª¢æŸ¥æ¨‘æŸ±ä½ç½®å°ä¸å° (çœ‹åŸå§‹ç¢¼)ï¼›DAST æ˜¯æˆ¿å­è“‹å¥½å¾Œå»è¸¹é–€çª—çœ‹ç‰¢ä¸ç‰¢å›º (åŸ·è¡Œå¾Œæ¸¬è©¦)ã€‚ç•«åœ–æ™‚ä¿®æ”¹æœ€ä¾¿å®œï¼Œè“‹å¥½å¾Œä¿®æ”¹æœ€è²´ã€‚</li>
                        </ul>
                    `
                },
                step4: [
                    { opt: "(A) SAST", desc: "æ­£ç¢ºã€‚ç›´æ¥æƒæåŸå§‹ç¢¼ï¼Œé©åˆæ—©æœŸè‡ªå‹•åŒ–ã€‚", status: "correct" },
                    { opt: "(B) SQL æ¯”å°", desc: "éŒ¯èª¤ã€‚é€™æ˜¯ç”¨ä¾†åŒæ­¥è³‡æ–™åº«çµæ§‹çš„å·¥å…·ã€‚", status: "wrong" },
                    { opt: "(C) é»‘ç®±æ¸¬è©¦", desc: "éŒ¯èª¤ã€‚é€šå¸¸æŒ‡ DAST æˆ–æ»²é€æ¸¬è©¦ï¼Œéœ€ç­‰å¾…ç¨‹å¼éƒ¨ç½²å¾Œæ‰èƒ½åšã€‚", status: "wrong" },
                    { opt: "(D) DAST", desc: "éŒ¯èª¤ã€‚é›–å¯è‡ªå‹•åŒ–ï¼Œä½†å±¬å‹•æ…‹æ¸¬è©¦ (Runtime)ï¼Œæ™‚é–“é»è¼ƒæ™šã€‚", status: "wrong" }
                ],
                extension: `
                    <strong>è§€å¿µè£œå……ï¼š</strong><br>
                    1. <strong>Shift Left (å®‰å…¨å·¦ç§»)ï¼š</strong>å°‡è³‡å®‰æ¸¬è©¦å¾ã€Œä¸Šç·šå‰ã€ç§»å‹•åˆ°ã€Œé–‹ç™¼ä¸­ã€ã€‚<br>
                    2. <strong>èª¤å ±ç‡ (False Positive)ï¼š</strong>SAST çš„ç¼ºé»æ˜¯å®¹æ˜“èª¤åˆ¤ï¼Œå› ç‚ºå®ƒçœ‹ä¸æ‡‚ç¨‹å¼é‚è¼¯ï¼Œåªå°ç…§è¦å‰‡åº«ã€‚
                `,
                analogy: "SAST æ˜¯é›¶ä»¶å‰›å‡ºå» å°±ç”¨Xå…‰æƒæï¼›DAST æ˜¯æ•´å°è»Šçµ„è£å¥½å¾Œä¸Šè·¯è©¦è·‘ã€‚",
                mnemonic: "ã€Œçœ‹ç¢¼å…ˆ SASTï¼Œè·‘èµ·ä¾†å† DASTï¼›å·¦ç§»å°±æ˜¯è¶Šæ—©è¶Šå¥½ã€‚ã€",
                trap: "é™·é˜±ï¼šçœ‹åˆ°ã€Œè‡ªå‹•åŒ–ã€å°±æƒ³é¸ DASTï¼Ÿ<br>é¿å‘ï¼šSAST ä¹Ÿæ˜¯é«˜åº¦è‡ªå‹•åŒ–çš„ï¼Œä¸”é¡Œç›®æŒ‡å®šã€ŒåŸå§‹ç¢¼ã€ï¼Œé€™åªæœ‰ SAST èƒ½åšã€‚",
                selfChecks: [
                    { q: "1. æ‡‰ç”¨ç¨‹å¼é‚„æ²’è·‘èµ·ä¾† (é‚„æ²’ Compile æˆ– Deploy)ï¼Œå¯ä»¥åš DAST å—ï¼Ÿ", a: "ä¸è¡Œã€‚DAST å¿…é ˆèˆ‡é‹ä½œä¸­çš„æ‡‰ç”¨ç¨‹å¼äº’å‹•ã€‚" },
                    { q: "2. ç‚ºä»€éº¼ SAST é©åˆ CI/CDï¼Ÿ", a: "å› ç‚ºå®ƒæƒæé€Ÿåº¦ç›¸å°å¿«ï¼Œä¸”ä¸éœ€æº–å‚™æ¸¬è©¦ç’°å¢ƒï¼Œå·¥ç¨‹å¸« Commit code å¾Œå¹¾åˆ†é˜å…§å°±èƒ½çœ‹åˆ°çµæœã€‚" }
                ]
            }
        },
        {
            id: 38,
            tag: "æŠ€è¡“",
            tagClass: "tag-sec",
            text: "ã€æƒ…å¢ƒï¼šWeb æ»²é€æ¸¬è©¦ã€‘ä½ éœ€è¦é¸æ“‡å…·å‚™ã€Œæ””æˆª (Intercept)ã€èˆ‡ã€Œæ³¨å…¥/é‡æ”¾ (Injection/Replay)ã€HTTP è«‹æ±‚åŠŸèƒ½çš„å·¥å…·ã€‚è«‹å•ä¸‹åˆ—ä½•é …å·¥å…·æœ€é©åˆï¼Ÿ",
            type: "single",
            options: ["SonarQube", "Burp Suite", "Qualys", "Nmap"],
            correct: ["B"],
            explanation: {
                step1: "é—œéµå­—ï¼šWeb å¼±é»æ»²é€æ¸¬è©¦ã€æ””æˆª (Intercept)ã€æ³¨å…¥ (Injection)ã€HTTP è«‹æ±‚ã€‚",
                step2: "ç™½è©±ç¿»è­¯ï¼šä½ è¦ç•¶å€‹ã€Œä¸­é–“äººã€ï¼ŒæŠŠç€è¦½å™¨å¯„çµ¦ä¼ºæœå™¨çš„ä¿¡ä»¶åŠè·¯æ””ä¸‹ä¾†ï¼Œå·å·æ”¹æ‰è£¡é¢çš„å…§å®¹ (æ³¨å…¥æ”»æ“Š) å†å¯„å‡ºå»ï¼Œè¦ç”¨å“ªå€‹å·¥å…·ï¼Ÿ",
                step3: {
                    title: "è§£é¡Œæ€è·¯èˆ‡åŸç†",
                    content: `
                        <ul>
                            <li><strong>åŸç†ï¼š</strong>é€™æ˜¯åœ¨è€ƒ Web Proxy (ä»£ç†ä¼ºæœå™¨) çš„æ‡‰ç”¨ã€‚æ»²é€æ¸¬è©¦ä¸­ï¼Œæˆ‘å€‘éœ€è¦æ””æˆªå°åŒ…ä¾†ä¿®æ”¹åƒæ•¸ã€‚</li>
                            <li><strong>æ­¥é©Ÿ 1ï¼š</strong>çœ‹åˆ°ã€Œæ””æˆªã€ã€ã€Œä¿®æ”¹è«‹æ±‚ã€ï¼Œå°±è¦æ‰¾ Proxy é¡å‹çš„å·¥å…·ã€‚</li>
                            <li><strong>æ­¥é©Ÿ 2ï¼š</strong>Burp Suite æ˜¯å…¨çƒè³‡å®‰æ¥­ç•Œæ¨™æº–çš„ Web Proxy å·¥å…·ã€‚</li>
                            <li><strong>ç”Ÿæ´»ä¾‹å­ï¼š</strong>Burp Suite å°±åƒæµ·é—œæª¢æŸ¥ç«™ã€‚æ‰€æœ‰é€²å‡ºå£çš„è²¨æ«ƒ (å°åŒ…) éƒ½è¦ç¶“éå®ƒï¼Œæµ·é—œäººå“¡å¯ä»¥æŠŠè²¨æ«ƒæ‰£ç•™ä¸‹ä¾† (Intercept)ï¼ŒæŠŠè£¡é¢çš„è˜‹æœæ›æˆç‚¸å½ˆ (Injection)ï¼Œå†æ”¾è¡Œçœ‹å°æ–¹æ”¶åˆ°æœƒæ€æ¨£ã€‚</li>
                        </ul>
                    `
                },
                step4: [
                    { opt: "(A) SonarQube", desc: "éŒ¯èª¤ã€‚é€™æ˜¯åŸå§‹ç¢¼æƒæå·¥å…· (SAST)ã€‚", status: "wrong" },
                    { opt: "(B) Burp Suite", desc: "æ­£ç¢ºã€‚å…·å‚™ Proxy, Repeater, Intruder ç­‰å¼·å¤§æ””æˆªåŠŸèƒ½ã€‚", status: "correct" },
                    { opt: "(C) Qualys", desc: "éŒ¯èª¤ã€‚é€™æ˜¯è‡ªå‹•åŒ–å¼±é»æƒæå¹³å°ï¼Œéæ‰‹å‹•æ””æˆªå·¥å…·ã€‚", status: "wrong" },
                    { opt: "(D) Nmap", desc: "éŒ¯èª¤ã€‚é€™æ˜¯ç¶²è·¯åŸ å£æƒæå·¥å…· (Port Scanner)ã€‚", status: "wrong" }
                ],
                extension: `
                    <strong>åŠŸèƒ½å®šç¾© (Burp Suite)ï¼š</strong><br>
                    1. <strong>Repeaterï¼š</strong>é‡æ”¾æ”»æ“Šã€‚æ‰‹å‹•ä¿®æ”¹åƒæ•¸ï¼Œåè¦†ç™¼é€è«‹æ±‚ã€‚<br>
                    2. <strong>Intruderï¼š</strong>è‡ªå‹•åŒ–æ³¨å…¥ã€‚è¨­å®šè®Šæ•¸ï¼Œç”¨å­—å…¸æª”å¤§é‡è½Ÿç‚¸ã€‚
                `,
                analogy: "Nmap æ˜¯åœ¨é–€å£çœ‹å“ªæ‰‡é–€æ²’é– (æƒ Port)ï¼›Burp æ˜¯é€²é–€å¾Œå‡å‚³è–æ—¨ (æ”¹å°åŒ…)ã€‚",
                mnemonic: "ã€Œæ””æˆªæ”¹åŒ…ç”¨ Burpï¼Œæƒæé–‹é–€ç”¨ Nmapã€‚ã€",
                trap: "é™·é˜±ï¼šæ··æ·†ã€Œæƒæå™¨ã€èˆ‡ã€Œä»£ç†å·¥å…·ã€ã€‚<br>é¿å‘ï¼šQualys æˆ– Nessus æ˜¯è‡ªå‹•æƒæå ±å‘Šï¼ŒBurp æ˜¯è®“é§­å®¢æ‰‹å‹•æ“ä½œç²¾ç´°æ”»æ“Šã€‚",
                selfChecks: [
                    { q: "1. å¦‚æœæˆ‘æƒ³çŸ¥é“ç›®æ¨™ä¸»æ©Ÿé–‹äº†å“ªäº› Port (å¦‚ 80, 443)ï¼Œè©²ç”¨èª°ï¼Ÿ", a: "Nmapã€‚" },
                    { q: "2. ä»€éº¼æ˜¯ä¸­é–“äººæ”»æ“Š (MITM) æ¸¬è©¦ï¼Ÿ", a: "å°±æ˜¯é€éåƒ Burp é€™æ¨£çš„ Proxyï¼Œå¡åœ¨å®¢æˆ¶ç«¯èˆ‡ä¼ºæœå™¨ä¸­é–“ç«Šè½æˆ–ç«„æ”¹è³‡æ–™ã€‚" }
                ]
            }
        },
        {
            id: 39,
            tag: "ç®¡ç†",
            tagClass: "tag-mgm",
            text: "ã€æƒ…å¢ƒï¼šè³‡å®‰å ±å‘Šã€‘ä½ åœ¨æ•´ç†å°‡å®Œæ•´çš„è³‡å®‰æ¸¬è©¦å ±å‘Šæº–å‚™æäº¤çµ¦ã€Œè‘£äº‹æœƒã€ï¼Œä¸‹åˆ—ä½•é …å…§å®¹å°è‘£äº‹æœƒè€Œè¨€æœ€ã€Œä¸ã€é‡è¦ï¼Ÿ",
            type: "single",
            options: ["æ¸¬è©¦äººå“¡èƒŒæ™¯èˆ‡å·¥å…·ç‰ˆæœ¬", "åŸ·è¡Œæ¸¬è©¦æ‰€éœ€è€—è²»çš„æ™‚é–“ (å·¥æ™‚)", "ç¬¦åˆå…¬å¸æœŸæœ›åŠéœ€æ±‚çš„çµè«–", "å¼±é»è©•ä¼°çµæœèˆ‡ä¿®è£œå»ºè­°"],
            correct: ["B"],
            explanation: {
                step1: "é—œéµå­—ï¼šæäº¤çµ¦è‘£äº‹æœƒã€å®Œæ•´æ¸¬è©¦å ±å‘Šã€æœ€ã€Œä¸ã€é‡è¦ã€‚",
                step2: "ç™½è©±ç¿»è­¯ï¼šå¤§è€é—†å€‘è¦æ±ºå®šæŠ•å¤šå°‘éŒ¢åšè³‡å®‰ï¼Œå“ªä¸€æ¢è³‡è¨Šå°ä»–å€‘ã€Œåšæ±ºç­–ã€æœ€æ²’ç”¨ï¼Ÿ",
                step3: {
                    title: "è§£é¡Œæ€è·¯èˆ‡åŸç†",
                    content: `
                        <ul>
                            <li><strong>åŸç†ï¼š</strong>å—çœ¾åˆ†æ (Audience Analysis)ã€‚å ±å‘Šå¿…é ˆæ ¹æ“šé–±è®€å°è±¡èª¿æ•´å…§å®¹ã€‚</li>
                            <li><strong>æ­¥é©Ÿ 1ï¼š</strong>åˆ†æè‘£äº‹æœƒé—œæ³¨é»ï¼šé¢¨éšª (Risk)ã€å½±éŸ¿ (Impact)ã€æˆæœ¬ (Cost)ã€åˆè¦ (Compliance)ã€‚</li>
                            <li><strong>æ­¥é©Ÿ 2ï¼š</strong>åˆ†æé¸é …ã€‚(B)ã€Œè€—è²»æ™‚é–“ã€å±¬æ–¼å°ˆæ¡ˆåŸ·è¡Œå±¤é¢çš„è¡Œæ”¿ç‘£äº‹ï¼Œè€é—†ä¸åœ¨ä¹éç¨‹å¤šè¾›è‹¦ï¼Œåªåœ¨ä¹çµæœèˆ‡é¢¨éšªã€‚</li>
                            <li><strong>ç”Ÿæ´»ä¾‹å­ï¼š</strong>å°±åƒä½ å»çœ‹é†«ç”Ÿã€‚ä½ æƒ³çŸ¥é“ã€Œå¾—äº†ä»€éº¼ç—… (é¢¨éšª)ã€æœƒä¸æœƒæ­» (å½±éŸ¿)ã€è¦ä¸è¦é–‹åˆ€ (å»ºè­°)ã€ã€‚ä½ ä¸æœƒæƒ³çŸ¥é“é†«ç”Ÿã€Œæ˜¨å¤©ç¡å¹¾å€‹å°æ™‚ã€æˆ–ã€Œè½è¨ºå™¨è²·å¤šå°‘éŒ¢ã€ï¼Œé›–ç„¶é€™äº›æ˜¯çœ‹è¨ºéç¨‹çš„ä¸€éƒ¨åˆ†ï¼Œä½†å°ä½ çš„æ±ºç­–ç„¡é—œã€‚</li>
                        </ul>
                    `
                },
                step4: [
                    { opt: "(A) äººå“¡èƒŒæ™¯", desc: "é‡è¦ã€‚è­‰æ˜å ±å‘Šçš„æ¬Šå¨æ€§èˆ‡å¯ä¿¡åº¦ã€‚", status: "wrong" },
                    { opt: "(B) è€—è²»æ™‚é–“", desc: "æœ€ä¸é‡è¦ã€‚é€™æ˜¯æµæ°´å¸³ï¼Œå°é«˜å±¤æ±ºç­–ç„¡åƒ¹å€¼ã€‚", status: "correct" },
                    { opt: "(C) çµè«–", desc: "é‡è¦ã€‚è€é—†æœ€æ„›çœ‹æ‘˜è¦èˆ‡çµè«–ã€‚", status: "wrong" },
                    { opt: "(D) è©•ä¼°èˆ‡å»ºè­°", desc: "é‡è¦ã€‚é€™æ˜¯æ±ºå®šé ç®—èˆ‡å„ªå…ˆé †åºçš„ä¾æ“šã€‚", status: "wrong" }
                ],
                extension: `
                    <strong>å ±å‘Šåˆ†å±¤åŸå‰‡ï¼š</strong><br>
                    1. <strong>é«˜å±¤ (Executive)ï¼š</strong>çœ‹è¶¨å‹¢ã€é¢¨éšªç­‰ç´šã€é ç®—éœ€æ±‚ã€‚<br>
                    2. <strong>æŠ€è¡“ (Technical)ï¼š</strong>çœ‹é‡ç¾æ­¥é©Ÿã€Payloadã€Logã€ç¨‹å¼ç¢¼è¡Œæ•¸ã€‚
                `,
                analogy: "è‘£äº‹æœƒæ˜¯æ ¡é•·ï¼Œæƒ³çŸ¥é“æ ¡èˆå®‰ä¸å®‰å…¨ï¼›æŠ€è¡“äººå“¡æ˜¯ç¶­ä¿®å·¥ï¼Œæƒ³çŸ¥é“ç‰†å£è£‚ç¸«å¹¾å…¬åˆ†ã€‚",
                mnemonic: "ã€Œè‘£äº‹æœƒçœ‹é¢¨éšªèˆ‡éŒ¢ï¼Œä¸çœ‹å·¥æ™‚èˆ‡ç´°ç¯€ã€‚ã€",
                trap: "ç›²é»ï¼šä»¥ç‚ºã€Œå®Œæ•´ã€å°±æ˜¯è¦å·¨ç´°é¡éºã€‚<br>é¿å‘ï¼šå°é«˜å±¤ä¾†èªªï¼Œéå¤šçš„æŠ€è¡“ç´°ç¯€æ˜¯é›œè¨Š (Noise)ï¼Œä¸æ˜¯è³‡è¨Šã€‚",
                selfChecks: [
                    { q: "1. å¦‚æœå ±å‘Šå°è±¡æ”¹æˆã€Œé–‹ç™¼åœ˜éšŠã€ï¼Œä»€éº¼æœ€é‡è¦ï¼Ÿ", a: "æ¼æ´çš„é‡ç¾æ­¥é©Ÿ (PoC) èˆ‡ä¿®å¾©ç¨‹å¼ç¢¼ç¯„ä¾‹ã€‚" },
                    { q: "2. Executive Summary é€šå¸¸æ”¾åœ¨å ±å‘Šå“ªè£¡ï¼Ÿ", a: "æœ€å‰é¢ã€‚è®“å¤§è€é—†ä¸€é çœ‹å®Œé‡é»ã€‚" }
                ]
            }
        },
        {
            id: 40,
            tag: "æŠ€è¡“",
            tagClass: "tag-sec",
            text: "ã€æƒ…å¢ƒï¼šæ¼æ´åˆ†é¡ã€‘é€²è¡Œç³»çµ±åŸå§‹ç¢¼æƒææ™‚ï¼Œä¸‹åˆ—å“ªäº›æƒ…å¢ƒå¯è¢«æ­¸é¡ç‚ºã€ŒBroken Authentication (èº«åˆ†é©—è­‰å¤±æ•ˆ)ã€æˆ–ã€ŒAccess Control (å­˜å–æ§åˆ¶å¤±æ•ˆ)ã€ï¼Ÿ(è¤‡é¸)",
            type: "multi",
            options: ["å¯†ç¢¼è¼¸å…¥ä¸ç¶“é›œæ¹Šç›´æ¥å„²å­˜æ–¼è³‡æ–™åº«", "å¯ä»¥ä¿®æ”¹è‡ªå·±å¸³è™Ÿ ID åƒæ•¸è®€å–åˆ°å…¶ä»–äººè³‡æ–™", "ä½¿ç”¨ Base64 åŠ  SHA256 åŠ é¹½é›œæ¹Šå„²å­˜å¯†ç¢¼", "ä»¥ GET æ–¹æ³•å°‡å¸³è™Ÿèˆ‡å¯†ç¢¼ç½®æ–¼ URL åƒæ•¸"],
            correct: ["A", "B", "D"],
            explanation: {
                step1: "é—œéµå­—ï¼šBroken Authentication (èº«åˆ†é©—è­‰)ã€Access Control (å­˜å–æ§åˆ¶)ã€å¯†ç¢¼å„²å­˜ã€åƒæ•¸ç«„æ”¹ã€‚",
                step2: "ç™½è©±ç¿»è­¯ï¼šå“ªäº›é¸é …ä»£è¡¨ã€Œé–çˆ›æ‰äº† / é‘°åŒ™äº‚ä¸Ÿã€(é©—è­‰å•é¡Œ) æˆ–è€… ã€Œé–€ç¦è­¦è¡›åœ¨ç¡è¦ºã€(è¶Šæ¬Šå•é¡Œ)ï¼Ÿ",
                step3: {
                    title: "è§£é¡Œæ€è·¯èˆ‡åŸç†",
                    content: `
                        <ul>
                            <li><strong>åŸç†ï¼š</strong>OWASP Top 10 åˆ†é¡åˆ¤æ–·ã€‚</li>
                            <li><strong>æ­¥é©Ÿ 1ï¼š</strong>(A) æ˜æ–‡å¯†ç¢¼ = é‘°åŒ™æ²’ä¿è­· = Broken Authã€‚</li>
                            <li><strong>æ­¥é©Ÿ 2ï¼š</strong>(B) ä¿®æ”¹ ID çœ‹åˆ¥äººè³‡æ–™ = è¶Šæ¬Š (IDOR) = Access Controlã€‚</li>
                            <li><strong>æ­¥é©Ÿ 3ï¼š</strong>(C) æœ‰ Hash æœ‰ Salt = å®‰å…¨åšæ³• = ä¸æ˜¯æ¼æ´ã€‚</li>
                            <li><strong>æ­¥é©Ÿ 4ï¼š</strong>(D) URL æ”¾å¯†ç¢¼ = é‘°åŒ™å¤–éœ² = Broken Authã€‚</li>
                            <li><strong>ç”Ÿæ´»ä¾‹å­ï¼š</strong>æ˜æ–‡å¯†ç¢¼ = æŠŠé‘°åŒ™ç›´æ¥æ›åœ¨é–€æŠŠä¸Šã€‚è¶Šæ¬Šå­˜å– = æ‹¿è‘—æ™®é€šå“¡å·¥è­‰å»èƒ½åˆ·é–‹ç¸½ç¶“ç†è¾¦å…¬å®¤ã€‚</li>
                        </ul>
                    `
                },
                step4: [
                    { opt: "(A) æ˜æ–‡å„²å­˜", desc: "é¸ã€‚é©—è­‰ä¿è­·å¤±æ•ˆã€‚", status: "correct" },
                    { opt: "(B) è¶Šæ¬Šè®€å–", desc: "é¸ã€‚å­˜å–æ§åˆ¶å¤±æ•ˆ (IDOR)ã€‚", status: "correct" },
                    { opt: "(C) åŠ é¹½é›œæ¹Š", desc: "ä¸é¸ã€‚é€™æ˜¯æ­£ç¢ºçš„å®‰å…¨å¯¦ä½œã€‚", status: "wrong" },
                    { opt: "(D) GET å‚³å¯†ç¢¼", desc: "é¸ã€‚æ•æ„Ÿè³‡è¨Šæ´©æ¼ (Broken Auth)ã€‚", status: "correct" }
                ],
                extension: `
                    <strong>åè©è§£é‡‹ï¼š</strong><br>
                    1. <strong>IDOR (Insecure Direct Object References)ï¼š</strong>ä¸å®‰å…¨çš„ç‰©ä»¶ç›´æ¥åƒç…§ã€‚æ”»æ“Šè€…é€éä¿®æ”¹åƒæ•¸ (å¦‚ user_id=100 æ”¹æˆ 101) å­˜å–ä»–äººè³‡æ–™ã€‚<br>
                    2. <strong>Salt (é¹½)ï¼š</strong>åœ¨å¯†ç¢¼å¾ŒåŠ éš¨æ©Ÿå­—ä¸²å† Hashï¼Œé˜²æ­¢å½©è™¹è¡¨æ”»æ“Šã€‚
                `,
                analogy: "Base64 æ˜¯ç¿»è­¯ (åƒä¸­æ–‡ç¿»è‹±æ–‡ï¼Œæ‡‚è‹±æ–‡çš„éƒ½çœ‹å¾—æ‡‚)ï¼›AES/SHA æ˜¯åŠ å¯† (åƒä¸Šé–çš„ä¿éšªç®±)ã€‚",
                mnemonic: "ã€Œå¸³å¯†å¤–æ´©ç®—é©—è­‰å£ï¼Œåƒæ•¸è¶Šæ¬Šç®—æ§ç®¡å£ã€‚ã€",
                trap: "é™·é˜±ï¼šçœ‹åˆ° Base64 å°±ä»¥ç‚ºä¸å®‰å…¨ï¼Ÿ<br>é¿å‘ï¼šè¦çœ‹å¾Œé¢æœ‰æ²’æœ‰æ¥ SHA256ã€‚å¦‚æœæœ‰ Hash + Saltï¼ŒBase64 åªæ˜¯ç”¨ä¾†ç·¨ç¢¼é¡¯ç¤ºäº‚ç¢¼çš„ï¼Œé€™æ˜¯å®‰å…¨çš„ã€‚",
                selfChecks: [
                    { q: "1. ç‚ºä»€éº¼ GET å‚³å¯†ç¢¼ä¸å®‰å…¨ï¼Ÿä¸æ˜¯æœ‰ HTTPS å—ï¼Ÿ", a: "å› ç‚º URL æœƒè¢«ç€è¦½å™¨æ­·å²ç´€éŒ„ã€Proxy log è¨˜ä¸‹ä¾†ï¼ŒHTTPS åªèƒ½ä¿è­·å‚³è¼¸ä¸­ä¸è¢«ç«Šè½ï¼Œä¸èƒ½é˜²æ­¢ URL è¢«ç´€éŒ„ã€‚" },
                    { q: "2. è¶Šæ¬Šé€šå¸¸ç™¼ç”Ÿåœ¨å‰ç«¯é‚„æ˜¯å¾Œç«¯ï¼Ÿ", a: "å¾Œç«¯ã€‚å› ç‚ºå¾Œç«¯æ²’æœ‰æª¢æŸ¥ã€Œç™¼å‡ºè«‹æ±‚çš„äººã€æ˜¯å¦æœ‰æ¬Šé™å­˜å–ã€Œé€™å€‹ ID çš„è³‡æ–™ã€ã€‚" }
                ]
            }
        }
    ];

    // --- State & Logic ---
    let currentTab = 0;
    // userStatus: { answered: bool, selected: [], isCorrect: bool }
    let userStatus = quizData.map(() => ({ answered: false, selected: [], isCorrect: false }));
    
    // Shuffle map
    let shuffleMap = quizData.map(q => {
        let arr = [0,1,2,3];
        for(let i=arr.length-1; i>0; i--){
            const j = Math.floor(Math.random()*(i+1));
            [arr[i], arr[j]] = [arr[j], arr[i]];
        }
        return arr;
    });

    const tabsArea = document.getElementById('tabs-area');
    const questionArea = document.getElementById('question-area');
    const progressText = document.getElementById('progress-text');
    const progressBar = document.getElementById('progress-bar');

    function init() {
        renderTabs();
        loadQuestion(0);
        updateProgress();
    }

    function renderTabs() {
        tabsArea.innerHTML = '';
        quizData.forEach((q, idx) => {
            const btn = document.createElement('button');
            let statusClass = '';
            let icon = '';
            if (userStatus[idx].answered) {
                statusClass = userStatus[idx].isCorrect ? 'correct' : 'wrong';
                icon = userStatus[idx].isCorrect ? 'âœ“' : 'âœ—';
            }
            btn.className = `tab-btn ${idx === currentTab ? 'active' : ''} ${statusClass}`;
            btn.innerHTML = `ç¬¬ ${q.id} é¡Œ ${icon}`;
            btn.onclick = () => { currentTab = idx; loadQuestion(idx); renderTabs(); scrollToTop(); };
            tabsArea.appendChild(btn);
        });
    }

    function processText(text) {
        const keywords = ["ä¸", "éŒ¯èª¤", "ä¸æ­£ç¢º", "ä¸æ˜¯", "æœ€ä¸é©ç”¨"];
        let res = text;
        keywords.forEach(kw => {
            res = res.replace(new RegExp(kw, "g"), `<span class="negative-keyword">${kw}</span>`);
        });
        return res;
    }

    function loadQuestion(idx) {
        const q = quizData[idx];
        const map = shuffleMap[idx];
        const status = userStatus[idx];

        // Prepare Options HTML
        let optsHTML = '';
        const labels = ['A','B','C','D'];
        
        labels.forEach((lbl, displayIdx) => {
            const originalIdx = map[displayIdx]; // Content index
            const content = q.options[originalIdx];
            
            // Check if this option is conceptually correct
            // q.correct stores "A","B"... mapping to original index 0,1...
            const correctIndices = q.correct.map(c => c.charCodeAt(0)-65);
            const isActuallyCorrect = correctIndices.includes(originalIdx);

            let itemClass = '';
            let checked = '';
            let disabled = '';

            if (status.answered) {
                disabled = 'disabled';
                // status.selected stores Display Labels (A,B...)
                const wasSelected = status.selected.includes(lbl);
                if (wasSelected) {
                    checked = 'checked';
                    itemClass = isActuallyCorrect ? 'correct-ans' : 'wrong-ans';
                } else if (isActuallyCorrect) {
                    // Missed correct answer visual cue (optional, good for learning)
                    itemClass = 'correct-ans'; 
                }
            }

            const inputType = q.type === 'single' ? 'radio' : 'checkbox';
            
            optsHTML += `
                <label class="option-item ${itemClass} ${disabled}" onclick="selectOption(${idx})">
                    <input type="${inputType}" name="opt_q${idx}" value="${lbl}" ${checked} ${disabled ? 'disabled' : ''}>
                    <span><strong>(${lbl})</strong> ${content}</span>
                </label>
            `;
        });

        // Prepare Explanation HTML
        const exp = q.explanation;
        let selfCheckHTML = '';
        exp.selfChecks.forEach((sc, i) => {
            selfCheckHTML += `
                <div class="check-item">
                    <span class="check-q">${sc.q}</span>
                    <button class="btn-toggle-ans" onclick="toggleAns(this)">é¡¯ç¤ºè§£ç­”</button>
                    <div class="check-ans">${sc.a}</div>
                </div>
            `;
        });

        const explanationHTML = `
            <div class="explanation-container" style="display: ${status.answered ? 'block' : 'none'}">
                <div class="step-card">
                    <div class="step-header"><span class="step-icon">ğŸ”</span> ç¬¬ä¸€æ­¥ï¼šæ‰¾é—œéµå­—</div>
                    <div class="step-content">${exp.step1}</div>
                </div>

                <div class="step-card">
                    <div class="step-header"><span class="step-icon">ğŸ—£ï¸</span> ç¬¬äºŒæ­¥ï¼šç™½è©±ç¿»è­¯</div>
                    <div class="step-content">${exp.step2}</div>
                </div>

                <div class="step-card section-logic">
                    <div class="step-header"><span class="step-icon">ğŸ’¡</span> ç¬¬ä¸‰æ­¥ï¼š${exp.step3.title}</div>
                    <div class="step-content">${exp.step3.content}</div>
                </div>

                <div class="step-card">
                    <div class="step-header"><span class="step-icon">ğŸ“Š</span> ç¬¬å››æ­¥ï¼šé¸é …åˆ†æ</div>
                    <div class="step-content">
                        ${exp.step4.map(o => `
                            <div style="margin-bottom: 8px; color: ${o.status==='correct'?'var(--success)':'var(--error)'}">
                                <strong>${o.opt}</strong>ï¼š${o.desc}
                            </div>
                        `).join('')}
                    </div>
                </div>

                <div class="step-card">
                    <div class="step-header"><span class="step-icon">ğŸ“š</span> è§€å¿µè£œå……èˆ‡å»¶ä¼¸</div>
                    <div class="step-content">${exp.extension}</div>
                </div>

                <div class="step-card">
                    <div class="step-header"><span class="step-icon">ğŸ”—</span> è§¸é¡æ—é€š (èˆ‰ä¸€åä¸‰)</div>
                    <div class="step-content">${exp.analogy}</div>
                </div>

                <div class="step-card section-memo">
                    <div class="step-header"><span class="step-icon">ğŸ“</span> è¨˜æ†¶å£è¨£</div>
                    <div class="step-content" style="font-size: 1.1rem; font-weight: bold; color: var(--warning);">${exp.mnemonic}</div>
                </div>

                <div class="step-card section-trap">
                    <div class="step-header"><span class="step-icon">ğŸš§</span> å¸¸è¦‹é™·é˜±èˆ‡é¿å‘æŒ‡å—</div>
                    <div class="step-content">${exp.trap}</div>
                </div>

                <div class="self-check-box">
                    <h3 style="margin-bottom:15px; color: var(--primary);">ğŸ¤” è‡ªæˆ‘æª¢æ¸¬ (é»æ“ŠæŒ‰éˆ•æ­æ›‰)</h3>
                    ${selfCheckHTML}
                </div>
            </div>
        `;

        // Buttons
        let btnHTML = `<button class="btn btn-submit" onclick="submitAns(${idx})">é€å‡ºç­”æ¡ˆ</button>`;
        if (status.answered) {
            btnHTML = `<button class="btn btn-reset" onclick="resetAns(${idx})">é‡æ–°ä½œç­” / è¤‡ç¿’</button>`;
        }

        const html = `
            <div class="card">
                <div class="q-header">
                    <span class="q-tag ${q.tagClass}">${q.tag}</span>
                    <span style="font-weight:bold; color:#888;">é¡Œè™Ÿï¼š${q.id}</span>
                </div>
                <div class="q-text">${processText(q.text)}</div>
                <div class="options-grid">${optsHTML}</div>
                <div class="action-area">${btnHTML}</div>
            </div>
            ${explanationHTML}
        `;

        questionArea.innerHTML = html;
        
        // Auto scroll to explanation if answered
        if (status.answered) {
            setTimeout(() => {
                const el = document.querySelector('.explanation-container');
                if(el) el.scrollIntoView({behavior: 'smooth', block: 'start'});
            }, 100);
        }
    }

    // --- Interaction ---
    function selectOption(idx) {
        // Native radio/checkbox handles UI state, we handle logic on submit
    }

    function submitAns(idx) {
        const inputs = document.querySelectorAll(`input[name="opt_q${idx}"]:checked`);
        if (inputs.length === 0) { alert("è«‹å…ˆé¸æ“‡ç­”æ¡ˆï¼"); return; }
        
        const selectedLabels = Array.from(inputs).map(i => i.value);
        const q = quizData[idx];
        const map = shuffleMap[idx]; // [2,0,3,1] means Display A is Original 2

        // Logic: Convert Selected Display Label -> Original Index
        const selectedIndices = selectedLabels.map(l => {
            const displayIndex = l.charCodeAt(0) - 65; // A=0, B=1
            return map[displayIndex]; // Original content index
        });

        // Correct indices
        const correctIndices = q.correct.map(c => c.charCodeAt(0)-65);

        // Compare
        const setSel = new Set(selectedIndices);
        const setCor = new Set(correctIndices);
        const isCorrect = (setSel.size === setCor.size) && [...setSel].every(x => setCor.has(x));

        userStatus[idx] = { answered: true, selected: selectedLabels, isCorrect: isCorrect };
        
        loadQuestion(idx);
        renderTabs();
        updateProgress();
    }

    function resetAns(idx) {
        // Shuffle again for drill practice
        let arr = [0,1,2,3];
        for(let i=arr.length-1; i>0; i--){
            const j = Math.floor(Math.random()*(i+1));
            [arr[i], arr[j]] = [arr[j], arr[i]];
        }
        shuffleMap[idx] = arr;

        userStatus[idx] = { answered: false, selected: [], isCorrect: false };
        loadQuestion(idx);
        renderTabs();
        updateProgress();
        scrollToTop();
    }

    function toggleAns(btn) {
        const div = btn.nextElementSibling;
        if (div.style.display === 'block') {
            div.style.display = 'none';
            btn.innerText = 'é¡¯ç¤ºè§£ç­”';
        } else {
            div.style.display = 'block';
            btn.innerText = 'éš±è—è§£ç­”';
        }
    }

    function updateProgress() {
        const done = userStatus.filter(u => u.answered).length;
        const total = quizData.length;
        document.getElementById('progress-text').innerText = `${done}/${total}`;
        document.getElementById('progress-bar').style.width = `${(done/total)*100}%`;
    }

    function scrollToTop() {
        window.scrollTo({top:0, behavior:'smooth'});
    }

    // Go
    init();

</script>

</body>
</html>