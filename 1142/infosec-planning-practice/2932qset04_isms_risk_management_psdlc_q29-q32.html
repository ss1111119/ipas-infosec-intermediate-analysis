<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é¡Œçµ„ 4ï¼šé¢¨éšªç®¡ç†æµç¨‹èˆ‡ ISMS æ¶æ§‹</title>
    <!-- Font Loading -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            /* Core Colors */
            --body-bg: #f4f7f6;
            --card-bg: #ffffff;
            --text-primary: #2c3e50;
            --text-secondary: #546e7a;
            --primary: #2980b9;
            --primary-light: #e3f2fd;
            --highlight: #f1c40f;
            --success-bg: #e8f5e9;
            --success-text: #2e7d32;
            --error-bg: #fce4ec;
            --error-text: #c62828;
            --border-color: #e0e0e0;

            /* Tag Colors */
            --tag-law: #607d8b;
            --tag-iso: #27ae60;
            --tag-zt: #8e44ad;
            --tag-net: #2980b9;
            --tag-sec: #c0392b;
            --tag-mgm: #d35400;
        }

        * {
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: 'Noto Sans TC', system-ui, -apple-system, sans-serif;
            background-color: var(--body-bg);
            color: var(--text-primary);
            margin: 0;
            line-height: 1.6;
        }

        /* Layout */
        .page-container {
            max-width: 960px;
            width: 100%;
            margin: 40px auto;
            padding: 40px;
            background-color: var(--card-bg);
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            border-radius: 16px;
        }

        @media (max-width: 768px) {
            .page-container {
                margin: 16px;
                width: calc(100% - 32px);
                padding: 20px;
                border-radius: 12px;
            }
            
            h1 { font-size: 20px; }
            h2 { font-size: 18px; }
            h3 { font-size: 16px; }
        }

        /* Group Header */
        .group-header {
            margin-bottom: 30px;
            border-bottom: 2px solid var(--body-bg);
            padding-bottom: 20px;
        }

        .group-header h1 {
            margin: 0 0 16px 0;
            color: var(--primary);
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 14px;
            font-weight: 500;
        }

        .progress-bar {
            height: 10px;
            background-color: #eceff1;
            border-radius: 5px;
            overflow: hidden;
            margin-bottom: 12px;
        }

        .progress-fill {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, var(--primary), #3498db);
            transition: width 400ms ease;
        }

        .completion-status span {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: bold;
        }

        .status-pending { background-color: #eceff1; color: var(--text-secondary); }
        .status-done { background-color: var(--success-bg); color: var(--success-text); }

        /* Context Area */
        .context-area {
            background-color: #fafafa;
            padding: 20px;
            border-radius: 12px;
            border-left: 5px solid var(--primary);
            margin-bottom: 30px;
        }
        
        .context-title {
            font-weight: bold;
            margin-bottom: 10px;
            color: var(--text-secondary);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .context-image {
            max-width: 100%;
            height: auto;
            border-radius: 8px;
            margin-top: 15px;
            border: 1px solid #ddd;
        }

        /* Tabs */
        .tabs-container {
            display: flex;
            gap: 8px;
            margin-bottom: 25px;
            overflow-x: auto;
            padding-bottom: 8px; /* For scrollbar space */
            scrollbar-width: thin;
        }

        .tab-btn {
            background: none;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 10px 20px;
            font-family: inherit;
            font-size: 15px;
            font-weight: 500;
            cursor: pointer;
            white-space: nowrap;
            color: var(--text-secondary);
            transition: all 200ms ease;
            min-height: 48px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .tab-btn:hover {
            background-color: var(--primary-light);
            transform: translateY(-2px);
        }

        .tab-btn.active {
            background-color: var(--primary);
            color: white;
            border-color: var(--primary);
            box-shadow: 0 4px 8px rgba(41,128,185,0.3);
        }

        .tab-status {
            font-size: 12px;
            background: rgba(255,255,255,0.2);
            padding: 2px 6px;
            border-radius: 10px;
            display: none; /* Hidden by default */
        }
        
        .tab-btn.active .tab-status {
            background: rgba(255,255,255,0.3);
        }

        /* Question Content */
        .question-content {
            display: none;
            animation: fadeIn 300ms ease;
        }

        .question-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(5px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .q-badge {
            font-size: 14px;
            font-weight: bold;
            padding: 4px 12px;
            border-radius: 6px;
            background-color: #eceff1;
            color: var(--text-secondary);
        }
        
        .q-badge.correct { background-color: var(--success-bg); color: var(--success-text); }
        .q-badge.wrong { background-color: var(--error-bg); color: var(--error-text); }

        .question-text {
            font-size: 18px;
            font-weight: 500;
            margin-bottom: 24px;
        }

        .highlight {
            background-color: var(--highlight);
            padding: 0 4px;
            border-radius: 4px;
        }

        /* Options */
        .options-group {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-bottom: 30px;
        }

        .option-label {
            display: flex;
            align-items: flex-start;
            padding: 16px;
            border: 2px solid var(--border-color);
            border-radius: 10px;
            cursor: pointer;
            transition: all 150ms ease;
            position: relative;
        }

        .option-label:hover {
            background-color: var(--primary-light);
            border-color: #90caf9;
        }

        .option-label.selected {
            background-color: #bbdefb;
            border-color: var(--primary);
        }

        .option-label.disabled {
            opacity: 0.7;
            pointer-events: none;
        }

        .option-input {
            margin-top: 4px;
            margin-right: 12px;
            accent-color: var(--primary);
            transform: scale(1.2);
        }

        .option-text {
            flex: 1;
            word-break: break-word;
        }

        /* Action Area */
        .action-area {
            margin-bottom: 25px;
        }

        .btn-primary {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 12px 32px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            min-height: 44px;
            transition: all 200ms ease;
            width: 100%;
        }

        .btn-primary:hover {
            background-color: #1a5276;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(41,128,185,0.3);
        }

        .btn-reset {
            background-color: var(--text-secondary);
        }
        
        .btn-reset:hover {
            background-color: #37474f;
        }

        /* Feedback */
        .feedback {
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 25px;
            display: none;
            animation: fadeInUp 300ms ease;
        }

        .feedback.success {
            background-color: var(--success-bg);
            border: 1px solid #c8e6c9;
            color: var(--success-text);
        }

        .feedback.error {
            background-color: var(--error-bg);
            border: 1px solid #ffcdd2;
            color: var(--error-text);
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Explanation Details */
        details {
            margin-bottom: 15px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            overflow: hidden;
        }

        summary {
            padding: 16px;
            background-color: #f8f9fa;
            cursor: pointer;
            font-weight: 600;
            list-style: none; /* Remove default triangle */
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        summary::after {
            content: '+';
            font-size: 20px;
            font-weight: bold;
        }

        details[open] summary::after {
            content: '-';
        }

        .details-content {
            padding: 20px;
            background-color: white;
            border-top: 1px solid var(--border-color);
        }

        .explain-section {
            padding: 15px 20px;
            background-color: #f8f9fa;
            border-left: 4px solid var(--primary);
            margin-bottom: 15px;
            border-radius: 0 8px 8px 0;
        }

        .explain-section h4 {
            margin: 0 0 8px 0;
            color: var(--text-primary);
            font-size: 16px;
        }

        .explain-section p, .explain-section ul {
            margin: 0;
            font-size: 15px;
            color: var(--text-secondary);
        }
        
        .explain-section ul {
            padding-left: 20px;
            margin-top: 8px;
        }

        /* Tags */
        .tag {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
            margin-right: 6px;
            vertical-align: middle;
        }
        .tag-law { background-color: var(--tag-law); color: white; }
        .tag-iso { background-color: var(--tag-iso); color: white; }
        .tag-mgm { background-color: var(--tag-mgm); color: white; }
        .tag-sec { background-color: var(--tag-sec); color: white; }

    </style>
</head>
<body>

<div class="page-container">
    <!-- 1. Header -->
    <header class="group-header">
        <h1>ã€é¡Œçµ„ 4ã€‘é¢¨éšªç®¡ç†æµç¨‹èˆ‡ ISMS æ¶æ§‹</h1>
        <div class="progress-info">
            <span id="progress-text">å·²å®Œæˆï¼š0 / 4</span>
            <span id="completion-text" class="completion-status">
                <span class="status-pending">ğŸ“ å°šæœªå®Œæˆ</span>
            </span>
        </div>
        <div class="progress-bar">
            <div id="progress-fill" class="progress-fill"></div>
        </div>
    </header>

    <!-- 2. Context (Shared) -->
    <section class="context-area">
        <div class="context-title">
            <span>ğŸ“– é¡Œçµ„æƒ…å¢ƒ</span>
        </div>
        <p>XYZ å…¬å¸å°‡å°å…¥è³‡è¨Šå®‰å…¨ç®¡ç†ç³»çµ±ï¼ˆISMSï¼‰ï¼Œä¾å¾ª <span class="tag tag-iso">ISO 27005</span> åŠ <span class="tag tag-iso">ISO 31000</span> é€²è¡Œé¢¨éšªç®¡ç†ï¼Œä¸¦å°‡ã€Œç›£è¦–èˆ‡å¯©æŸ¥ã€èˆ‡ã€Œæºé€šåŠè«®è©¢ã€è²«ç©¿æ–¼æ•´å€‹æµç¨‹ä¸­ã€‚è«‹ä¾æ“šä¸‹åœ–å›ç­”å•é¡Œã€‚</p>
        <img src="https://i.meee.com.tw/qHb9gzY.png" alt="é¢¨éšªç®¡ç†æµç¨‹åœ–" class="context-image" loading="lazy">
        
        <details style="margin-top: 15px; border: none; background: transparent;">
            <summary style="background: transparent; padding: 10px 0; color: var(--primary);">ğŸ“š é»æ­¤æŸ¥çœ‹ã€é¡Œçµ„ 4ï½œè‹±æ–‡åè©ä¸­è‹±æ–‡å°ç…§ï¼ˆé™„éŒ„ï¼‰ã€‘</summary>
            <div class="details-content" style="border: none; padding: 0;">
                <div class="explain-section" style="border-left-color: var(--tag-iso);">
                    <h4>ä¸€ã€è³‡è¨Šå®‰å…¨ç®¡ç†èˆ‡æ¨™æº–</h4>
                    <p><strong>ISMS (Information Security Management System)</strong>ï¼šè³‡è¨Šå®‰å…¨ç®¡ç†ç³»çµ±ï¼ˆä¼æ¥­ç”¨åˆ¶åº¦åŒ–æ–¹å¼ç®¡ç†è³‡è¨Šå®‰å…¨çš„æ•´é«”æ¶æ§‹ï¼‰ã€‚</p>
                    <p><strong>ISO 27001</strong>ï¼šè³‡è¨Šå®‰å…¨ç®¡ç†ç³»çµ±åœ‹éš›æ¨™æº–ã€‚</p>
                    <p><strong>ISO 27005</strong>ï¼šè³‡è¨Šå®‰å…¨é¢¨éšªç®¡ç†æŒ‡å¼•ã€‚</p>
                    <p><strong>ISO 31000</strong>ï¼šé¢¨éšªç®¡ç†é€šç”¨æ¶æ§‹ã€‚</p>
                </div>
                <div class="explain-section" style="border-left-color: var(--tag-mgm);">
                    <h4>äºŒã€é¢¨éšªç®¡ç†æµç¨‹åè©</h4>
                    <p><strong>Context Establishment (å»ºç«‹å…¨æ™¯ï¼èƒŒæ™¯)</strong>ï¼šåœ¨æ‰¾é¢¨éšªå‰ï¼Œå…ˆææ¸…æ¥šçµ„ç¹”ç›®æ¨™ã€ç’°å¢ƒèˆ‡ç¯„åœã€‚</p>
                    <p><strong>Risk Identification (é¢¨éšªè­˜åˆ¥)</strong>ï¼šæ‰¾å‡ºå¯èƒ½ç™¼ç”Ÿçš„é¢¨éšªã€‚</p>
                    <p><strong>Risk Analysis (é¢¨éšªåˆ†æ)</strong>ï¼šåˆ†æé¢¨éšªç™¼ç”Ÿçš„å¯èƒ½æ€§èˆ‡å½±éŸ¿ç¨‹åº¦ã€‚</p>
                    <p><strong>Risk Evaluation (é¢¨éšªè©•é‘‘)</strong>ï¼šåˆ¤æ–·å“ªäº›é¢¨éšªè¦å„ªå…ˆè™•ç†ã€‚</p>
                    <p><strong>Risk Treatment (é¢¨éšªè™•ç†)</strong>ï¼šæ±ºå®šè¦å¦‚ä½•é¢å°é¢¨éšªã€‚</p>
                    <p><strong>Risk Modification (é¢¨éšªä¿®æ”¹)</strong>ï¼šé€éæ§åˆ¶æªæ–½é™ä½é¢¨éšªã€‚</p>
                    <p><strong>Risk Avoidance (é¢¨éšªé¿å…)</strong>ï¼šåœæ­¢æ´»å‹•ä»¥é¿å…é¢¨éšªã€‚</p>
                    <p><strong>Risk Retention (é¢¨éšªä¿ç•™)</strong>ï¼šè©•ä¼°å¾Œæ¥å—é¢¨éšªã€‚</p>
                    <p><strong>Risk Sharing (é¢¨éšªåˆ†æ“”)</strong>ï¼šå°‡é¢¨éšªè½‰å«çµ¦ç¬¬ä¸‰æ–¹ã€‚</p>
                </div>
                <div class="explain-section" style="border-left-color: var(--tag-sec);">
                    <h4>ä¸‰ã€ç”¢å“èˆ‡é–‹ç™¼å®‰å…¨</h4>
                    <p><strong>Product Security (ç”¢å“å®‰å…¨)</strong>ï¼šç¢ºä¿ç”¢å“æœ¬èº«ä¸æˆç‚ºè³‡å®‰é¢¨éšªä¾†æºã€‚</p>
                    <p><strong>PSDLC (Product Security Development Life Cycle)</strong>ï¼šç”¢å“å®‰å…¨é–‹ç™¼ç”Ÿå‘½é€±æœŸã€‚</p>
                    <p><strong>Secure by Design (è¨­è¨ˆå³å®‰å…¨)</strong>ï¼šåœ¨è¨­è¨ˆéšæ®µå°±è€ƒæ…®å®‰å…¨ã€‚</p>
                    <p><strong>Shift Left (å®‰å…¨å·¦ç§»)</strong>ï¼šæŠŠå®‰å…¨å·¥ä½œæå‰åˆ°é–‹ç™¼åˆæœŸã€‚</p>
                    <p><strong>DevSecOps</strong>ï¼šé–‹ç™¼ã€è³‡å®‰ã€ç¶­é‹æ•´åˆã€‚</p>
                    <p><strong>Threat Modeling (å¨è„…å»ºæ¨¡)</strong>ï¼šåœ¨è¨­è¨ˆéšæ®µåˆ†æå¯èƒ½æ”»æ“Šæ–¹å¼ã€‚</p>
                    <p><strong>Static Code Analysis (éœæ…‹ç¨‹å¼ç¢¼åˆ†æ)</strong>ï¼šä¸åŸ·è¡Œç¨‹å¼ï¼Œç›´æ¥æª¢æŸ¥åŸå§‹ç¢¼å®‰å…¨æ€§ã€‚</p>
                </div>
            </div>
        </details>
    </section>

    <!-- 3. Tabs -->
    <nav class="tabs-container" id="tabs-nav">
        <!-- Injected via JS -->
    </nav>

    <!-- 4. Tab Contents -->
    <main id="quiz-content">
        <!-- Injected via JS -->
    </main>
</div>

<script>
    // Data Source
    const quizData = {
        questions: [
            {
                id: 29,
                type: "single",
                tags: ["ISO 31000", "é¢¨éšªæµç¨‹"],
                question: "è«‹å•ä¸‹åˆ—ä½•è€…ç‚ºæ­£ç¢ºçš„<mark>é¢¨éšªç®¡ç†æµç¨‹é †åº</mark>ï¼Ÿï¼ˆè«‹å°ç…§é™„åœ–æ•¸å­—ç·¨è™Ÿï¼‰",
                options: [
                    { id: "A", text: "(A) 13456" },
                    { id: "B", text: "(B) 54317" },
                    { id: "C", text: "(C) 24367" },
                    { id: "D", text: "(D) 25431" }
                ],
                correctAnswer: ["C"],
                reason: "æ­£ç¢ºé †åºï¼šå»ºç«‹å…¨æ™¯(Context) â†’ é¢¨éšªè©•é‘‘(è­˜åˆ¥â†’åˆ†æâ†’è©•ä¼°) â†’ é¢¨éšªè™•ç† â†’ è¨˜éŒ„èˆ‡å ±å‘Šã€‚",
                explanation: [
                    { title: "ã€ç¬¬ä¸€æ­¥ï¼šæ‰¾é—œéµå­—ã€‘", content: "ISMSã€ISO 27005 / ISO 31000ã€é¢¨éšªç®¡ç†æµç¨‹ã€å»ºç«‹å…¨æ™¯ (Context Establishment)ã€é¢¨éšªè­˜åˆ¥ã€é¢¨éšªåˆ†æèˆ‡è©•ä¼°ã€é¢¨éšªè™•ç†ã€è¨˜éŒ„èˆ‡å ±å‘Šã€‚" },
                    { title: "ã€ç¬¬äºŒæ­¥ï¼šç™½è©±ç¿»è­¯ã€‘", content: "å…¬å¸è¦ä¾ç…§åœ‹éš›æ¨™æº–åšé¢¨éšªç®¡ç†ï¼Œä¸æ˜¯æƒ³åˆ°é¢¨éšªå°±é¦¬ä¸Šè™•ç†ï¼Œè€Œæ˜¯å…ˆææ¸…æ¥šå…¬å¸èƒŒæ™¯èˆ‡ç’°å¢ƒï¼Œå†æ‰¾é¢¨éšªã€åˆ†æåš´é‡æ€§ã€æ±ºå®šæ€éº¼è™•ç†ï¼Œæœ€å¾Œä¸€å®šè¦ç•™ä¸‹ç´€éŒ„ã€‚" },
                    { title: "ã€ç¬¬ä¸‰æ­¥ï¼šè§£é¡Œæ€è·¯ï¼ˆçµåˆåœ–ç‰‡ï¼‰ã€‘", content: "åœ–ç‰‡å‘ˆç¾çš„æ˜¯ã€Œä¼æ¥­å±¤ç´šæ²»ç†è¦–è§’ã€ï¼Œä»£è¡¨é¢¨éšªç®¡ç†æ˜¯åˆ¶åº¦åŒ–ã€ç”±ä¸Šè€Œä¸‹é€²è¡Œï¼Œè€Œä¸æ˜¯å–®ä¸€ç³»çµ±æˆ–æŠ€è¡“äººå“¡çš„è¡Œç‚ºã€‚" },
                    { title: "è§£é¡Œæ­¥é©Ÿ", content: "1ï¸âƒ£ ä¸€å®šå…ˆæœ‰ã€Œå»ºç«‹å…¨æ™¯ã€<br>2ï¸âƒ£ å†ä¾†æ‰æ˜¯ã€Œé¢¨éšªè­˜åˆ¥ã€<br>3ï¸âƒ£ è­˜åˆ¥å¾Œæ‰èƒ½ã€Œåˆ†æèˆ‡è©•ä¼°ã€<br>4ï¸âƒ£ è©•ä¼°å¾Œæ‰èƒ½ã€Œé¢¨éšªè™•ç†ã€<br>5ï¸âƒ£ æœ€å¾Œä¸€å®šè¦ã€Œè¨˜éŒ„èˆ‡å ±å‘Šã€" },
                    { title: "åŸç†èˆ‡è¦å‰‡", content: "ISO 31000 æ˜¯ã€Œæµç¨‹å°å‘ã€ã€‚ç›£è¦–èˆ‡å¯©æŸ¥ä¸æ˜¯å–®ä¸€æ­¥é©Ÿï¼Œè€Œæ˜¯å…¨ç¨‹æ´»å‹•ã€‚" },
                    { title: "ç”Ÿæ´»ä¾‹å­", content: "è¦åŠƒå‡ºåœ‹æ—…è¡Œï¼šå…ˆç¢ºèªé ç®—èˆ‡åœ°é» â†’ æŸ¥é¢¨éšª â†’ è©•ä¼°å½±éŸ¿ â†’ è²·ä¿éšª â†’ è¨˜éŒ„è¡Œç¨‹ã€‚" },
                    { title: "ã€ç¬¬å››æ­¥ï¼šé¸é …åˆ†æã€‘", content: "(A) å°‘äº†å»ºç«‹å…¨æ™¯ â†’ éŒ¯<br>(B) æµç¨‹é¡›å€’ â†’ éŒ¯<br>(C) å®Œæ•´ç¬¦åˆæ¨™æº– â†’ æ­£ç¢º<br>(D) é‚è¼¯éŒ¯èª¤ â†’ éŒ¯" },
                    { title: "ã€è§€å¿µè£œå……èˆ‡å»¶ä¼¸ã€‘", content: "æ²’æœ‰ Contextï¼Œé¢¨éšªç®¡ç†ä¸€å®šå¤±çœŸã€‚" },
                    { title: "æ³•æ¢æˆ–å®šç¾©ï¼ˆç™½è©±ï¼‰", content: "ISO 31000ï¼šé¢¨éšªç®¡ç†å¿…é ˆä¾å›ºå®šæµç¨‹é€²è¡Œï¼Œä¸¦å¯è¿½è¹¤èˆ‡ç¨½æ ¸ã€‚" },
                    { title: "ã€è§¸é¡æ—é€šï¼ˆèˆ‰ä¸€åä¸‰ï¼‰ã€‘", content: "ä»»ä½•é¢¨éšªæµç¨‹é¡Œï¼Œç¬¬ä¸€å€‹æ‰¾ã€ŒèƒŒæ™¯ã€ã€‚" },
                    { title: "ã€è¨˜æ†¶å£è¨£ã€‘", content: "ã€Œå…ˆèƒŒæ™¯ã€å†é¢¨éšªã€è©•ä¼°å¾Œè™•ç†ã€æœ€å¾Œç•™ç´€éŒ„ã€" },
                    { title: "ã€å¸¸è¦‹é™·é˜±ï½œå¿ƒç†ç›²é»ï½œé¿å‘æŒ‡å—ã€‘", content: "æŠŠã€Œç›£è¦–èˆ‡å¯©æŸ¥ã€ç•¶æˆä¸€å€‹æ­¥é©Ÿã€‚ç›´æ¥å¾æŠ€è¡“é¢¨éšªä¸‹æ‰‹ã€‚" }
                ],
                selfCheck: {
                    q: "é¢¨éšªè™•ç†å¯ä»¥åœ¨é¢¨éšªåˆ†æå‰åšå—ï¼Ÿ",
                    a: "ä¸å¯ä»¥ã€‚å¿…é ˆå…ˆåˆ†æä¸¦è©•ä¼°é¢¨éšªç­‰ç´šï¼Œæ‰èƒ½æ±ºå®šæŠ•å…¥å¤šå°‘è³‡æºé€²è¡Œè™•ç†ã€‚"
                }
            },
            {
                id: 30,
                type: "single",
                tags: ["è³‡è¨Šè³‡ç”¢", "æ²»ç†"],
                question: "æ‰¿ä¸Šé¡Œï¼Œä¾ XYZ å…¬å¸è³‡è¨Šå®‰å…¨å§”å“¡æœƒè©•é‡è³‡å®‰ç­–ç•¥èˆ‡ç®¡ç†æ¶æ§‹ï¼Œä¸‹åˆ—ä½•é …è³‡è¨Šå®‰å…¨ç®¡ç†ç¯„ç–‡è¨­å®šæè¿°<mark>æœ€ã€Œä¸ã€é©åˆ‡</mark>ï¼Ÿ",
                options: [
                    { id: "A", text: "ç´å…¥æœ‰å½¢èˆ‡ç„¡å½¢è³‡è¨Šè³‡ç”¢" },
                    { id: "B", text: "ä¾›æ‡‰å•†éœ€éµå¾ªè³‡å®‰æ”¿ç­–" },
                    { id: "C", text: "ç”¢å“ä¸å±¬è³‡è¨Šè³‡ç”¢ï¼Œä¸éœ€åˆ—å…¥é¢¨éšªè©•é‘‘" },
                    { id: "D", text: "éœ€åƒè€ƒåœ‹éš›æ¨™æº–èˆ‡æ³•è¦" }
                ],
                correctAnswer: ["C"],
                reason: "ç”¢å“å®‰å…¨ï¼ˆProduct Securityï¼‰ä¹Ÿæ˜¯è³‡å®‰æ²»ç†çš„ä¸€ç’°ï¼Œç”¢å“æ¼æ´æœƒç›´æ¥å½±éŸ¿å…¬å¸ã€‚",
                explanation: [
                    { title: "ã€ç¬¬ä¸€æ­¥ï¼šæ‰¾é—œéµå­—ã€‘", content: "è³‡è¨Šå®‰å…¨æ²»ç†ã€è³‡è¨Šè³‡ç”¢ã€ç”¢å“å®‰å…¨ã€ISMSã€‚" },
                    { title: "ã€ç¬¬äºŒæ­¥ï¼šç™½è©±ç¿»è­¯ã€‘", content: "å…¬å¸åœ¨åšè³‡å®‰æ²»ç†æ™‚ï¼Œå“ªäº›æ±è¥¿è¦ç´å…¥ç®¡ç†ç¯„åœï¼Œå“ªäº›ä¸èƒ½æ’é™¤ï¼Ÿ" },
                    { title: "ã€ç¬¬ä¸‰æ­¥ï¼šè§£é¡Œæ€è·¯ï¼ˆçµåˆåœ–ç‰‡ï¼‰ã€‘", content: "åœ–ç‰‡ä¸­æ˜ç¢ºé¡¯ç¤ºã€Œç”¢å“å®‰å…¨ã€æ˜¯æ²»ç†æ¶æ§‹çš„ä¸€ç’°ï¼Œä¸æ˜¯ç¨ç«‹åœ¨ ISMS ä¹‹å¤–ã€‚" },
                    { title: "è§£é¡Œæ­¥é©Ÿ", content: "1ï¸âƒ£ åˆ¤æ–·æ˜¯å¦ç¬¦åˆ ISMS è³‡ç”¢å®šç¾©<br>2ï¸âƒ£ æª¢æŸ¥æ˜¯å¦éŒ¯èª¤æ’é™¤é¢¨éšªä¾†æº" },
                    { title: "åŸç†èˆ‡è¦å‰‡", content: "åªè¦æœƒå½±éŸ¿æ©Ÿå¯†æ€§ã€å®Œæ•´æ€§ã€å¯ç”¨æ€§ï¼Œéƒ½æ˜¯è³‡è¨Šè³‡ç”¢ã€‚" },
                    { title: "ç”Ÿæ´»ä¾‹å­", content: "å…¬å¸å®˜ç¶²ç”¢å“æœ‰æ¼æ´ï¼Œå°±ç®—æ˜¯ã€Œç”¢å“ã€ï¼Œä¸€æ¨£æœƒé€ æˆè³‡å®‰äº‹ä»¶ã€‚" },
                    { title: "ã€ç¬¬å››æ­¥ï¼šé¸é …åˆ†æã€‘", content: "(A) æ­£ç¢º<br>(B) æ­£ç¢º<br>(C) æ’é™¤ç”¢å“ â†’ éŒ¯<br>(D) æ­£ç¢º" },
                    { title: "ã€è§€å¿µè£œå……èˆ‡å»¶ä¼¸ã€‘", content: "ç”¢å“å®‰å…¨ â‰  ä¸ç”¨ç´å…¥ ISMSã€‚" },
                    { title: "æ³•æ¢æˆ–å®šç¾©ï¼ˆç™½è©±ï¼‰", content: "ISO 27001ï¼šè³‡è¨Šè³‡ç”¢åŒ…å«ç³»çµ±ã€ç”¢å“ã€è³‡æ–™èˆ‡æµç¨‹ã€‚" },
                    { title: "ã€è§¸é¡æ—é€šã€‘", content: "å‡¡æ˜¯ã€Œèªªä¸ç”¨ç´å…¥è³‡å®‰æ²»ç†ã€çš„é¸é …ï¼Œé€šå¸¸æœ‰å•é¡Œã€‚" },
                    { title: "ã€è¨˜æ†¶å£è¨£ã€‘", content: "ã€Œæœƒå‡ºäº‹çš„ï¼Œéƒ½æ˜¯è³‡å®‰è³‡ç”¢ã€" },
                    { title: "ã€å¸¸è¦‹é™·é˜±ã€‘", content: "èªç‚ºåªæœ‰ IT ç³»çµ±æ‰æ˜¯è³‡ç”¢ã€‚" }
                ],
                selfCheck: {
                    q: "ç”¢å“æ¼æ´é€ æˆè³‡å®‰äº‹ä»¶ï¼Œæ˜¯å¦å±¬ ISMS ç®¡ç†è²¬ä»»ï¼Ÿ",
                    a: "æ˜¯ã€‚ç”¢å“æ˜¯å…¬å¸å°å¤–æä¾›çš„æœå‹™è¼‰é«”ï¼Œå…¶å®‰å…¨æ€§å±¬æ–¼ ISMS ç®¡ç†ç¯„ç–‡ã€‚"
                }
            },
            {
                id: 31,
                type: "single",
                tags: ["é¢¨éšªè™•ç†", "PSDLC"],
                question: "XYZ å…¬å¸å°å…¥ PSDLC èˆ‡å®šæœŸç¨½æ ¸ï¼Œæ­¤å±¬æ–¼å“ªä¸€é¡å‹<mark>é¢¨éšªè™•ç†æªæ–½</mark>ï¼Ÿ",
                options: [
                    { id: "A", text: "é¢¨éšªä¿®æ”¹ (Risk Modification)" },
                    { id: "B", text: "é¢¨éšªé¿å… (Risk Avoidance)" },
                    { id: "C", text: "é¢¨éšªä¿ç•™ (Risk Retention)" },
                    { id: "D", text: "é¢¨éšªåˆ†æ“” (Risk Sharing)" }
                ],
                correctAnswer: ["A"],
                reason: "é€éå°å…¥åˆ¶åº¦ï¼ˆæ§åˆ¶æªæ–½ï¼‰ä¾†é™ä½é¢¨éšªç™¼ç”Ÿçš„æ©Ÿç‡æˆ–è¡æ“Šï¼Œå±¬æ–¼ã€Œä¿®æ”¹ã€é¢¨éšªçš„æ€§è³ªã€‚",
                explanation: [
                    { title: "ã€ç¬¬ä¸€æ­¥ï¼šæ‰¾é—œéµå­—ã€‘", content: "PSDLCã€é¢¨éšªè™•ç†ã€‚" },
                    { title: "ã€ç¬¬äºŒæ­¥ï¼šç™½è©±ç¿»è­¯ã€‘", content: "å…¬å¸ä¸æ˜¯åœæ­¢åšç”¢å“ï¼Œè€Œæ˜¯é€éåˆ¶åº¦é™ä½é¢¨éšªã€‚" },
                    { title: "ã€ç¬¬ä¸‰æ­¥ï¼šè§£é¡Œæ€è·¯ã€‘", content: "åˆ¶åº¦ã€æµç¨‹ã€ç¨½æ ¸ = æ”¹è®Šé¢¨éšªæ¢ä»¶ã€‚" },
                    { title: "è§£é¡Œæ­¥é©Ÿ", content: "1ï¸âƒ£ æ˜¯å¦é™ä½é¢¨éšªï¼Ÿ<br>2ï¸âƒ£ æ˜¯å¦åœæ­¢æ´»å‹•ï¼Ÿ" },
                    { title: "åŸç†èˆ‡è¦å‰‡", content: "ä¿®æ”¹ = åŠ æ§åˆ¶ã€‚é¿å… = ä¸åšã€‚" },
                    { title: "ç”Ÿæ´»ä¾‹å­", content: "è£é˜²ç›œé–€ä¸æ˜¯ä¸ä½ï¼Œè€Œæ˜¯é™ä½é¢¨éšªã€‚" },
                    { title: "ã€ç¬¬å››æ­¥ï¼šé¸é …åˆ†æã€‘", content: "(A) æ­£ç¢º<br>(B)(C)(D) ä¸ç¬¦" },
                    { title: "ã€è§€å¿µè£œå……ã€‘", content: "å¤šæ•¸è³‡å®‰æªæ–½éƒ½æ˜¯ã€Œé¢¨éšªä¿®æ”¹ã€ã€‚" },
                    { title: "æ³•æ¢æˆ–å®šç¾©ï¼ˆç™½è©±ï¼‰", content: "ISO 27005ï¼šé€éæ§åˆ¶é™ä½é¢¨éšªå±¬é¢¨éšªä¿®æ”¹ã€‚" },
                    { title: "ã€è§¸é¡æ—é€šã€‘", content: "é˜²ç«ç‰†ã€ç¨½æ ¸ã€æ•™è‚²è¨“ç·´ â†’ é¢¨éšªä¿®æ”¹ã€‚" },
                    { title: "ã€è¨˜æ†¶å£è¨£ã€‘", content: "ã€ŒåŠ åˆ¶åº¦ï¼Œä¸åœå·¥ã€" },
                    { title: "ã€å¸¸è¦‹é™·é˜±ã€‘", content: "æŠŠä»»ä½•æ§åˆ¶éƒ½ç•¶æˆé¿å…ã€‚" }
                ],
                selfCheck: {
                    q: "è²·ä¿éšªå±¬æ–¼é¢¨éšªä¿®æ”¹å—ï¼Ÿ",
                    a: "ä¸æ˜¯ï¼ˆæ˜¯åˆ†æ“”ï¼‰ã€‚"
                }
            },
            {
                id: 32,
                type: "multiple",
                tags: ["Secure by Design", "è¤‡é¸"],
                question: "XYZ å…¬å¸é–‹ç™¼æ–°ç”¢å“æ™‚ï¼Œä¸‹åˆ—å“ªäº›æ–¹å¼å¯å°å…¥è™•ç†ç”¢å“è³‡å®‰é¢¨éšªï¼Ÿï¼ˆè¤‡é¸ï¼‰",
                options: [
                    { id: "A", text: "æ¸¬è©¦å®Œå†è™•ç†" },
                    { id: "B", text: "é€šçŸ¥å®¢æˆ¶ä¸¦ä¿®è£œ" },
                    { id: "C", text: "è¨­è¨ˆéšæ®µå¨è„…å»ºæ¨¡" },
                    { id: "D", text: "éœæ…‹ç¨‹å¼ç¢¼åˆ†æ" }
                ],
                correctAnswer: ["B", "C", "D"],
                reason: "è³‡å®‰æ‡‰ç›¡æ—©ä»‹å…¥ï¼ˆShift Leftï¼‰ã€‚A é¸é …æ˜¯å‚³çµ±éŒ¯èª¤åšæ³•ï¼Œæœƒå°è‡´ä¿®è£œæˆæœ¬éé«˜ã€‚",
                explanation: [
                    { title: "ã€ç¬¬ä¸€æ­¥ï¼šæ‰¾é—œéµå­—ã€‘", content: "Secure by Designã€å¨è„…å»ºæ¨¡ã€ç¨‹å¼ç¢¼åˆ†æã€‚" },
                    { title: "ã€ç¬¬äºŒæ­¥ï¼šç™½è©±ç¿»è­¯ã€‘", content: "å®‰å…¨ä¸æ˜¯æœ€å¾Œè£œï¼Œè€Œæ˜¯ä¸€è·¯åšåˆ°å®Œã€‚" },
                    { title: "ã€ç¬¬ä¸‰æ­¥ï¼šè§£é¡Œæ€è·¯ã€‘", content: "è¶Šæ—©åšï¼Œé¢¨éšªè¶Šä½ã€‚" },
                    { title: "è§£é¡Œæ­¥é©Ÿ", content: "1ï¸âƒ£ æ’é™¤äº‹å¾Œè£œæ•‘<br>2ï¸âƒ£ ä¿ç•™è¨­è¨ˆéšæ®µæªæ–½" },
                    { title: "åŸç†èˆ‡è¦å‰‡", content: "Shift Leftã€DevSecOpsã€‚" },
                    { title: "ç”Ÿæ´»ä¾‹å­", content: "æˆ¿å­å…ˆæ‰“åœ°åŸºï¼Œä¸æ˜¯å€’äº†æ‰è£œã€‚" },
                    { title: "ã€ç¬¬å››æ­¥ï¼šé¸é …åˆ†æã€‘", content: "(A) éŒ¯<br>(B)(C)(D) å°" },
                    { title: "ã€è§€å¿µè£œå……ã€‘", content: "è³‡å®‰æ˜¯è¨­è¨ˆçš„ä¸€éƒ¨åˆ†ã€‚" },
                    { title: "æ³•æ¢æˆ–å®šç¾©ï¼ˆç™½è©±ï¼‰", content: "ç”¢å“å®‰å…¨è¦æ±‚å…§å»ºå®‰å…¨è¨­è¨ˆã€‚" },
                    { title: "ã€è§¸é¡æ—é€šã€‘", content: "è¨­è¨ˆéšæ®µå‡ºç¾çš„é¸é …ï¼Œé€šå¸¸æ˜¯å°çš„ã€‚" },
                    { title: "ã€è¨˜æ†¶å£è¨£ã€‘", content: "ã€Œå®‰å…¨è¦ææ—©ï¼Œä¸è¦äº‹å¾Œè£œã€" },
                    { title: "ã€å¸¸è¦‹é™·é˜±ã€‘", content: "ä»¥ç‚ºæ¸¬è©¦å®Œå†ä¿®å°±å¥½ã€‚" }
                ],
                selfCheck: {
                    q: "å¨è„…å»ºæ¨¡æ‡‰è©²åœ¨ä»€éº¼éšæ®µåšï¼Ÿ",
                    a: "è¨­è¨ˆéšæ®µã€‚"
                }
            }
        ]
    };

    // State Management
    const quizState = {
        currentTab: 0,
        questions: quizData.questions.map(q => ({
            id: q.id,
            status: 'pending', // pending, correct, wrong
            selected: []
        }))
    };

    // Initialization
    function init() {
        renderTabs();
        renderQuestions();
        updateProgress();
    }

    // Render Tabs
    function renderTabs() {
        const nav = document.getElementById('tabs-nav');
        nav.innerHTML = quizData.questions.map((q, index) => `
            <button class="tab-btn ${index === 0 ? 'active' : ''}" 
                    onclick="switchTab(${index})"
                    data-index="${index}">
                ç¬¬ ${q.id} é¡Œ
                <span class="tab-status" id="tab-status-${index}"></span>
            </button>
        `).join('');
    }

    // Render Questions
    function renderQuestions() {
        const content = document.getElementById('quiz-content');
        content.innerHTML = quizData.questions.map((q, index) => {
            const inputType = q.type === 'single' ? 'radio' : 'checkbox';
            const tagsHtml = q.tags ? q.tags.map(t => {
                let className = 'tag-sec'; // default
                if(t.includes('ISO')) className = 'tag-iso';
                if(t.includes('é¢¨éšª')) className = 'tag-mgm';
                if(t.includes('è³‡ç”¢') || t.includes('æ²»ç†')) className = 'tag-law';
                return `<span class="tag ${className}">${t}</span>`;
            }).join('') : '';

            return `
            <div class="question-content ${index === 0 ? 'active' : ''}" id="q-content-${index}">
                
                <!-- Q Header -->
                <div class="question-header">
                    <div>${tagsHtml}</div>
                    <span class="q-badge" id="q-badge-${index}">å°šæœªä½œç­”</span>
                </div>

                <!-- Q Body -->
                <div class="question-text">${q.question}</div>

                <!-- Options -->
                <div class="options-group" id="options-group-${index}">
                    ${q.options.map(opt => `
                        <label class="option-label" id="label-${index}-${opt.id}">
                            <input type="${inputType}" 
                                   name="q-${index}" 
                                   value="${opt.id}"
                                   class="option-input"
                                   onchange="handleOptionSelect(${index}, '${opt.id}', '${q.type}')">
                            <span class="option-text">${opt.text}</span>
                        </label>
                    `).join('')}
                </div>

                <!-- Action -->
                <div class="action-area">
                    <button class="btn-primary" id="btn-action-${index}" onclick="submitAnswer(${index})">
                        é€å‡ºç­”æ¡ˆ
                    </button>
                </div>

                <!-- Feedback -->
                <div class="feedback" id="feedback-${index}">
                    <strong id="feedback-title-${index}"></strong>
                    <p>${q.reason}</p>
                </div>

                <!-- Explanation -->
                <details id="explain-${index}">
                    <summary>ğŸ’¡ æŸ¥çœ‹è©³ç´°è§£æ</summary>
                    <div class="details-content">
                        ${q.explanation.map(exp => `
                            <div class="explain-section">
                                <h4>${exp.title}</h4>
                                <p>${exp.content}</p>
                            </div>
                        `).join('')}
                    </div>
                </details>

                <!-- Self Check -->
                <details id="selfcheck-${index}">
                    <summary>ğŸ¯ è‡ªæˆ‘æª¢æ¸¬</summary>
                    <div class="details-content">
                        <div class="explain-section" style="border-left-color: var(--highlight);">
                            <p><strong>Q: ${q.selfCheck.q}</strong></p>
                            <details style="border: none; margin: 10px 0 0 0;">
                                <summary style="padding: 8px; background: #eee; border-radius: 4px; font-size: 14px; width: fit-content;">ğŸ‘€ é»æ­¤æŸ¥çœ‹ç­”æ¡ˆ</summary>
                                <p style="margin-top: 10px; color: var(--success-text); font-weight: bold;">A: ${q.selfCheck.a}</p>
                            </details>
                        </div>
                    </div>
                </details>

            </div>
            `;
        }).join('');
    }

    // Logic Functions
    function switchTab(index) {
        // Update State
        quizState.currentTab = index;

        // UI: Tabs
        document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
        document.querySelector(`.tab-btn[data-index="${index}"]`).classList.add('active');

        // UI: Content
        document.querySelectorAll('.question-content').forEach(c => c.classList.remove('active'));
        document.getElementById(`q-content-${index}`).classList.add('active');

        // Scroll to top of question
        const container = document.querySelector('.page-container');
        // Simple heuristic for mobile/desktop scroll
        if(window.innerWidth < 768) {
             document.getElementById('tabs-nav').scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }
    }

    function handleOptionSelect(qIndex, optId, type) {
        const state = quizState.questions[qIndex];
        
        // Prevent changing if already submitted (double safety, inputs should be disabled)
        if (state.status !== 'pending') return;

        // UI Update for selection style
        const labels = document.querySelectorAll(`#options-group-${qIndex} .option-label`);
        
        if (type === 'single') {
            labels.forEach(l => l.classList.remove('selected'));
            document.getElementById(`label-${qIndex}-${optId}`).classList.add('selected');
            state.selected = [optId];
        } else {
            const input = document.querySelector(`input[name="q-${qIndex}"][value="${optId}"]`);
            const label = document.getElementById(`label-${qIndex}-${optId}`);
            
            if (input.checked) {
                label.classList.add('selected');
                if (!state.selected.includes(optId)) state.selected.push(optId);
            } else {
                label.classList.remove('selected');
                state.selected = state.selected.filter(id => id !== optId);
            }
        }
    }

    function submitAnswer(qIndex) {
        const state = quizState.questions[qIndex];
        const qData = quizData.questions[qIndex];
        const btn = document.getElementById(`btn-action-${qIndex}`);

        // If currently in "Reset" mode
        if (btn.classList.contains('btn-reset')) {
            resetQuestion(qIndex);
            return;
        }

        // Validation
        if (state.selected.length === 0) {
            alert("è«‹å…ˆé¸æ“‡ä¸€å€‹ç­”æ¡ˆï¼");
            return;
        }

        // Check Answer
        // Sort both arrays to ensure order doesn't matter for comparison
        const sortedSelected = [...state.selected].sort();
        const sortedCorrect = [...qData.correctAnswer].sort();
        
        const isCorrect = JSON.stringify(sortedSelected) === JSON.stringify(sortedCorrect);
        
        // Update State
        state.status = isCorrect ? 'correct' : 'wrong';
        
        // UI Updates
        // 1. Disable inputs
        const inputs = document.querySelectorAll(`#options-group-${qIndex} input`);
        inputs.forEach(input => input.disabled = true);
        document.querySelectorAll(`#options-group-${qIndex} .option-label`).forEach(l => l.classList.add('disabled'));

        // 2. Feedback
        const feedbackEl = document.getElementById(`feedback-${qIndex}`);
        const feedbackTitle = document.getElementById(`feedback-title-${qIndex}`);
        
        feedbackEl.style.display = 'block';
        feedbackEl.className = `feedback ${isCorrect ? 'success' : 'error'}`;
        
        if (isCorrect) {
            feedbackTitle.innerHTML = 'âœ“ ç­”å°äº†ï¼';
        } else {
            // Format correct answer for display
            const correctText = qData.options
                .filter(opt => qData.correctAnswer.includes(opt.id))
                .map(opt => {
                     // If text starts with (A), just show the ID for brevity, or full text if short
                     return opt.id.length > 2 ? opt.text.split(' ')[0] : opt.id;
                })
                .join('ã€');
            // For multiple choice, show IDs usually better
            const cleanCorrect = qData.correctAnswer.map(id => id.replace('_raw', '')).join('ã€');
            feedbackTitle.innerHTML = `âœ— ç­”éŒ¯äº† (æ­£ç¢ºç­”æ¡ˆï¼š${cleanCorrect})`;
        }

        // 3. Open Explanation (Always open when submitted to show the rich content)
        document.getElementById(`explain-${qIndex}`).open = true;

        // 4. Update Badge
        const badge = document.getElementById(`q-badge-${qIndex}`);
        badge.className = `q-badge ${isCorrect ? 'correct' : 'wrong'}`;
        badge.textContent = isCorrect ? 'ç­”å°' : 'ç­”éŒ¯';

        // 5. Update Tab Status
        const tabStatus = document.getElementById(`tab-status-${qIndex}`);
        tabStatus.style.display = 'inline-block';
        tabStatus.textContent = isCorrect ? 'âœ“' : 'âœ—';

        // 6. Change Button
        btn.textContent = 'é‡æ–°ä½œç­”';
        btn.className = 'btn-primary btn-reset';

        // 7. Update Global Progress
        updateProgress();
    }

    function resetQuestion(qIndex) {
        const state = quizState.questions[qIndex];
        
        // Reset State
        state.status = 'pending';
        state.selected = [];

        // UI Reset
        // 1. Inputs
        const inputs = document.querySelectorAll(`#options-group-${qIndex} input`);
        inputs.forEach(input => {
            input.disabled = false;
            input.checked = false;
        });
        document.querySelectorAll(`#options-group-${qIndex} .option-label`).forEach(l => {
            l.classList.remove('disabled');
            l.classList.remove('selected');
        });

        // 2. Hide Feedback & Details
        document.getElementById(`feedback-${qIndex}`).style.display = 'none';
        document.getElementById(`explain-${qIndex}`).open = false;
        document.getElementById(`selfcheck-${qIndex}`).open = false;
        // Also close the inner details of self check
        const selfCheckInner = document.querySelector(`#selfcheck-${qIndex} details`);
        if(selfCheckInner) selfCheckInner.open = false;

        // 3. Reset Badge
        const badge = document.getElementById(`q-badge-${qIndex}`);
        badge.className = 'q-badge';
        badge.textContent = 'å°šæœªä½œç­”';

        // 4. Reset Tab Status
        const tabStatus = document.getElementById(`tab-status-${qIndex}`);
        tabStatus.textContent = '';
        tabStatus.style.display = 'none';

        // 5. Reset Button
        const btn = document.getElementById(`btn-action-${qIndex}`);
        btn.textContent = 'é€å‡ºç­”æ¡ˆ';
        btn.className = 'btn-primary';

        // 6. Update Progress
        updateProgress();

        // 7. Scroll slightly up
        document.getElementById(`q-content-${qIndex}`).scrollIntoView({ behavior: 'smooth' });
    }

    function updateProgress() {
        const total = quizData.questions.length;
        const completed = quizState.questions.filter(q => q.status !== 'pending').length;
        const percent = (completed / total) * 100;

        document.getElementById('progress-text').textContent = `å·²å®Œæˆï¼š${completed} / ${total}`;
        document.getElementById('progress-fill').style.width = `${percent}%`;

        const statusEl = document.getElementById('completion-text');
        if (completed === total) {
            statusEl.innerHTML = '<span class="status-done">âœ… æœ¬é¡Œçµ„å·²å®Œæˆ</span>';
        } else {
            statusEl.innerHTML = '<span class="status-pending">ğŸ“ å°šæœªå®Œæˆ</span>';
        }
    }

    // Start
    init();

</script>

</body>
</html>