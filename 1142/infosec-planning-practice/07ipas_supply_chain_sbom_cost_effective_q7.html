<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>iPAS è³‡å®‰å¯¦æˆ°ï¼šä¾›æ‡‰éˆå®‰å…¨ (Q7)</title>
    <style>
        :root {
            --primary-color: #1e3a8a; /* Blue 900 */
            --primary-light: #dbeafe; /* Blue 100 */
            --accent-color: #d97706; /* Amber 600 */
            --success-color: #10b981; /* Emerald 500 */
            --success-bg: #ecfdf5;    /* Emerald 50 */
            --error-color: #ef4444;   /* Red 500 */
            --error-bg: #fef2f2;      /* Red 50 */
            --text-color: #334155;    /* Slate 700 */
            --bg-color: #f8fafc;      /* Slate 50 */
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', 'Microsoft JhengHei', sans-serif;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        /* Header */
        .header {
            background-color: var(--primary-color);
            color: white;
            padding: 24px;
            border-radius: 12px;
            margin-bottom: 24px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .instructor-badge {
            background-color: rgba(255,255,255,0.2);
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            display: inline-block;
            margin-top: 8px;
        }

        /* Card Styles */
        .card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            margin-bottom: 20px;
            overflow: hidden;
            border: 1px solid #e2e8f0;
        }

        .card-header {
            padding: 16px 24px;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .card-header.scenario { background-color: #fffbeb; color: #92400e; border-bottom: 1px solid #fcd34d; }
        .card-header.analysis { background-color: var(--primary-light); color: var(--primary-color); }
        .card-header.pitfall { background-color: var(--error-bg); color: #991b1b; }

        .card-body {
            padding: 24px;
        }

        /* Question Styles */
        .question-text {
            font-size: 1.1rem;
            margin-bottom: 24px;
        }

        .highlight {
            color: var(--primary-color);
            font-weight: bold;
        }

        .options-grid {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .option-btn {
            width: 100%;
            text-align: left;
            padding: 16px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            background: white;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: flex-start;
            gap: 12px;
            font-size: 1rem;
            position: relative;
        }

        .option-btn:hover:not(:disabled) {
            border-color: var(--primary-light);
            background-color: #f8fafc;
        }

        .option-btn.selected {
            border-color: var(--primary-color);
            background-color: var(--primary-light);
        }

        .option-badge {
            background: #e2e8f0;
            color: #64748b;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            font-weight: bold;
            flex-shrink: 0;
        }

        .option-btn.selected .option-badge {
            background: var(--primary-color);
            color: white;
        }

        /* Feedback States */
        .option-btn.correct {
            border-color: var(--success-color);
            background-color: var(--success-bg);
        }
        .option-btn.correct .option-badge { background: var(--success-color); color: white; }
        
        .option-btn.wrong {
            border-color: var(--error-color);
            background-color: var(--error-bg);
        }
        .option-btn.wrong .option-badge { background: var(--error-color); color: white; }

        .result-icon {
            margin-left: auto;
            font-weight: bold;
        }
        .check-icon { color: var(--success-color); }
        .cross-icon { color: var(--error-color); }

        /* Actions */
        .actions {
            margin-top: 24px;
            text-align: right;
        }

        .btn {
            padding: 10px 24px;
            border-radius: 6px;
            border: none;
            font-weight: bold;
            cursor: pointer;
            font-size: 1rem;
            transition: opacity 0.2s;
        }

        .btn-primary {
            background-color: var(--primary-color);
            color: white;
        }

        .btn-outline {
            background-color: transparent;
            border: 2px solid var(--primary-color);
            color: var(--primary-color);
        }

        .btn:disabled {
            background-color: #cbd5e1;
            cursor: not-allowed;
        }

        /* Analysis & Accordion */
        .analysis-section {
            display: none; /* Hidden by default */
            animation: fadeIn 0.5s ease;
        }

        details {
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            margin-bottom: 8px;
            background: white;
        }

        summary {
            padding: 12px 16px;
            cursor: pointer;
            font-weight: bold;
            background-color: #f8fafc;
            border-radius: 8px;
            list-style: none; /* Hide default triangle */
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        summary::-webkit-details-marker {
            display: none;
        }

        summary::after {
            content: '+';
            font-size: 1.2rem;
            font-weight: normal;
        }

        details[open] summary::after {
            content: '-';
        }

        details[open] summary {
            border-bottom: 1px solid #e2e8f0;
            border-radius: 8px 8px 0 0;
            background-color: var(--primary-light);
            color: var(--primary-color);
        }

        .details-content {
            padding: 16px;
            font-size: 0.95rem;
            color: #475569;
        }

        /* Features Grid */
        .features-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
        }
        
        @media (min-width: 640px) {
            .features-grid {
                grid-template-columns: 1fr 1fr;
            }
        }

        /* Tip Box */
        .tip-box {
            background-color: #f0fdf4;
            border-left: 4px solid var(--success-color);
            padding: 16px;
            margin-top: 10px;
        }

        /* Self Check */
        .self-check {
            background-color: #fff;
            border: 2px dashed #94a3b8;
            padding: 20px;
            border-radius: 12px;
            margin-top: 24px;
        }
        
        .hidden-hint {
            display: none;
            margin-top: 10px;
            padding: 10px;
            background: #f1f5f9;
            border-radius: 6px;
            font-size: 0.9rem;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* SVG Icons */
        .icon {
            width: 20px;
            height: 20px;
            vertical-align: middle;
            margin-right: 8px;
        }
    </style>
</head>
<body>

<div class="container">
    <!-- Header -->
    <header class="header">
        <div style="font-size: 2.5rem;">ğŸ›¡ï¸</div>
        <div>
            <h1 style="font-size: 1.5rem; margin-bottom: 4px;">iPAS è³‡å®‰å¯¦æˆ°æ•™å®¤</h1>
            <p style="opacity: 0.9;">å–®å…ƒï¼šä¾›æ‡‰éˆå®‰å…¨ (Supply Chain Security)</p>
            <span class="instructor-badge">ğŸ‘¨â€ğŸ« è¬›å¸«ï¼šè³‡å®‰è£œæ•™åå¸«</span>
        </div>
    </header>

    <!-- Main Quiz Area -->
    <main>
        <div class="card" style="border-left: 4px solid var(--accent-color);">
            <div class="card-header scenario">
                <span>ğŸ“‹</span> æƒ…å¢ƒæ¨¡æ“¬é¡Œ (Q7)
            </div>
            <div class="card-body">
                <p class="question-text">
                    èº«ç‚º<strong>é†«ç™‚ä¸­å¿ƒçš„è³‡å®‰é•·ï¼ˆCISOï¼‰</strong>ï¼Œåœ¨å‹’ç´¢è»Ÿé«”äº‹ä»¶å¾Œçš„æ”¹å–„æœƒè­°ä¸­ï¼Œ
                    è€ƒé‡é†«é™¢çš„é ç®—é™åˆ¶èˆ‡ç‡Ÿé‹æŒçºŒæ€§ï¼Œä¸‹åˆ—ä½•é …é‡å°<span class="highlight">ã€Œä¾›æ‡‰éˆå®‰å…¨ã€</span>çš„
                    é•·æœŸé¢¨éšªè™•ç†ç­–ç•¥æœ€å‹™å¯¦ä¸”å…·æˆæœ¬æ•ˆç›Šï¼Ÿ
                </p>

                <div class="options-grid" id="options-container">
                    <!-- Options will be rendered here by JS -->
                </div>

                <div class="actions">
                    <button id="submit-btn" class="btn btn-primary" disabled onclick="submitQuiz()">æäº¤ç­”æ¡ˆ</button>
                    <button id="reset-btn" class="btn btn-outline" style="display: none;" onclick="resetQuiz()">é‡æ–°ä½œç­”</button>
                </div>
            </div>
        </div>

        <!-- Analysis Section (Hidden until submit) -->
        <div id="analysis-section" class="analysis-section">
            
            <!-- Result Banner -->
            <div id="result-banner" class="card" style="padding: 16px; text-align: center; font-weight: bold; font-size: 1.2rem;">
                <!-- Result text via JS -->
            </div>

            <!-- Detailed Explanation Accordion -->
            <div class="card">
                <div class="card-header analysis">
                    <span>ğŸ“–</span> åå¸«è©³è§£ï¼šç‚ºä»€éº¼é¸ (B)ï¼Ÿ
                </div>
                <div class="card-body">
                    <p style="margin-bottom: 16px;">
                        <strong>æ ¸å¿ƒè§€å¿µï¼š</strong><br>
                        SBOM (Software Bill of Materials) æ˜¯è»Ÿé«”çš„ã€Œæˆåˆ†è¡¨ã€ã€‚
                        åœ¨é ç®—æœ‰é™ä¸‹ï¼ŒçŸ¥é“è‡ªå·±ç”¨äº†ä»€éº¼å…ƒä»¶ï¼Œæ‰èƒ½åœ¨æ¼æ´çˆ†ç™¼æ™‚ï¼ˆå¦‚ Log4j äº‹ä»¶ï¼‰å¿«é€Ÿç›¤é»èˆ‡ä¿®è£œã€‚é€™æ˜¯ç›®å‰åœ‹éš›å…¬èªæœ€å…·æˆæœ¬æ•ˆç›Šçš„é•·æœŸç­–ç•¥ã€‚
                    </p>

                    <!-- Accordion Items -->
                    <details open>
                        <summary>(B) å»ºç«‹ SBOM ä¸¦ç›£æ§å·²çŸ¥æ¼æ´ï¼ˆæ­£ç¢ºç­”æ¡ˆï¼‰</summary>
                        <div class="details-content">
                            ç¬¦åˆç¶“æ¿Ÿæ•ˆç›Šã€‚é€éè‡ªå‹•åŒ–å·¥å…·ç”¢å‡ºæ¸…å–®ï¼Œä¸¦è¨‚é–± CVE æ¼æ´æƒ…å ±ï¼Œèƒ½åœ¨é§­å®¢æ”»æ“Šå‰ä¿®è£œï¼Œç„¡éœ€å¤§é‡äººåŠ›å¯©æŸ¥åŸå§‹ç¢¼ã€‚
                        </div>
                    </details>
                    
                    <details>
                        <summary>(A) è¦æ±‚æä¾›å®Œæ•´åŸå§‹ç¢¼æƒæ</summary>
                        <div class="details-content">
                            <span style="color:var(--error-color);">âŒ ä¸å‹™å¯¦ã€‚</span><br>
                            1. æ¶‰åŠæ™ºæ…§è²¡ç”¢æ¬Šï¼Œå» å•†å¤šæ‹’çµ•ã€‚<br>
                            2. é†«é™¢éœ€è˜è«‹é«˜éšæª¢æ¸¬äººå“¡é€è¡Œå¯©æŸ¥ï¼Œæˆæœ¬æ¥µé«˜ä¸”æ•ˆç‡ä½ã€‚
                        </div>
                    </details>

                    <details>
                        <summary>(C) å…¨é¢ç¦æ­¢é–‹æºï¼Œè‡ªè¡Œé–‹ç™¼</summary>
                        <div class="details-content">
                            <span style="color:var(--error-color);">âŒ æˆæœ¬éé«˜ã€‚</span><br>
                            1. è‡ªè¡Œé–‹ç™¼è€—æ™‚è€—éŒ¢ï¼Œåš´é‡å½±éŸ¿ç‡Ÿé‹ã€‚<br>
                            2. è‡ªè¡Œé–‹ç™¼çš„ç¨‹å¼ç¢¼ä¸€æ¨£æœƒæœ‰æ¼æ´ï¼ˆIn-house code vulnerabilitiesï¼‰ã€‚
                        </div>
                    </details>

                    <details>
                        <summary>(D) è¦æ±‚ç°½ç½²æœ€é«˜é¡åº¦è³‡å®‰ä¿éšª</summary>
                        <div class="details-content">
                            <span style="color:var(--error-color);">âŒ é€™æ˜¯é¢¨éšªè½‰ç§»ï¼Œéé¢¨éšªè™•ç†ã€‚</span><br>
                            1. ä¿éšªåªèƒ½è³ éŒ¢ï¼Œä¸èƒ½é˜²æ­¢å‹’ç´¢è»Ÿé«”åŠ å¯†è³‡æ–™ã€‚<br>
                            2. é†«é™¢æœ€é‡è¦–çš„æ˜¯ã€Œç”Ÿå‘½å®‰å…¨ã€èˆ‡ã€Œæœå‹™ä¸ä¸­æ–·ã€ï¼ŒéŒ¢è³ äº†ä½†ç—…äººæ•‘ä¸å›ä¾†æ˜¯ç„¡æ•ˆçš„ã€‚
                        </div>
                    </details>
                </div>
            </div>

            <!-- Key Concepts & Pitfalls Grid -->
            <div class="features-grid">
                <!-- Concept -->
                <div class="card">
                    <div class="card-header" style="background-color: #f3e8ff; color: #6b21a8;">
                        <span>ğŸ’¡</span> è¨˜æ†¶å£è¨£
                    </div>
                    <div class="card-body">
                        <div style="background: #faf5ff; padding: 15px; border-radius: 8px; text-align: center;">
                            <h3 style="color: #6b21a8; margin-bottom: 8px;">ã€Œæˆåˆ†æ¨™ç¤ºçœ‹å¾—æ¸…<br>é–‹æºæ¼æ´ç„¡è™•éš±ã€</h3>
                            <hr style="margin: 10px 0; border: 0; border-top: 1px dashed #d8b4fe;">
                            <p style="font-size: 0.9rem;">
                                <strong>æˆåˆ†æ¨™ç¤º</strong> = SBOM<br>
                                <strong>é–‹æºæ¼æ´</strong> = Known Vulnerabilities
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Pitfalls -->
                <div class="card" style="border-left: 4px solid var(--error-color);">
                    <div class="card-header pitfall">
                        <span>âš ï¸</span> è€ƒè©¦å¸¸è¦‹ä¸‰å¤§é™·é˜±
                    </div>
                    <div class="card-body">
                        <ul style="list-style-type: none; font-size: 0.95rem;">
                            <li style="margin-bottom: 10px;">
                                <strong>1. æ··æ·†æ‰‹æ®µï¼š</strong>
                                <br>ä¿éšªæ˜¯ã€Œäº‹å¾Œè£œå„Ÿã€ï¼ŒSBOM æ˜¯ã€Œäº‹å‰/äº‹ä¸­ç®¡ç†ã€ã€‚
                            </li>
                            <li style="margin-bottom: 10px;">
                                <strong>2. å°é–‰è¿·æ€ï¼š</strong>
                                <br>èª¤ä»¥ç‚ºã€Œå°é–‰ç³»çµ±ã€æˆ–ã€Œè‡ªè¡Œé–‹ç™¼ã€å°±æ²’æ¼æ´ï¼Œå…¶å¯¦å¾€å¾€å› ç¼ºä¹æª¢æ¸¬æ›´å±éšªã€‚
                            </li>
                            <li>
                                <strong>3. éœæ…‹èª¤è§£ï¼š</strong>
                                <br>SBOM ä¸æ˜¯åšå®Œå°±å¥½ï¼Œå¿…é ˆé…åˆã€ŒæŒçºŒç›£æ§ (Continuous Monitoring)ã€ã€‚
                            </li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Self Assessment -->
            <div class="self-check">
                <h3 style="margin-bottom: 10px; color: var(--primary-color);">ğŸ” è‡ªæˆ‘æª¢æ¸¬ï¼šæ‚¨è¨˜å¾—æ¨™æº–å—ï¼Ÿ</h3>
                <p>ç›®å‰åœ‹éš›æœ€é€šç”¨çš„å…©ç¨® SBOM è³‡æ–™äº¤æ›æ ¼å¼æ¨™æº–æ˜¯ä»€éº¼ï¼Ÿ</p>
                <button class="btn btn-outline" style="margin-top: 10px; font-size: 0.8rem; padding: 5px 15px;" onclick="toggleHint()">
                    é¡¯ç¤º/éš±è—ç­”æ¡ˆ
                </button>
                <div id="hint-box" class="hidden-hint">
                    <strong>ç­”æ¡ˆï¼š</strong> SPDX (Linux Foundation) èˆ‡ CycloneDX (OWASP)ã€‚
                </div>
            </div>

        </div>
    </main>
</div>

<script>
    // Data
    const options = [
        { id: "A", text: "è¦æ±‚æ‰€æœ‰ç¬¬ä¸‰æ–¹ä¾›æ‡‰å•†æä¾›å®Œæ•´åŸå§‹ç¢¼é€²è¡Œæƒæ" },
        { id: "B", text: "å»ºç«‹è»Ÿé«”ç‰©æ–™æ¸…å–®ï¼ˆSBOMï¼‰ç®¡ç†æ©Ÿåˆ¶ï¼Œä¸¦æŒçºŒç›£æ§å·²çŸ¥æ¼æ´" },
        { id: "C", text: "å…¨é¢ç¦æ­¢ä½¿ç”¨é–‹æºè»Ÿé«”èˆ‡ç¬¬ä¸‰æ–¹æ¨¡çµ„ï¼Œå…¨éƒ¨è‡ªè¡Œé–‹ç™¼" },
        { id: "D", text: "è¦æ±‚æ‰€æœ‰ç¬¬ä¸‰æ–¹ä¾›æ‡‰å•†ç°½ç½²æœ€é«˜é¡åº¦è³‡å®‰ä¿éšª" }
    ];
    const correctAnswer = "B";
    let selectedId = null;
    let isSubmitted = false;

    // DOM Elements
    const optionsContainer = document.getElementById('options-container');
    const submitBtn = document.getElementById('submit-btn');
    const resetBtn = document.getElementById('reset-btn');
    const analysisSection = document.getElementById('analysis-section');
    const resultBanner = document.getElementById('result-banner');
    const hintBox = document.getElementById('hint-box');

    // Initialize
    function init() {
        renderOptions();
    }

    // Render Options
    function renderOptions() {
        optionsContainer.innerHTML = '';
        options.forEach(opt => {
            const btn = document.createElement('div');
            btn.className = 'option-btn';
            btn.id = `opt-${opt.id}`;
            btn.onclick = () => selectOption(opt.id);
            
            // Badge
            const badge = document.createElement('div');
            badge.className = 'option-badge';
            badge.innerText = opt.id;
            
            // Text
            const text = document.createElement('span');
            text.innerText = opt.text;
            
            // Icon placeholder
            const icon = document.createElement('span');
            icon.className = 'result-icon';
            icon.id = `icon-${opt.id}`;

            btn.appendChild(badge);
            btn.appendChild(text);
            btn.appendChild(icon);
            optionsContainer.appendChild(btn);
        });
    }

    // Selection Logic
    function selectOption(id) {
        if (isSubmitted) return;

        selectedId = id;
        
        // Update UI styling
        document.querySelectorAll('.option-btn').forEach(btn => {
            btn.classList.remove('selected');
        });
        document.getElementById(`opt-${id}`).classList.add('selected');
        
        // Enable submit button
        submitBtn.disabled = false;
    }

    // Submit Logic
    function submitQuiz() {
        if (!selectedId) return;
        isSubmitted = true;

        // Disable all buttons
        document.querySelectorAll('.option-btn').forEach(btn => {
            btn.style.cursor = 'default';
        });

        // Hide submit, show reset
        submitBtn.style.display = 'none';
        resetBtn.style.display = 'inline-block';

        // Check Answer & Style
        const selectedBtn = document.getElementById(`opt-${selectedId}`);
        const correctBtn = document.getElementById(`opt-${correctAnswer}`);

        if (selectedId === correctAnswer) {
            // Correct
            selectedBtn.classList.add('correct');
            document.getElementById(`icon-${selectedId}`).innerHTML = 'âœ“';
            document.getElementById(`icon-${selectedId}`).classList.add('check-icon');
            
            resultBanner.style.backgroundColor = '#d1fae5';
            resultBanner.style.color = '#065f46';
            resultBanner.innerText = 'ğŸ‰ æ­å–œç­”å°ï¼è§€å¿µéå¸¸æ­£ç¢ºï¼';
        } else {
            // Wrong
            selectedBtn.classList.add('wrong');
            document.getElementById(`icon-${selectedId}`).innerHTML = 'âœ—';
            document.getElementById(`icon-${selectedId}`).classList.add('cross-icon');
            
            // Highlight correct one
            correctBtn.classList.add('correct');
            document.getElementById(`icon-${correctAnswer}`).innerHTML = 'âœ“'; // Show correct marker even if not selected
            document.getElementById(`icon-${correctAnswer}`).classList.add('check-icon');

            resultBanner.style.backgroundColor = '#fee2e2';
            resultBanner.style.color = '#991b1b';
            resultBanner.innerText = `âŒ ç­”éŒ¯äº†ï¼Œæ­£ç¢ºç­”æ¡ˆæ˜¯ (${correctAnswer})`;
        }

        // Show Analysis
        analysisSection.style.display = 'block';
        
        // Scroll to analysis
        setTimeout(() => {
            analysisSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }, 100);
    }

    // Reset Logic
    function resetQuiz() {
        selectedId = null;
        isSubmitted = false;
        
        // Reset UI
        renderOptions();
        submitBtn.disabled = true;
        submitBtn.style.display = 'inline-block';
        resetBtn.style.display = 'none';
        
        analysisSection.style.display = 'none';
        hintBox.style.display = 'none';
        
        // Close details except the first one (optional, keeping state usually better but let's reset)
        const details = document.querySelectorAll('details');
        details.forEach((d, index) => {
             d.open = index === 0;
        });
        
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    // Toggle Hint
    function toggleHint() {
        if (hintBox.style.display === 'block') {
            hintBox.style.display = 'none';
        } else {
            hintBox.style.display = 'block';
        }
    }

    // Run Init
    init();

</script>

</body>
</html>