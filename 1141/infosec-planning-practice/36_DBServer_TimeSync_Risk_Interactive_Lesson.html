<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Q36_資料庫伺服器時間校正風險_互動式教學</title>
    <style>
        /* 基礎設定 */
        :root {
            --primary-color: #2c3e50; /* 深藍灰 */
            --accent-color: #e67e22; /* 活力橘，用於重點 */
            --bg-color: #f8f9fa;
            --card-bg: #ffffff;
            --text-color: #333333;
            --border-color: #dddddd;
            --correct-color: #27ae60;
            --wrong-color: #c0392b;
            --highlight-bg: #ffe082; /* 螢光筆黃 */
        }

        body {
            font-family: "Microsoft JhengHei", "Heiti TC", sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
            margin: 0;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background-color: var(--card-bg);
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        h1, h2, h3 {
            color: var(--primary-color);
            margin-top: 1.2em;
            margin-bottom: 0.5em;
        }

        h1 { font-size: 22px; border-bottom: 2px solid var(--primary-color); padding-bottom: 10px; }
        h2 { font-size: 20px; background-color: #e9ecef; padding: 8px; border-left: 5px solid var(--primary-color); }
        h3 { font-size: 18px; color: var(--accent-color); }

        p, li { font-size: 16px; }

        /* 螢光筆樣式 */
        mark {
            background-color: var(--highlight-bg);
            padding: 0 4px;
            border-radius: 2px;
            font-weight: bold;
        }

        /* 題目區塊 */
        .question-box {
            border: 2px solid var(--primary-color);
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            background-color: #fff;
        }

        .option-label {
            display: block;
            margin: 10px 0;
            cursor: pointer;
            padding: 8px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            transition: background 0.2s;
        }

        .option-label:hover {
            background-color: #f1f1f1;
        }

        input[type="checkbox"] {
            margin-right: 10px;
            transform: scale(1.2);
        }

        /* 按鈕樣式 */
        .btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 10px 20px;
            font-size: 16px;
            border-radius: 4px;
            cursor: pointer;
            margin-right: 10px;
            margin-top: 10px;
        }

        .btn:hover { opacity: 0.9; }
        .btn-reset { background-color: #95a5a6; }
        .btn-explain { background-color: var(--accent-color); width: 100%; margin-top: 20px; }

        /* 回饋訊息 */
        #feedback-area {
            margin-top: 15px;
            padding: 15px;
            border-radius: 4px;
            font-weight: bold;
            display: none;
        }
        .feedback-correct { background-color: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .feedback-wrong { background-color: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }

        /* 解析區塊 (預設隱藏) */
        #explanation-container {
            display: none;
            margin-top: 30px;
            border-top: 2px dashed var(--border-color);
            padding-top: 20px;
        }

        /* 關鍵字清單 */
        .keyword-list li { margin-bottom: 8px; }
        .keyword-reason { font-size: 14px; color: #666; margin-left: 10px; }

        /* 選項展開收合 */
        details {
            margin-bottom: 10px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            overflow: hidden;
        }
        summary {
            padding: 12px;
            background-color: #f1f1f1;
            cursor: pointer;
            font-weight: bold;
        }
        summary:hover { background-color: #e2e6ea; }
        .details-content { padding: 15px; background-color: #fff; }

        .tag-correct { color: var(--correct-color); font-weight: bold; border: 1px solid var(--correct-color); padding: 2px 6px; border-radius: 4px; font-size: 12px; margin-right: 8px; }
        .tag-wrong { color: var(--wrong-color); font-weight: bold; border: 1px solid var(--wrong-color); padding: 2px 6px; border-radius: 4px; font-size: 12px; margin-right: 8px; }

        /* 情境小劇場 */
        .scenario-box {
            background-color: #e8f4fd;
            border-left: 5px solid #3498db;
            padding: 15px;
            margin: 20px 0;
        }
        .mini-quiz-item { margin-top: 15px; border-top: 1px solid rgba(0,0,0,0.1); padding-top: 10px; }
        .mini-result { font-weight: bold; margin-left: 10px; }

        /* 頁尾 */
        footer {
            margin-top: 50px;
            text-align: center;
            font-size: 14px;
            color: #7f8c8d;
            border-top: 1px solid var(--border-color);
            padding-top: 20px;
        }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>資安衝刺班：資料庫伺服器時間校正風險 (Q36)</h1>
        <p>歡迎來到資安入門課程。這題看起來很技術，但其實考的是「邏輯」與「鑑識基礎」。請先嘗試作答。</p>
    </header>

    <main>
        <!-- 1. 題目區 -->
        <section class="question-box">
            <p><strong>36. 資料庫伺服器時間校正功能發生狀況的風險問題，最應加強下列哪幾項控制措施？(複選)</strong></p>
            <form id="quiz-form">
                <label class="option-label">
                    <input type="checkbox" name="option" value="A"> (A) 事件分析
                </label>
                <label class="option-label">
                    <input type="checkbox" name="option" value="B"> (B) 時間同步
                </label>
                <label class="option-label">
                    <input type="checkbox" name="option" value="C"> (C) 網路連通監控
                </label>
                <label class="option-label">
                    <input type="checkbox" name="option" value="D"> (D) 存取控制
                </label>
            </form>
            
            <button class="btn" onclick="submitAnswer()">送出作答</button>
            <button class="btn btn-reset" onclick="resetQuiz()">重置</button>
            <div id="feedback-area"></div>
        </section>

        <!-- 一鍵看解析 -->
        <button id="btn-show-explain" class="btn btn-explain" onclick="toggleExplanation()">一鍵看解析 (請先作答再開啟)</button>

        <!-- 解析完整內容 (預設隱藏) -->
        <div id="explanation-container">
            
            <!-- 2. 第一步：找關鍵字 -->
            <section>
                <h2>第一步：找關鍵字</h2>
                <p>請用螢光筆將題目中的重點標示出來，這決定了我們思考的方向。</p>
                <div style="background: #fff; padding: 15px; border: 1px solid #ddd; margin-bottom: 15px;">
                    <mark>資料庫伺服器</mark> <mark>時間校正</mark>功能<mark>發生狀況</mark>的<mark>風險問題</mark>，最應加強下列哪幾項<mark>控制措施</mark>？
                </div>
                <ul class="keyword-list">
                    <li><strong>資料庫伺服器</strong> <span class="keyword-reason">→ 這是被保護的對象，存放重要資料與交易紀錄的地方。</span></li>
                    <li><strong>時間校正</strong> <span class="keyword-reason">→ 這是題目核心，問題出在「時間準不準」。</span></li>
                    <li><strong>發生狀況</strong> <span class="keyword-reason">→ 暗示功能失效了，例如時間變慢、變快，或根本無法校正。</span></li>
                    <li><strong>風險問題</strong> <span class="keyword-reason">→ 因為時間錯亂會導致的後果（例如日誌對不起來）。</span></li>
                    <li><strong>控制措施</strong> <span class="keyword-reason">→ 我們要選出「解法」或「偵測方法」。</span></li>
                </ul>
            </section>

            <!-- 3. 第二步：白話翻譯 -->
            <section>
                <h2>第二步：白話翻譯</h2>
                <p>用高中生聽得懂的話來說，這題其實在問：</p>
                <blockquote style="border-left: 4px solid #666; padding-left: 15px; color: #555;">
                    「學校圖書館電腦的時鐘壞掉了（時間跑掉），導致借書還書的時間紀錄全亂了。為了預防這種事，或是出事後能知道哪裡有問題，我們應該要加強哪些檢查？」
                </blockquote>
                <p><strong>專有名詞小辭典：</strong></p>
                <ul>
                    <li><strong>時間同步 (Time Synchronization)：</strong> 讓網路上所有電腦的時間都對齊同一個標準時間，就像全班同學考試前都要跟老師對錶一樣。</li>
                    <li><strong>事件分析 (Event Analysis)：</strong> 出事之後，調查人員回頭去看紀錄檔，分析到底發生什麼事、順序為何。如果時間是錯的，分析就會失敗。</li>
                </ul>
            </section>

            <!-- 4. 第三步：解題思路 -->
            <section>
                <h2>第三步：解題思路</h2>
                <p><strong>這題考什麼觀念？</strong> 考的是「時間一致性」對於資訊安全管理與鑑識的重要性。</p>
                
                <h3>解題邏輯 1-2-3：</h3>
                <ol>
                    <li><strong>確認病因：</strong> 題目說是「時間校正」出問題。</li>
                    <li><strong>思考後果：</strong> 如果時間不準，日誌 (Log) 的時間戳記就是錯的。駭客 3:00 入侵，系統卻記成 5:00，會導致抓不到兇手，或者資料庫交易順序錯亂（先提款才存款？）。</li>
                    <li><strong>找解藥：</strong>
                        <ul>
                            <li>要有直接解法 → 讓時間變準 (時間同步)。</li>
                            <li>要有監控手段 → 確保同步的路是通的 (網路連通監控)。</li>
                            <li>要有事後補救/偵測 → 檢查紀錄有無異常 (事件分析)。</li>
                        </ul>
                    </li>
                </ol>

                <h3>生活比喻：</h3>
                <p>想像學校的監視器時間慢了 10 分鐘。小明 12:00 去福利社偷麵包，結果監視器畫面顯示 11:50。當訓導主任去抓 12:00 在福利社的人時，根本抓不到小明。這就是「時間校正失效」的風險。</p>
            </section>

            <!-- 5. 第四步：選項分析 -->
            <section>
                <h2>第四步：選項分析</h2>
                <p>點擊下方選項查看詳細解析：</p>

                <details>
                    <summary>(A) 事件分析</summary>
                    <div class="details-content">
                        <span class="tag-correct">正確</span>
                        <p><strong>為什麼選它：</strong> 當時間校正出狀況時，我們通常是透過「事件分析」發現的（例如發現日誌裡的時間順序不合邏輯）。加強事件分析可以幫助我們在時間剛開始飄移時就察覺異狀，或者在時間錯誤的情況下，嘗試透過其他關聯事件還原真相。</p>
                    </div>
                </details>

                <details>
                    <summary>(B) 時間同步</summary>
                    <div class="details-content">
                        <span class="tag-correct">正確</span>
                        <p><strong>為什麼選它：</strong> 這是最直接的「控制措施」。就像手錶不準要對時，伺服器必須設定 NTP (網路時間協定) 自動與標準時間伺服器對時。這是解決問題的根本方法。</p>
                    </div>
                </details>

                <details>
                    <summary>(C) 網路連通監控</summary>
                    <div class="details-content">
                        <span class="tag-correct">正確</span>
                        <p><strong>為什麼選它：</strong> 伺服器通常是透過網路去跟外部的標準時間伺服器對時。如果網路斷了，對時就會失敗，時間就會開始飄移。所以「監控網路有沒有通」是確保時間同步能運作的必要條件。</p>
                    </div>
                </details>

                <details>
                    <summary>(D) 存取控制</summary>
                    <div class="details-content">
                        <span class="tag-wrong">錯誤 (非優先)</span>
                        <p><strong>為什麼不選它：</strong> 「存取控制」是限制「誰可以登入系統」。雖然這很重要（防止壞人進去亂改時間），但題目問的是針對「時間校正功能發生狀況」的對應措施。加強帳號密碼管理（存取控制）並不能讓壞掉的時鐘變準，也無法偵測時間是否跑掉。它不是針對「時間問題」的特解。</p>
                    </div>
                </details>
            </section>

            <!-- 6. 觀念補充與延伸 -->
            <section>
                <h2>觀念補充與延伸</h2>
                <h3>核心觀念定位</h3>
                <p>本題屬於「資安維運」與「鑑識與日誌管理」章節。在資安事故調查中，最重要的第一步往往是「建立時間軸 (Timeline)」。</p>
                
                <h3>重要名詞定義</h3>
                <ul>
                    <li><strong>NTP (Network Time Protocol)：</strong> 網路時間協定。用來讓電腦透過網路校準時間的標準方法。</li>
                    <li><strong>Log (日誌/紀錄檔)：</strong> 系統的日記。若日記上的日期寫錯，這本日記在法庭上就可能失去證據力。</li>
                </ul>

                <h3>觸類旁通</h3>
                <p><strong>變化題型：</strong> 若駭客攻陷了企業內部的 NTP 伺服器，他可以做什麼？<br>
                答：他可以修改時間，讓未來的日誌看起來像是過去發生的，或是讓過期的憑證看起來還有效，造成巨大的混亂。</p>
            </section>

            <!-- 進階小互動：情境小劇場 -->
            <section class="scenario-box">
                <h3>🎭 進階小互動：情境小劇場</h3>
                <p><strong>情境：</strong> 銀行資料庫的時間慢了 5 分鐘。客戶在 10:00 存入一萬元，隨即在 10:02 轉帳出去。但因為資料庫時間錯誤，系統紀錄變成：先轉帳 (09:57) 才存款 (10:00)。</p>
                
                <div class="mini-quiz-item">
                    <p>問題 1：這種時間錯誤會造成交易邏輯判斷錯誤（例如被誤判為餘額不足）。</p>
                    <button class="btn" style="padding: 5px 10px; font-size: 14px;" onclick="checkMini(1, true)">是</button>
                    <button class="btn btn-reset" style="padding: 5px 10px; font-size: 14px;" onclick="checkMini(1, false)">否</button>
                    <span id="mini-result-1" class="mini-result"></span>
                </div>

                <div class="mini-quiz-item">
                    <p>問題 2：只要我設定了強密碼（存取控制），這個時間順序錯誤就會自動修復。</p>
                    <button class="btn" style="padding: 5px 10px; font-size: 14px;" onclick="checkMini(2, true)">是</button>
                    <button class="btn btn-reset" style="padding: 5px 10px; font-size: 14px;" onclick="checkMini(2, false)">否</button>
                    <span id="mini-result-2" class="mini-result"></span>
                </div>
            </section>

            <!-- 7. 記憶口訣 -->
            <section>
                <h2>記憶口訣</h2>
                <div style="background-color: #ffe082; padding: 10px; border-radius: 4px; text-align: center; font-weight: bold; font-size: 18px;">
                    口訣：「事時網，準沒錯！」
                </div>
                <p style="text-align: center;">解釋：遇到時間問題，就要找 <strong>事</strong>(件分析)、<strong>時</strong>(間同步)、<strong>網</strong>(路監控)。</p>
            </section>

            <!-- 8. 常見陷阱 -->
            <section>
                <h2>常見陷阱</h2>
                <ul>
                    <li><strong>陷阱一：萬用答案「存取控制」。</strong> 很多同學看到資安題目就反射性選存取控制。但在時間校正的情境下，它是間接保護，不是直接解法。</li>
                    <li><strong>避坑指南：</strong> 看到選項問「控制措施」，先問自己「這個措施能直接解決題目的核心病症嗎？」如果題目是頭痛（時間不準），存取控制像是叫你不准出門（避免感染），雖然有用，但不是止痛藥。</li>
                </ul>
            </section>

            <!-- 9. 正確答案 -->
            <section>
                <h2>正確答案</h2>
                <p style="font-size: 20px; font-weight: bold; color: var(--primary-color);">答案：A, B, C</p>
                <p>一句話理由：要解決時間校正風險，必須確保網路通暢(C)、執行同步校正(B)，並透過分析紀錄(A)來偵測與稽核。</p>
            </section>

            <!-- 10. 自我檢測 -->
            <section>
                <h2>自我檢測</h2>
                <p>試著回答看看，點擊下方問題可查看參考解答：</p>
                
                <details>
                    <summary>1. 除了資料庫，還有哪些資安設備如果時間不準，會影響資安鑑識？</summary>
                    <div class="details-content">
                        <p><strong>參考解答：</strong>幾乎所有資安設備都會受影響，特別是：</p>
                        <ul>
                            <li><strong>防火牆 (Firewall) & IDS/IPS：</strong>紀錄攻擊來源 IP 與時間，若時間不準，無法與其他設備的日誌對照（例如：無法確認駭客是先攻破防火牆還是先登入資料庫）。</li>
                            <li><strong>SIEM (資安事件管理平台)：</strong>負責收集所有設備的日誌並進行關聯分析。如果來源設備時間不一致，SIEM 的分析規則就會失效（例如：無法偵測「短時間內多次失敗」的攻擊）。</li>
                            <li><strong>網頁伺服器 (Web Server) & 作業系統 (OS)：</strong>紀錄使用者的操作軌跡。</li>
                        </ul>
                    </div>
                </details>

                <details>
                    <summary>2. 如果手機時間跟伺服器時間差了 3 分鐘，如何影響 2FA/OTP 登入？</summary>
                    <div class="details-content">
                        <p><strong>參考解答：</strong>會導致<strong>登入失敗</strong>。</p>
                        <p>常見的兩步驟驗證 (如 Google Authenticator) 屬於 <strong>TOTP (基於時間的一次性密碼)</strong> 技術。它的原理是利用「當前時間」配合「密鑰」算出驗證碼。伺服器通常只允許前後約 30~60 秒的誤差緩衝。如果你的手機快或慢了 3 分鐘，算出來的驗證碼對伺服器來說就是「過期」或「來自未來」的無效碼。</p>
                    </div>
                </details>
            </section>

        </div>
    </main>

    <footer>
        <p>資安短期衝刺班 | 祝您金榜題名 | 此教材可離線使用</p>
    </footer>
</div>

<script>
    // 主要題目互動邏輯
    function submitAnswer() {
        // 取得所有被勾選的選項
        const checkboxes = document.querySelectorAll('input[name="option"]:checked');
        let selectedValues = [];
        checkboxes.forEach((checkbox) => {
            selectedValues.push(checkbox.value);
        });
        
        // 正確答案
        const correctAnswers = ['A', 'B', 'C'];
        
        // 排序比較
        selectedValues.sort();
        correctAnswers.sort();
        
        const feedbackArea = document.getElementById('feedback-area');
        feedbackArea.style.display = 'block';
        feedbackArea.className = ''; // 清除舊類別

        // 判斷邏輯
        const isCorrect = JSON.stringify(selectedValues) === JSON.stringify(correctAnswers);
        
        if (isCorrect) {
            feedbackArea.textContent = "太棒了！全對！你已經掌握了時間校正的資安控制重點。";
            feedbackArea.classList.add('feedback-correct');
        } else {
            feedbackArea.classList.add('feedback-wrong');
            
            // 分析錯誤
            let feedbackMsg = "答案不完全正確喔。";
            
            // 檢查是否選了 D
            if (selectedValues.includes('D')) {
                feedbackMsg += " (D)存取控制是通用控制，但不是解決時間同步風險的首要措施。";
            }
            
            // 檢查是否漏選
            let missing = correctAnswers.filter(x => !selectedValues.includes(x));
            if (missing.length > 0) {
                feedbackMsg += " 你漏選了： " + missing.join(', ') + "。";
            }
            
            feedbackMsg += " 正確答案是 A, B, C。";
            feedbackArea.textContent = feedbackMsg;
        }
    }

    function resetQuiz() {
        // 清空 checkbox
        const checkboxes = document.querySelectorAll('input[name="option"]');
        checkboxes.forEach((checkbox) => {
            checkbox.checked = false;
        });
        
        // 隱藏並清空回饋區
        const feedbackArea = document.getElementById('feedback-area');
        feedbackArea.style.display = 'none';
        feedbackArea.textContent = '';
        
        // 關閉解析 (選擇性，這裡設計為不自動關閉解析，方便學生對照，若要關閉可取消註解下面這行)
        // document.getElementById('explanation-container').style.display = 'none';
    }

    // 切換解析顯示
    function toggleExplanation() {
        const container = document.getElementById('explanation-container');
        const btn = document.getElementById('btn-show-explain');
        
        if (container.style.display === 'none' || container.style.display === '') {
            container.style.display = 'block';
            btn.textContent = '收合解析';
            // 自動捲動到解析區
            container.scrollIntoView({ behavior: 'smooth' });
        } else {
            container.style.display = 'none';
            btn.textContent = '一鍵看解析 (請先作答再開啟)';
        }
    }

    // 情境小劇場互動邏輯
    function checkMini(questionId, userAnswer) {
        const resultSpan = document.getElementById('mini-result-' + questionId);
        let isCorrect = false;
        let msg = "";

        if (questionId === 1) {
            // 問題 1 正確答案是 true (是)
            isCorrect = (userAnswer === true);
            msg = isCorrect ? "答對了！時間順序錯亂會導致邏輯誤判。" : "答錯囉。時間錯亂確實會影響先後順序判定。";
        } else if (questionId === 2) {
            // 問題 2 正確答案是 false (否)
            isCorrect = (userAnswer === false);
            msg = isCorrect ? "答對了！密碼再強也救不了壞掉的時鐘。" : "答錯囉。存取控制無法修復時間同步問題。";
        }

        resultSpan.style.color = isCorrect ? "#27ae60" : "#c0392b";
        resultSpan.textContent = msg;
    }
</script>

</body>
</html>