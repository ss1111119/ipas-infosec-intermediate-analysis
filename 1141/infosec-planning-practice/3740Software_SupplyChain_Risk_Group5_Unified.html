<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è³‡å®‰çŸ­æœŸè¡åˆºç­ - è»Ÿé«”ä¾›æ‡‰éˆé¢¨éšªç®¡ç† (é¡Œçµ„ 5)</title>
    <style>
        :root {
            /* å“ç‰Œè‰²ç³» */
            --primary-blue: #0288d1;
            --primary-dark: #01579b;
            --bg-color: #f5f7fa;
            --card-bg: #ffffff;
            --text-main: #333333;
            --text-secondary: #666666;
            
            /* ç‹€æ…‹è‰²ç³» */
            --success-bg: #e8f5e9;
            --success-text: #2e7d32;
            --error-bg: #fce4ec;
            --error-text: #c62828;
            --neutral-gray: #e0e0e0;
            
            /* æ¨™ç±¤è‰²ç³» */
            --tag-law: #607d8b;
            --tag-iso: #27ae60;
            --tag-zt: #8e44ad;
            --tag-net: #2980b9;
            --tag-sec: #c0392b;
            --tag-mgm: #d35400;

            /* é™°å½±èˆ‡åœ“è§’ */
            --shadow-card: 0 4px 20px rgba(0,0,0,0.08);
            --radius-card: 16px;
            --radius-btn: 8px;
        }

        * {
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: system-ui, "Noto Sans TC", "Microsoft JhengHei", sans-serif;
            background-color: var(--bg-color);
            color: var(--text-main);
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            font-size: 16px;
        }

        /* --- å®¹å™¨èˆ‡ä½ˆå±€ --- */
        .container {
            max-width: 960px;
            margin: 0 auto;
            width: 100%;
        }

        /* --- é é¦– Header --- */
        .header {
            background: var(--card-bg);
            padding: 20px;
            border-radius: var(--radius-card);
            box-shadow: var(--shadow-card);
            margin-bottom: 20px;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }

        .group-title {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--primary-dark);
            margin: 0;
        }

        .progress-info {
            font-weight: bold;
            color: var(--primary-blue);
            font-size: 0.9rem;
        }

        /* é€²åº¦æ¢ */
        .progress-track {
            background-color: var(--neutral-gray);
            height: 10px;
            border-radius: 5px;
            overflow: hidden;
            width: 100%;
        }

        .progress-fill {
            background-color: var(--success-text);
            height: 100%;
            width: 0%;
            transition: width 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* --- å…±åŒæƒ…å¢ƒå€å¡Š --- */
        .scenario-box {
            background-color: #e1f5fe;
            border-left: 5px solid var(--primary-blue);
            padding: 20px;
            border-radius: var(--radius-btn);
            margin-bottom: 25px;
            font-size: 0.95rem;
            color: #0277bd;
        }

        .scenario-label {
            font-weight: bold;
            display: block;
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-size: 0.85rem;
        }

        /* --- Tabs å°èˆª --- */
        .tabs-container {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            overflow-x: auto;
            padding-bottom: 5px;
            scrollbar-width: none;
        }
        
        .tabs-container::-webkit-scrollbar {
            display: none;
        }

        .tab-btn {
            background: white;
            border: 2px solid transparent;
            border-radius: var(--radius-btn);
            padding: 10px 20px;
            min-width: 100px;
            cursor: pointer;
            font-weight: 600;
            color: var(--text-secondary);
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            flex-shrink: 0;
            height: 48px;
        }

        .tab-btn.active {
            border-color: var(--primary-blue);
            color: var(--primary-blue);
            background-color: #e3f2fd;
        }

        .tab-btn.correct {
            border-color: var(--success-text);
            color: var(--success-text);
            background-color: var(--success-bg);
        }

        .tab-btn.wrong {
            border-color: var(--error-text);
            color: var(--error-text);
            background-color: var(--error-bg);
        }

        /* --- é¡Œç›®å¡ç‰‡å€ --- */
        .question-card {
            background: var(--card-bg);
            border-radius: var(--radius-card);
            box-shadow: var(--shadow-card);
            padding: 30px;
            display: none;
            animation: fadeIn 0.3s ease;
        }

        .question-card.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .q-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .tag {
            padding: 4px 12px;
            border-radius: 20px;
            color: white;
            font-size: 0.85rem;
            font-weight: bold;
        }
        
        .tag-law { background-color: var(--tag-law); }
        .tag-iso { background-color: var(--tag-iso); }
        .tag-zt { background-color: var(--tag-zt); }
        .tag-net { background-color: var(--tag-net); }
        .tag-sec { background-color: var(--tag-sec); }
        .tag-mgm { background-color: var(--tag-mgm); }

        .q-text {
            font-size: 1.15rem;
            font-weight: 600;
            margin-bottom: 25px;
        }

        .highlight-negative {
            color: var(--error-text);
            font-weight: 900;
            text-decoration: underline;
        }

        /* --- é¸é …æ¨£å¼ --- */
        .options-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-bottom: 30px;
        }

        .option-item {
            position: relative;
            padding: 16px 20px;
            border: 2px solid var(--neutral-gray);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            background: #fff;
        }

        .option-item:hover:not(.disabled) {
            border-color: var(--primary-blue);
            background-color: #f1f9ff;
        }

        .option-item.selected {
            border-color: var(--primary-blue);
            background-color: #e3f2fd;
        }

        .option-item input {
            opacity: 0;
            position: absolute;
            width: 0;
            height: 0;
        }

        .option-indicator {
            width: 24px;
            height: 24px;
            border: 2px solid #ccc;
            border-radius: 50%;
            margin-right: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            font-size: 14px;
            color: white;
        }
        
        .option-item.multi .option-indicator {
            border-radius: 6px;
        }

        .option-item.selected .option-indicator {
            background-color: var(--primary-blue);
            border-color: var(--primary-blue);
        }

        .option-item.correct {
            border-color: var(--success-text);
            background-color: var(--success-bg);
        }
        
        .option-item.correct .option-indicator {
            background-color: var(--success-text);
            border-color: var(--success-text);
        }
        
        .option-item.correct::after {
            content: "âœ“";
            color: var(--success-text);
            font-weight: bold;
            margin-left: auto;
            font-size: 1.2rem;
        }

        .option-item.wrong {
            border-color: var(--error-text);
            background-color: var(--error-bg);
        }

        .option-item.wrong .option-indicator {
            background-color: var(--error-text);
            border-color: var(--error-text);
        }

        .option-item.wrong::after {
            content: "âœ—";
            color: var(--error-text);
            font-weight: bold;
            margin-left: auto;
            font-size: 1.2rem;
        }

        .option-item.disabled {
            cursor: not-allowed;
            opacity: 0.9;
        }

        /* --- æŒ‰éˆ•å€ --- */
        .action-area {
            text-align: center;
            margin-bottom: 20px;
        }

        .btn {
            background-color: var(--primary-blue);
            color: white;
            border: none;
            padding: 12px 32px;
            font-size: 1rem;
            border-radius: 50px;
            cursor: pointer;
            font-weight: bold;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: transform 0.1s, background 0.2s;
            min-height: 44px;
        }

        .btn:active {
            transform: scale(0.98);
        }

        .btn-reset {
            background-color: #78909c;
        }
        
        .btn:disabled {
            background-color: #bdbdbd;
            cursor: not-allowed;
        }

        /* --- è©³è§£å€å¡Šæ¨£å¼é‡æ§‹ --- */
        .explanation-section {
            display: none;
            margin-top: 30px;
            border-top: 2px dashed var(--neutral-gray);
            padding-top: 25px;
            animation: slideDown 0.4s ease;
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .step-block {
            margin-bottom: 25px;
            background: #fff;
            border: 1px solid #eee;
            border-radius: 12px;
            overflow: hidden;
        }

        .step-header {
            background-color: #f1f5f9;
            padding: 10px 15px;
            font-weight: bold;
            color: var(--primary-dark);
            border-bottom: 1px solid #eee;
            display: flex;
            align-items: center;
        }
        
        .step-header::before {
            content: '';
            display: inline-block;
            width: 8px;
            height: 8px;
            background-color: var(--primary-blue);
            border-radius: 50%;
            margin-right: 10px;
        }

        .step-content {
            padding: 15px;
            color: #444;
            font-size: 0.95rem;
        }
        
        .step-content mark {
            background-color: #fff3cd;
            color: #856404;
            padding: 2px 6px;
            border-radius: 4px;
        }

        /* ç‰¹åˆ¥å€å¡Šæ¨£å¼ */
        .block-concept { border-left: 4px solid #8e44ad; }
        .block-trap { border-left: 4px solid #e74c3c; }
        .block-memo { border-left: 4px solid #f1c40f; }

        .self-check-item {
            margin-bottom: 15px;
            border-bottom: 1px solid #f0f0f0;
            padding-bottom: 10px;
        }
        
        .self-check-question {
            font-weight: bold;
            margin-bottom: 8px;
            color: var(--primary-dark);
        }
        
        .self-check-answer {
            background-color: #f8f9fa;
            padding: 10px;
            border-radius: 6px;
            color: var(--success-text);
            display: none; /* é è¨­éš±è— */
            margin-top: 5px;
            border-left: 3px solid var(--success-text);
        }

        .btn-reveal {
            font-size: 0.85rem;
            padding: 4px 12px;
            background-color: transparent;
            border: 1px solid var(--primary-blue);
            color: var(--primary-blue);
            border-radius: 15px;
            cursor: pointer;
            margin-top: 5px;
        }
        
        .btn-reveal:hover {
            background-color: #e3f2fd;
        }

        /* --- Mobile èª¿æ•´ --- */
        @media (max-width: 768px) {
            .container {
                padding: 0 10px;
            }
            .header, .question-card {
                padding: 20px 15px;
            }
            .options-list {
                gap: 10px;
            }
            .option-item {
                padding: 12px 15px;
            }
        }
    </style>
</head>
<body>

<div class="container" id="app">
    <!-- Header -->
    <header class="header">
        <div class="header-top">
            <div class="group-title" id="groupTitle">è¼‰å…¥ä¸­...</div>
            <div class="progress-info">
                å®Œæˆé€²åº¦ï¼š<span id="progressCount">0</span> / <span id="totalCount">0</span>
            </div>
        </div>
        <div class="progress-track">
            <div class="progress-fill" id="progressBar"></div>
        </div>
    </header>

    <!-- Global Scenario -->
    <div class="scenario-box" id="groupScenario">
        <span class="scenario-label">ğŸ“œ é¡Œçµ„å…±åŒæƒ…å¢ƒ</span>
        <div id="scenarioText">è¼‰å…¥ä¸­...</div>
    </div>

    <!-- Tabs -->
    <div class="tabs-container" id="tabsContainer">
        <!-- Tabs will be injected here -->
    </div>

    <!-- Questions Container -->
    <div id="questionsContainer">
        <!-- Question Cards will be injected here -->
    </div>

</div>

<!-- JavaScript Logic -->
<script>
    // --- é¡Œç›®è³‡æ–™ (æ•´åˆè‡ª 37-40) ä¸¦æ“´å……è©³ç´°è§£æçµæ§‹ ---
    const quizData = {
        "groupTitle": "è³‡å®‰çŸ­æœŸè¡åˆºç­ï¼šè»Ÿé«”ä¾›æ‡‰éˆé¢¨éšªç®¡ç† (é¡Œçµ„ 5)",
        "groupScenario": "å„ç”¢æ¥­å°æ–¼è»Ÿé«”ä¾›æ‡‰éˆå®‰å…¨çš„éŸŒæ€§è¦æ±‚æ—¥ç›Šæé«˜ï¼Œé€™åŒ…å«ä¾›æ‡‰éˆä¸Šä¸‹æ¸¸çš„å…¬å¸è³‡è¨Šå®‰å…¨ã€è»Ÿé«”å®‰å…¨ç­‰ã€‚åœ¨é¢¨éšªç®¡ç†æ–¹é¢ï¼Œä¼æ¥­å¸¸åƒè€ƒ ISOã€NIST ç­‰æ¡†æ¶ï¼Œä¸¦é€éå¨è„…å»ºæ¨¡èˆ‡æ§åˆ¶æªæ–½ï¼Œä»¥é”åˆ°æœ‰æ•ˆçš„é¢¨éšªç®¡æ§ã€‚",
        "questions": [
            {
                "id": 37,
                "tag": "é¢¨éšªç®¡ç†",
                "tagClass": "tag-mgm",
                "text": "åœ¨ç¾åœ‹åœ‹å®¶æ¨™æº–æš¨æŠ€è¡“ç ”ç©¶é™¢ï¼ˆNISTï¼‰è¨‚å®šçš„è»Ÿé«”é–‹ç™¼å®‰å…¨æ¡†æ¶ï¼ˆSSDFï¼‰ä¸­ï¼Œé‡å°ç¬¬ä¸‰æ–¹å…ƒä»¶å¼±é»çš„é¢¨éšªç®¡æ§ï¼Œä¸‹åˆ—é”æˆé¢¨éšªç®¡æ§çš„æ–¹å¼ä½•è€…éŒ¯èª¤ï¼Ÿ",
                "options": [
                    "ç›¤é»å„ç³»çµ±ä½¿ç”¨çš„ç¬¬ä¸‰æ–¹å…ƒä»¶æ¸…å–®",
                    "æ¸…æŸ¥ç¬¬ä¸‰æ–¹å…ƒä»¶çš„å¼±é»",
                    "æŒçºŒç›£æ§ç¬¬ä¸‰æ–¹å…ƒä»¶å¼±é»æƒ…è³‡",
                    "ä½¿ç”¨è¼ƒä¸çŸ¥åçš„ç¬¬ä¸‰æ–¹å…ƒä»¶"
                ],
                "correct": ["ä½¿ç”¨è¼ƒä¸çŸ¥åçš„ç¬¬ä¸‰æ–¹å…ƒä»¶"],
                "analysis": {
                    "step1_keywords": "è«‹åœˆå‡ºé—œéµå­—ï¼š<mark>NIST SSDF</mark> (æ¨™æº–)ã€<mark>ç¬¬ä¸‰æ–¹å…ƒä»¶</mark> (é¢¨éšªä¾†æº)ã€<mark>å¼±é»</mark> (è¦é˜²ç¯„çš„æ´)ã€<mark>é¢¨éšªç®¡æ§</mark> (ç›®æ¨™)ã€<mark>éŒ¯èª¤</mark> (é€†å‘æ€è€ƒ)ã€‚",
                    "step2_translation": "ç¾åœ‹æ”¿åºœå‡ºäº†ä¸€æœ¬å« SSDF çš„æ›¸æ•™å¤§å®¶å®‰å…¨å¯«è»Ÿé«”ã€‚æ›¸è£¡èªªï¼Œå¦‚æœä½ é–‹ç™¼è»Ÿé«”æ™‚æœ‰ã€Œå¼•ç”¨åˆ¥äººçš„ç¨‹å¼ç¢¼ï¼ˆç¬¬ä¸‰æ–¹å…ƒä»¶ï¼‰ã€ï¼Œè¦æ€éº¼åšæ‰å®‰å…¨ï¼Ÿé¡Œç›®å•ï¼š<strong>å“ªå€‹åšæ³•æ˜¯å¤§éŒ¯ç‰¹éŒ¯ã€æœƒå®³ä½ è¢«é§­çš„ï¼Ÿ</strong>",
                    "step3_logic": `
                        <p><strong>è§£é¡Œæ­¥é©Ÿï¼š</strong></p>
                        <ol>
                            <li><strong>åŸå‰‡ï¼š</strong>SSDF å¼·èª¿ã€Œé€æ˜åº¦ã€èˆ‡ã€Œå¯ç®¡ç†æ€§ã€ã€‚ä½ çœ‹ä¸åˆ°ã€æ²’äººç®¡çš„æ±è¥¿æœ€å±éšªã€‚</li>
                            <li><strong>æª¢è¦–é¸é …ï¼š</strong>
                                <ul>
                                    <li>(A) ç›¤é»æ¸…å–® = å»ºç«‹ SBOMï¼ŒçŸ¥é“è‡ªå·±ç”¨äº†ä»€éº¼ (æ­£ç¢º)ã€‚</li>
                                    <li>(B) æ¸…æŸ¥å¼±é» = æª¢æŸ¥æœ‰æ²’æœ‰åœ°é›· (æ­£ç¢º)ã€‚</li>
                                    <li>(C) æŒçºŒç›£æ§ = ç¢ºä¿æœªä¾†ä¸å‡ºäº‹ (æ­£ç¢º)ã€‚</li>
                                    <li>(D) ä½¿ç”¨ä¸çŸ¥åå…ƒä»¶ = <strong>è³­é‹æ°£</strong>ã€‚ä¸çŸ¥åé€šå¸¸ä»£è¡¨é–‹ç™¼è€…å°‘ã€æ²’äººç¶­è­·ã€å‡ºäº‹æ²’äººä¿® (éŒ¯èª¤)ã€‚</li>
                                </ul>
                            </li>
                        </ol>
                        <p><strong>ç”Ÿæ´»ä¾‹å­ï¼š</strong> å°±åƒä¿®è»Šå» é€²è²¨ç…è»Šçš®ã€‚Aã€Bã€C æ˜¯è¨˜éŒ„å» ç‰Œã€æª¢æŸ¥æœ‰æ²’æœ‰å¬å›å…¬å‘Šã€‚D æ˜¯ã€Œæ•…æ„å»è·¯é‚Šæ’¿æ²’ç‰Œå­çš„ç…è»Šçš®ä¾†è£ã€ï¼Œè¦ºå¾—æ²’äººèªè­˜é€™å€‹ç‰Œå­å°±æ²’äº‹ï¼Ÿé€™ç•¶ç„¶æœ€å±éšªï¼</p>
                    `,
                    "step4_options": "è©³è¦‹ä¸Šæ–¹è§£é¡Œæ€è·¯ï¼Œ(D) é•åäº†ä¾›æ‡‰éˆå®‰å…¨æœ€åŸºæœ¬çš„ã€Œå¯ä¿¡è³´ä¾†æºã€åŸå‰‡ã€‚",
                    "supplement": `
                        <p><strong>æ³•æ¢æˆ–å®šç¾©ï¼ˆç™½è©±ï¼‰ï¼š</strong></p>
                        <ul>
                            <li><strong>éš±åŒ¿å¼å®‰å…¨ (Security by Obscurity)ï¼š</strong>ä»¥ç‚ºæŠŠæ±è¥¿è—èµ·ä¾†ã€æˆ–ç”¨æ²’äººçŸ¥é“çš„å†·é–€æŠ€è¡“å°±å®‰å…¨ã€‚é€™åœ¨è³‡å®‰ç•Œæ˜¯å…¬èªç„¡æ•ˆçš„ï¼Œå› ç‚ºé§­å®¢æ˜¯ç”¨æ©Ÿå™¨æƒæï¼Œä¸ç®¡ä½ çŸ¥ä¸çŸ¥åï¼Œæœ‰æ´å°±æ‰“ã€‚</li>
                        </ul>
                        <p><strong>è§¸é¡æ—é€šï¼š</strong>å¦‚æœ Log4j æ¼æ´çˆ†ç™¼ï¼Œä½ ç¬¬ä¸€ä»¶äº‹è¦åšä»€éº¼ï¼Ÿç­”æ¡ˆæ˜¯åŸ·è¡Œ (A) ç›¤é»æ¸…å–®ï¼Œç¢ºèªè‡ªå·±æœ‰æ²’æœ‰ç”¨å®ƒã€‚</p>
                    `,
                    "mnemonic": "ç›¤ã€æŸ¥ã€ç›¯ éƒ½æ­£ç¢ºï¼Œå†·é–€äº‚ç”¨æœ€å±éšªã€‚",
                    "traps": `
                        <p><strong>å¿ƒç†ç›²é»ï¼š</strong>å¾ˆå¤šè€ƒç”Ÿæœƒèª¤ä»¥ç‚ºã€Œä¸çŸ¥å = é§­å®¢æ‡¶å¾—æ”»æ“Š = å®‰å…¨ã€ã€‚</p>
                        <p><strong>é¿å‘æŒ‡å—ï¼š</strong>è³‡å®‰è¬›æ±‚ã€Œç¶“éé©—è­‰çš„ä¿¡ä»»ã€ã€‚ä¸çŸ¥åé€šå¸¸ç­‰æ–¼ã€Œæœªç¶“é©—è­‰ã€èˆ‡ã€Œç¼ºä¹ç¶­è­·ã€ï¼Œåœ¨ä¾›æ‡‰éˆä¸­æ˜¯å¤§åœ°é›·ã€‚</p>
                    `,
                    "selfCheck": [
                        { q: "SSDF å°æ–¼ç¬¬ä¸‰æ–¹å…ƒä»¶ç®¡ç†çš„ç¬¬ä¸€æ­¥é€šå¸¸æ˜¯ä»€éº¼ï¼Ÿ", a: "å»ºç«‹æ¸…å–® (ç›¤é»)ï¼Œä¹Ÿå°±æ˜¯ç¾åœ¨å¸¸èªªçš„ SBOMã€‚" },
                        { q: "ç‚ºä»€éº¼ã€Œä¸çŸ¥åã€çš„å…ƒä»¶é¢¨éšªåè€Œé«˜ï¼Ÿ", a: "å› ç‚ºç¼ºä¹ç¤¾ç¾¤ç¶­è­·ï¼Œç™¼ç¾æ¼æ´æ™‚å¯èƒ½ç„¡äººä¿®è£œ (End-of-Life)ï¼Œæˆç‚ºå­¤å…’å…ƒä»¶ã€‚" }
                    ]
                }
            },
            {
                "id": 38,
                "tag": "æŠ€è¡“èˆ‡æ¨¡å‹",
                "tagClass": "tag-sec",
                "text": "æƒ…å¢ƒå¦‚ä¸Šï¼Œåœ¨é¢¨éšªç®¡ç†ä¸Šï¼Œä½¿ç”¨å¨è„…è©•ä¼°æ¨¡å‹é€²è¡Œä¾›æ‡‰éˆè³‡å®‰é¢¨éšªè©•ä¼°ã€‚è«‹å•ä¸‹ä½•è€…æ•˜è¿°éŒ¯èª¤ï¼Ÿ",
                "options": [
                    "DREAD æ˜¯å¨è„…å»ºæ¨¡çš„ä¸€ç¨®æ¨¡å¼",
                    "STRIDE æ˜¯å¨è„…å»ºæ¨¡çš„ä¸€ç¨®æ¨¡å¼",
                    "VAST æ˜¯å¨è„…å»ºæ¨¡çš„ä¸€ç¨®æ¨¡å¼",
                    "NIST æ˜¯åœ‹éš›æ¨™æº–çš„å¨è„…å»ºæ¨¡"
                ],
                "correct": ["NIST æ˜¯åœ‹éš›æ¨™æº–çš„å¨è„…å»ºæ¨¡"],
                "analysis": {
                    "step1_keywords": "è«‹åœˆå‡ºé—œéµå­—ï¼š<mark>å¨è„…è©•ä¼°æ¨¡å‹</mark> (Method)ã€<mark>DREAD / STRIDE / VAST</mark> (é¸é …ä¸»è§’)ã€<mark>NIST</mark> (é¸é …ä¸»è§’)ã€‚",
                    "step2_translation": "é€™é¡Œåœ¨ç©ã€Œæ‰¾è‡¥åº•ã€çš„éŠæˆ²ã€‚é¸é …è£¡æœ‰ä¸‰å€‹æ˜¯çœŸçš„ã€Œå¨è„…å»ºæ¨¡æ–¹æ³•ã€ï¼Œæœ‰ä¸€å€‹å…¶å¯¦æ˜¯ã€Œæ©Ÿæ§‹åç¨±ã€æˆ–ã€Œæ¨™æº–åç¨±ã€ï¼Œè«‹æŠŠå®ƒæŠ“å‡ºä¾†ã€‚",
                    "step3_logic": `
                        <p><strong>è§£é¡Œæ­¥é©Ÿï¼š</strong></p>
                        <ol>
                            <li><strong>åˆ†é¡æ³•ï¼š</strong>æŠŠé¸é …åˆ†æˆã€Œæ–¹æ³• (How)ã€èˆ‡ã€Œå–®ä½ (Who)ã€ã€‚</li>
                            <li><strong>è¾¨è­˜ï¼š</strong>
                                <ul>
                                    <li>STRIDE (å¾®è»Ÿå‡ºçš„ï¼Œåˆ†é¡å¨è„…)ã€DREAD (è©•åˆ†é¢¨éšª)ã€VAST (æ•æ·é–‹ç™¼ç”¨) -> é€™äº›éƒ½æ˜¯<strong>æ–¹æ³•</strong>ã€‚</li>
                                    <li>NIST (ç¾åœ‹åœ‹å®¶æ¨™æº–æŠ€è¡“ç ”ç©¶é™¢) -> é€™æ˜¯<strong>å–®ä½/è­¦å¯Ÿå±€</strong>ã€‚å®ƒæœƒç™¼å¸ƒæ¨™æº–ï¼Œä½†ä¸æœƒæŠŠä¸€å€‹æ¨¡å‹å‘½åç‚º "NIST"ã€‚</li>
                                </ul>
                            </li>
                        </ol>
                        <p><strong>ç”Ÿæ´»ä¾‹å­ï¼š</strong> STRIDE åƒæ˜¯ã€Œé™é¾åå…«æŒã€(æ‹›å¼åç¨±)ï¼ŒNIST åƒæ˜¯ã€Œå°‘æ—å¯ºã€(é–€æ´¾/æ©Ÿæ§‹åç¨±)ã€‚ä½ å¯ä»¥å­¸å°‘æ—å¯ºçš„æ­¦åŠŸï¼Œä½†ä¸æœƒèªªã€Œå°‘æ—å¯ºã€æœ¬èº«æ˜¯ä¸€å¥—æ‹³æ³•ã€‚</p>
                    `,
                    "step4_options": "(D) éŒ¯èª¤ã€‚NIST ç™¼å¸ƒäº†è¨±å¤šæ¨™æº– (å¦‚ SP 800-53)ï¼Œä½† NIST æœ¬èº«ä¸æ˜¯å¨è„…å»ºæ¨¡æ¨¡å‹çš„åç¨±ã€‚",
                    "supplement": `
                        <p><strong>è§€å¿µè£œå……ï¼š</strong></p>
                        <ul>
                            <li><strong>STRIDEï¼š</strong>S(å½å†’), T(ç«„æ”¹), R(å¦èª), I(è³‡è¨Šæ­éœ²), D(é˜»æ–·æœå‹™), E(æ¬Šé™æå‡)ã€‚ç”¨ä¾†<strong>åˆ†é¡</strong>å¨è„…ã€‚</li>
                            <li><strong>DREADï¼š</strong>ç”¨ä¾†<strong>æ‰“åˆ†æ•¸</strong> (è¨ˆç®—é¢¨éšªé«˜ä½)ã€‚</li>
                        </ul>
                    `,
                    "mnemonic": "NIST æ˜¯è­¦å¯Ÿå±€ (æ©Ÿæ§‹)ï¼Œä¸æ˜¯æŠ“äººæ‹›å¼ (æ¨¡å‹)ã€‚",
                    "traps": `
                        <p><strong>å¿ƒç†ç›²é»ï¼š</strong>çœ‹åˆ° NIST æ˜¯è³‡å®‰å¤§ç¥ï¼Œå°±è¦ºå¾—å®ƒä»€éº¼éƒ½æ˜¯å°çš„ã€‚</p>
                        <p><strong>é¿å‘æŒ‡å—ï¼š</strong>å€åˆ† "Institute" (æ©Ÿæ§‹) èˆ‡ "Model" (æ¨¡å‹)ã€‚é¡Œç›®å•çš„æ˜¯æ¨¡å‹ã€‚</p>
                    `,
                    "selfCheck": [
                        { q: "STRIDE çš„ä¸»è¦ç”¨é€”æ˜¯ã€Œè©•åˆ†ã€é‚„æ˜¯ã€Œåˆ†é¡ã€ï¼Ÿ", a: "åˆ†é¡ (Categorize)ã€‚" },
                        { q: "DREAD çš„ä¸»è¦ç”¨é€”æ˜¯ã€Œåˆ†é¡ã€é‚„æ˜¯ã€Œè©•åˆ†ã€ï¼Ÿ", a: "è©•åˆ† (Rank/Score)ã€‚" }
                    ]
                }
            },
            {
                "id": 39,
                "tag": "é¢¨éšªç®¡ç†",
                "tagClass": "tag-mgm",
                "text": "æ‰¿ä¸Šæƒ…å¢ƒï¼Œä¸‹åˆ—ä½•è€…ã€Œä¸ã€æ˜¯æ­£ç¢ºçš„è»Ÿé«”é¢¨éšªç®¡ç†æ§åˆ¶æ–¹æ³•ï¼Ÿ",
                "options": [
                    "ç¬¬ä¸‰æ–¹å…ƒä»¶å¼±é»ç®¡ç†",
                    "æ–¼åˆç´„ä¸­è¼‰æ˜è»Ÿé«”é–‹ç™¼ä¹‹è³‡å®‰ä¿®è£œè²¬ä»»",
                    "å®šæœŸå·¡æª¢è»Ÿé«”å¼±é»èˆ‡æ›´æ–°",
                    "é€éç¬¬ä¸‰æ–¹è»Ÿé«”åº«é€²è¡Œæ›´æ–°"
                ],
                "correct": ["é€éç¬¬ä¸‰æ–¹è»Ÿé«”åº«é€²è¡Œæ›´æ–°"],
                "analysis": {
                    "step1_keywords": "è«‹åœˆå‡ºé—œéµå­—ï¼š<mark>é¢¨éšªç®¡ç†æ§åˆ¶</mark> (è¦æ˜¯å®‰å…¨çš„æ‰‹æ®µ)ã€<mark>ä¸æ­£ç¢º</mark> (æ‰¾åœ°é›·)ã€<mark>ç¬¬ä¸‰æ–¹è»Ÿé«”åº«æ›´æ–°</mark> (æœªæåŠé©—è­‰)ã€‚",
                    "step2_translation": "é¡Œç›®å•ï¼šä¸‹é¢å“ªä¸€ç¨®åšæ³•ï¼Œè½èµ·ä¾†åƒæ˜¯åœ¨ç¶­è­·ï¼Œå…¶å¯¦å¯èƒ½æ˜¯åœ¨ã€Œå¼•ç‹¼å…¥å®¤ã€ï¼Ÿ",
                    "step3_logic": `
                        <p><strong>è§£é¡Œæ­¥é©Ÿï¼š</strong></p>
                        <ol>
                            <li><strong>æª¢æŸ¥æ§åˆ¶æ•ˆåŠ›ï¼š</strong>
                                <ul>
                                    <li>(A) ç®¡ç†å¼±é» -> æœ‰åšäº‹ (O)ã€‚</li>
                                    <li>(B) ç°½åˆç´„ -> æœ‰æ³•å¾‹ä¿éšœ (O)ã€‚</li>
                                    <li>(C) å®šæœŸå·¡æª¢ -> æœ‰ä¿æŒè¡›ç”Ÿ (O)ã€‚</li>
                                </ul>
                            </li>
                            <li><strong>åˆ†æé™·é˜±é¸é … (D)ï¼š</strong>ã€Œé€éç¬¬ä¸‰æ–¹è»Ÿé«”åº«æ›´æ–°ã€ã€‚æ³¨æ„ï¼Œé€™è£¡æ²’èªªã€Œé©—è­‰ç°½ç« ã€æˆ–ã€Œæª¢æŸ¥ä¾†æºã€ã€‚
                                <ul>
                                    <li><strong>åŸç†ï¼š</strong>ç¬¬ä¸‰æ–¹åº« (å¦‚ npm, Docker Hub) äººäººéƒ½èƒ½ä¸Šå‚³ã€‚é§­å®¢å¸¸ä¸Šå‚³æƒ¡æ„å¥—ä»¶ (Typosquatting)ã€‚</li>
                                    <li><strong>çµè«–ï¼š</strong>ç›²ç›®å¾ç¬¬ä¸‰æ–¹åº«æ›´æ–° = è®“é§­å®¢å¹«ä½ æ›´æ–°ç³»çµ± = æ¥µåº¦å±éšªã€‚</li>
                                </ul>
                            </li>
                        </ol>
                    `,
                    "step4_options": "(D) æ˜¯éŒ¯èª¤çš„ã€‚æ­£ç¢ºåšæ³•æ‡‰åŒ…å«ã€Œé©—è­‰é›œæ¹Šå€¼ã€ã€ã€Œæ•¸ä½ç°½ç« ã€æˆ–ä½¿ç”¨ã€Œå…§éƒ¨å—ä¿¡ä»»çš„å„²å­˜åº«ã€ã€‚",
                    "supplement": `
                        <p><strong>è§¸é¡æ—é€šï¼š</strong></p>
                        <ul>
                            <li><strong>ä¾›æ‡‰éˆæ”»æ“Š (Supply Chain Attack)ï¼š</strong>é§­å®¢æ±™æŸ“äº†ä¸Šæ¸¸çš„æ›´æ–°æª”ï¼Œå°è‡´ä¸‹æ¸¸æ‰€æœ‰ä½¿ç”¨è€…æ›´æ–°å¾Œå…¨éƒ¨ä¸­ç (å¦‚ SolarWinds äº‹ä»¶)ã€‚</li>
                        </ul>
                    `,
                    "mnemonic": "Aç®¡æ¼æ´ã€Bç®¡è²¬ä»»ã€Cè¦å·¡æª¢ï¼›åªé ç¬¬ä¸‰æ–¹åº«ç›²æ›´æœ€å±éšªã€‚",
                    "traps": `
                        <p><strong>å¸¸è¦‹é™·é˜±ï¼š</strong>çœ‹åˆ°ã€Œæ›´æ–°ã€å…©å€‹å­—å°±åå°„æ€§è¦ºå¾—æ˜¯å¥½ç¿’æ…£ã€‚</p>
                        <p><strong>é¿å‘æŒ‡å—ï¼š</strong>å°æ–¼æ›´æ–°ï¼Œè¦å¤šå•ä¸€å¥ï¼šã€Œå¾å“ªè£¡æ›´ï¼Ÿå®‰å…¨å—ï¼Ÿã€æ²’æœ‰é©—è­‰çš„æ›´æ–°æ˜¯å‚³æ’­ç—…æ¯’æœ€å¿«çš„æ–¹å¼ã€‚</p>
                    `,
                    "selfCheck": [
                        { q: "ç‚ºä»€éº¼ç›´æ¥å¾å…¬é–‹çš„é–‹æºå„²å­˜åº«ä¸‹è¼‰å¥—ä»¶æœ‰é¢¨éšªï¼Ÿ", a: "å› ç‚ºå¯èƒ½ä¸‹è¼‰åˆ°é§­å®¢å½é€ çš„æƒ¡æ„å¥—ä»¶ (åç¨±ç›¸ä¼¼) æˆ–è¢«ç«„æ”¹çš„ç‰ˆæœ¬ã€‚" },
                        { q: "ä¼æ¥­æ‡‰è©²å¦‚ä½•å®‰å…¨åœ°ä½¿ç”¨ç¬¬ä¸‰æ–¹å¥—ä»¶ï¼Ÿ", a: "å»ºç«‹å…§éƒ¨çš„ç§æœ‰å„²å­˜åº« (Private Repo)ï¼Œå…ˆæƒæéæ¿¾å¾Œå†çµ¦å…§éƒ¨é–‹ç™¼äººå“¡ä½¿ç”¨ã€‚" }
                    ]
                }
            },
            {
                "id": 40,
                "tag": "é é˜²èˆ‡æª¢æ¸¬",
                "tagClass": "tag-sec",
                "type": "multi", 
                "text": "åœ¨è»Ÿé«”ä¾›æ‡‰éˆä¸­çš„é¢¨éšªç®¡ç†ä¸Šï¼Œæœ‰ä»¥ä¸‹å“ªäº›æ–¹å¼é€²è¡Œè³‡å®‰é é˜²åŠæª¢æ¸¬ï¼Ÿï¼ˆè¤‡é¸ï¼‰",
                "options": [
                    "è»Ÿé«”ç‰©æ–™æ¸…å–®ï¼ˆSoftware Bill of Materials, SBOMï¼‰",
                    "åŸå§‹ç¢¼æª¢æ¸¬åŠé˜²æ¯’æƒæ",
                    "IAS-99",
                    "SEMI 197"
                ],
                "correct": ["è»Ÿé«”ç‰©æ–™æ¸…å–®ï¼ˆSoftware Bill of Materials, SBOMï¼‰", "åŸå§‹ç¢¼æª¢æ¸¬åŠé˜²æ¯’æƒæ"],
                "analysis": {
                    "step1_keywords": "è«‹åœˆå‡ºé—œéµå­—ï¼š<mark>é é˜²åŠæª¢æ¸¬</mark> (è¦å…·é«”çš„å·¥å…·/æ‰‹æ®µ)ã€<mark>SBOM</mark>ã€<mark>åŸå§‹ç¢¼æª¢æ¸¬</mark>ã€<mark>æ¨™æº–ä»£è™Ÿ</mark> (IAS-99, SEMI)ã€‚",
                    "step2_translation": "æ—¢ç„¶è»Ÿé«”æ˜¯æ‹¼è£è»Šï¼Œæˆ‘å€‘è¦ç”¨ä»€éº¼ã€Œå·¥å…·ã€ä¾†æª¢æŸ¥é›¶ä»¶æˆåˆ†ï¼Œä»¥åŠæƒææœ‰æ²’æœ‰ç‚¸å½ˆï¼Ÿ(è«‹é¸å‡ºåšäº‹çš„å·¥å…·ï¼Œä¸è¦é¸æ–‡ä»¶ä»£è™Ÿ)",
                    "step3_logic": `
                        <p><strong>è§£é¡Œæ­¥é©Ÿï¼š</strong></p>
                        <ol>
                            <li><strong>è¾¨è­˜å±¬æ€§ï¼š</strong>
                                <ul>
                                    <li>(A) SBOMï¼šæˆåˆ†è¡¨ -> é€™æ˜¯æª¢æ¸¬çš„åŸºç¤ (O)ã€‚</li>
                                    <li>(B) æƒæï¼šXå…‰æ©Ÿ -> é€™æ˜¯æª¢æ¸¬çš„å‹•ä½œ (O)ã€‚</li>
                                    <li>(C) IAS-99 (æ‡‰ç‚º ISA-99)ï¼šå·¥æ§è³‡å®‰æ¨™æº– -> é€™æ˜¯æ–‡ä»¶ (X)ã€‚</li>
                                    <li>(D) SEMI 197ï¼šåŠå°é«”æ¨™æº– -> é€™æ˜¯æ–‡ä»¶ (X)ã€‚</li>
                                </ul>
                            </li>
                        </ol>
                        <p><strong>ç”Ÿæ´»ä¾‹å­ï¼š</strong> SBOM å°±åƒé£Ÿå“åŒ…è£ä¸Šçš„ã€Œç‡Ÿé¤Šæˆåˆ†è¡¨ã€(é é˜²éæ•)ï¼Œæƒæå°±åƒæ©Ÿå ´çš„ã€Œé‡‘å±¬æ¢æ¸¬é–€ã€(æª¢æ¸¬å±éšª)ã€‚</p>
                    `,
                    "step4_options": "æ­£ç¢ºç­”æ¡ˆç‚º (A)ã€(B)ã€‚é€™å…©è€…æ˜¯ DevSecOps æµç¨‹ä¸­å¯¦éš›åŸ·è¡Œçš„é é˜²èˆ‡æª¢æ¸¬ç’°ç¯€ã€‚",
                    "supplement": `
                        <p><strong>è§€å¿µè£œå……ï¼š</strong></p>
                        <ul>
                            <li><strong>SCA (è»Ÿé«”æˆåˆ†åˆ†æ)ï¼š</strong>é€šå¸¸æ­é… SBOM ä½¿ç”¨ï¼Œè‡ªå‹•åˆ†æé€™äº›æˆåˆ†æœ‰æ²’æœ‰å·²çŸ¥æ¼æ´ã€‚</li>
                        </ul>
                    `,
                    "mnemonic": "Açœ‹æˆåˆ†è¡¨ (SBOM)ã€Båšå¤§æƒæï¼›è‹±æ–‡ä»£è™Ÿå¤šæ˜¯æ¨™æº–ï¼Œä¸ä¸€å®šæ˜¯æª¢æ¸¬æ‹›ã€‚",
                    "traps": `
                        <p><strong>å¿ƒç†ç›²é»ï¼š</strong>çœ‹åˆ°å¾ˆå°ˆæ¥­çš„è‹±æ–‡+æ•¸å­—ç·¨è™Ÿ (å¦‚ IAS-99) å°±è¦ºå¾—æ˜¯å²å®³çš„ç­”æ¡ˆã€‚</p>
                        <p><strong>é¿å‘æŒ‡å—ï¼š</strong>é¡Œç›®å•ã€Œæ–¹å¼ (Tools/Methods)ã€ï¼Œå„ªå…ˆé¸ã€Œå…·é«”çš„åŸ·è¡Œæ‰‹æ®µã€ï¼Œè€Œä¸æ˜¯ã€Œåƒç…§çš„æ¨™æº–ã€ã€‚</p>
                    `,
                    "selfCheck": [
                        { q: "SBOM æœ€ä¸»è¦çš„ç”¨é€”æ˜¯ä»€éº¼ï¼Ÿ", a: "æé«˜è»Ÿé«”ä¾›æ‡‰éˆçš„é€æ˜åº¦ï¼Œç•¶æ¼æ´çˆ†ç™¼æ™‚èƒ½å¿«é€Ÿå®šä½å—å½±éŸ¿çš„ç¯„åœã€‚" },
                        { q: "åŸå§‹ç¢¼æª¢æ¸¬ (SAST) å’Œé˜²æ¯’æƒææœ‰ä»€éº¼ä¸åŒï¼Ÿ", a: "åŸå§‹ç¢¼æª¢æ¸¬æ˜¯æ‰¾ç¨‹å¼å¯«æ³•ä¸Šçš„é‚è¼¯æ¼æ´ï¼›é˜²æ¯’æƒææ˜¯æ¯”å°ç‰¹å¾µç¢¼æ‰¾å·²çŸ¥çš„æƒ¡æ„ç¨‹å¼ã€‚" }
                    ]
                }
            }
        ]
    };

    // --- å…¨åŸŸè®Šæ•¸ ---
    let currentQuestions = []; // å„²å­˜åˆå§‹åŒ–å¾Œçš„é¡Œç›®ç‹€æ…‹ï¼ˆåŒ…å«äº‚æ•¸é¸é …ï¼‰

    // --- åˆå§‹åŒ–ç¨‹å¼ ---
    window.onload = function() {
        initApp();
    };

    function initApp() {
        // 1. å¡«å…… Header è³‡è¨Š
        document.getElementById('groupTitle').textContent = quizData.groupTitle;
        document.getElementById('groupScenario').querySelector('#scenarioText').innerHTML = quizData.groupScenario;
        document.getElementById('totalCount').textContent = quizData.questions.length;

        // 2. åˆå§‹åŒ–é¡Œç›®æ•¸æ“š (æ´—ç‰Œé¸é …)
        currentQuestions = quizData.questions.map((q, index) => {
            return {
                ...q,
                index: index,
                shuffledOptions: shuffleArray([...q.options]), // è¤‡è£½ä¸¦æ´—ç‰Œ
                userAnswers: [], // å„²å­˜ä½¿ç”¨è€…é¸æ“‡
                state: 'unanswered' // unanswered, correct, wrong
            };
        });

        // 3. æ¸²æŸ“ Tabs
        renderTabs();

        // 4. æ¸²æŸ“é¡Œç›®å¡ç‰‡
        renderQuestions();

        // 5. é è¨­é¡¯ç¤ºç¬¬ä¸€é¡Œ
        switchTab(0);
    }

    // --- æ ¸å¿ƒé‚è¼¯ ---

    // æ´—ç‰Œæ¼”ç®—æ³• (Fisher-Yates)
    function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
    }

    // è™•ç†é—œéµå­—æ¨™ç´… (ä¸, éŒ¯èª¤, False, etc.)
    function highlightKeywords(text) {
        const keywords = ["ä¸", "ä¸æ˜¯", "éŒ¯èª¤", "æœ€ä¸é©ç”¨", "False", "Error"];
        let newText = text;
        keywords.forEach(kw => {
            const regex = new RegExp(`(${kw})`, 'g');
            newText = newText.replace(regex, '<span class="highlight-negative">$1</span>');
        });
        return newText;
    }

    // æ¸²æŸ“ Tabs
    function renderTabs() {
        const container = document.getElementById('tabsContainer');
        container.innerHTML = '';
        currentQuestions.forEach((q, idx) => {
            const btn = document.createElement('button');
            btn.className = 'tab-btn';
            btn.id = `tab-${idx}`;
            btn.innerHTML = `<span>ç¬¬ ${q.id} é¡Œ</span>`; // é è¨­ç„¡åœ–ç¤º
            btn.onclick = () => switchTab(idx);
            container.appendChild(btn);
        });
    }

    // æ¸²æŸ“é¡Œç›®å€å¡Š
    function renderQuestions() {
        const container = document.getElementById('questionsContainer');
        container.innerHTML = '';

        currentQuestions.forEach((q, idx) => {
            const card = document.createElement('div');
            card.className = 'question-card';
            card.id = `question-${idx}`;

            const isMulti = q.type === 'multi';
            const inputType = isMulti ? 'checkbox' : 'radio';
            
            // æ¨™é¡Œèˆ‡æ¨™ç±¤
            let html = `
                <div class="q-header">
                    <span class="tag ${q.tagClass}">${q.tag}</span>
                    <span style="color: #999; font-size: 0.9rem;">${isMulti ? '(è¤‡é¸é¡Œ)' : '(å–®é¸é¡Œ)'}</span>
                </div>
                <div class="q-text">${highlightKeywords(q.text)}</div>
            `;

            // é¸é …å€åŸŸ
            html += `<div class="options-list" id="options-list-${idx}">`;
            q.shuffledOptions.forEach((opt, optIdx) => {
                html += `
                    <label class="option-item ${isMulti ? 'multi' : ''}" onclick="selectOption(${idx}, ${optIdx}, '${inputType}')">
                        <input type="${inputType}" name="q-${idx}" value="${opt}">
                        <div class="option-indicator">${String.fromCharCode(65 + optIdx)}</div>
                        <div class="option-content">${opt}</div>
                    </label>
                `;
            });
            html += `</div>`;

            // æŒ‰éˆ•å€åŸŸ
            html += `
                <div class="action-area">
                    <button class="btn" id="btn-submit-${idx}" onclick="submitAnswer(${idx})">é€å‡ºç­”æ¡ˆ</button>
                    <button class="btn btn-reset" id="btn-reset-${idx}" onclick="resetQuestion(${idx})" style="display:none;">é‡æ–°ä½œç­”</button>
                </div>
            `;

            // è©³è§£å€åŸŸ (æ ¹æ“šæ–°çµæ§‹é‡å¯«)
            const a = q.analysis;
            html += `
                <div class="explanation-section" id="explain-${idx}">
                    
                    <div class="step-block">
                        <div class="step-header">ç¬¬ä¸€æ­¥ï¼šæ‰¾é—œéµå­—</div>
                        <div class="step-content">${a.step1_keywords}</div>
                    </div>

                    <div class="step-block">
                        <div class="step-header">ç¬¬äºŒæ­¥ï¼šç™½è©±ç¿»è­¯</div>
                        <div class="step-content">${a.step2_translation}</div>
                    </div>

                    <div class="step-block block-concept">
                        <div class="step-header">ç¬¬ä¸‰æ­¥ï¼šè§£é¡Œæ€è·¯ (æ­¥é©Ÿã€åŸç†ã€ç”Ÿæ´»ä¾‹å­)</div>
                        <div class="step-content">${a.step3_logic}</div>
                    </div>

                    <div class="step-block">
                        <div class="step-header">ç¬¬å››æ­¥ï¼šé¸é …åˆ†æ</div>
                        <div class="step-content">${a.step4_options}</div>
                    </div>

                    <div class="step-block">
                        <div class="step-header">è§€å¿µè£œå……èˆ‡å»¶ä¼¸ (æ³•æ¢ã€å®šç¾©ã€è§¸é¡æ—é€š)</div>
                        <div class="step-content">${a.supplement}</div>
                    </div>

                    <div class="step-block block-memo">
                        <div class="step-header">è¨˜æ†¶å£è¨£</div>
                        <div class="step-content" style="font-weight:bold; color:#d35400;">${a.mnemonic}</div>
                    </div>

                    <div class="step-block block-trap">
                        <div class="step-header">å¸¸è¦‹é™·é˜± (å¿ƒç†ç›²é»ã€é¿å‘æŒ‡å—)</div>
                        <div class="step-content">${a.traps}</div>
                    </div>
                    
                    <div class="step-block">
                        <div class="step-header">è‡ªæˆ‘æª¢æ¸¬ (é»æ“Šé¡¯ç¤ºç­”æ¡ˆ)</div>
                        <div class="step-content">
                            ${a.selfCheck.map((check, i) => `
                                <div class="self-check-item">
                                    <div class="self-check-question">Q${i+1}: ${check.q}</div>
                                    <button class="btn-reveal" onclick="toggleSelfCheckAnswer(this)">çœ‹ç­”æ¡ˆ</button>
                                    <div class="self-check-answer">${check.a}</div>
                                </div>
                            `).join('')}
                        </div>
                    </div>

                </div>
            `;

            card.innerHTML = html;
            container.appendChild(card);
        });
    }

    // åˆ‡æ› Tab
    function switchTab(index) {
        // Update Tabs UI
        document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
        document.getElementById(`tab-${index}`).classList.add('active');

        // Update Question UI
        document.querySelectorAll('.question-card').forEach(card => card.classList.remove('active'));
        const activeCard = document.getElementById(`question-${index}`);
        activeCard.classList.add('active');

        // Smooth Scroll to Top
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    // é¸æ“‡é¸é … (UI äº’å‹•)
    function selectOption(qIdx, optIdx, type) {
        const qData = currentQuestions[qIdx];
        if (qData.state !== 'unanswered') return; // å·²é€å‡ºå‰‡é–å®š

        const optionsList = document.getElementById(`options-list-${qIdx}`);
        const inputs = optionsList.querySelectorAll('input');
        const items = optionsList.querySelectorAll('.option-item');

        if (type === 'radio') {
            // æ¸…é™¤å…¶ä»–é¸å–
            items.forEach(item => item.classList.remove('selected'));
            // é¸å–ç•¶å‰
            items[optIdx].classList.add('selected');
            inputs[optIdx].checked = true;
        } else {
            // Toggle
            const item = items[optIdx];
            const input = inputs[optIdx];
            if (input.checked) {
                item.classList.remove('selected');
                input.checked = false;
            } else {
                item.classList.add('selected');
                input.checked = true;
            }
        }
    }

    // é€å‡ºç­”æ¡ˆ
    function submitAnswer(qIdx) {
        const qData = currentQuestions[qIdx];
        const optionsList = document.getElementById(`options-list-${qIdx}`);
        const inputs = optionsList.querySelectorAll('input:checked');

        if (inputs.length === 0) {
            alert("è«‹å…ˆé¸æ“‡ä¸€å€‹ç­”æ¡ˆï¼");
            return;
        }

        // æ”¶é›†ä½¿ç”¨è€…ç­”æ¡ˆ
        const userAnswers = Array.from(inputs).map(input => input.value);
        
        // æ¯”å°ç­”æ¡ˆ (è™•ç†è¤‡é¸é †åºå•é¡Œ)
        const isCorrect = userAnswers.length === qData.correct.length && 
                          userAnswers.sort().every((val, index) => val === qData.correct.sort()[index]);

        // æ›´æ–°ç‹€æ…‹
        qData.state = isCorrect ? 'correct' : 'wrong';

        // UI æ›´æ–°ï¼šé–å®šé¸é …ä¸¦æ¨™ç¤ºå°éŒ¯
        const allItems = optionsList.querySelectorAll('.option-item');
        const allInputs = optionsList.querySelectorAll('input');
        
        allInputs.forEach((input, idx) => {
            const item = allItems[idx];
            item.classList.add('disabled');
            item.onclick = null; // ç§»é™¤é»æ“Šäº‹ä»¶

            const val = input.value;
            // æ¨™ç¤ºé‚è¼¯ï¼š
            // 1. é€™æ˜¯æ­£ç¢ºç­”æ¡ˆ -> ç¶ è‰²
            // 2. ä½¿ç”¨è€…é¸äº†é€™å€‹ä¸”å®ƒæ˜¯éŒ¯çš„ -> ç´…è‰²
            if (qData.correct.includes(val)) {
                item.classList.add('correct');
            } else if (userAnswers.includes(val) && !qData.correct.includes(val)) {
                item.classList.add('wrong');
            }
        });

        // é¡¯ç¤ºè©³è§£
        document.getElementById(`explain-${qIdx}`).style.display = 'block';

        // åˆ‡æ›æŒ‰éˆ•
        document.getElementById(`btn-submit-${qIdx}`).style.display = 'none';
        document.getElementById(`btn-reset-${qIdx}`).style.display = 'inline-block';

        // æ›´æ–° Tab ç‹€æ…‹
        updateTabStatus(qIdx, qData.state);

        // æ›´æ–°å…¨åŸŸé€²åº¦
        updateGlobalProgress();
    }

    // é‡ç½®å–®é¡Œ
    function resetQuestion(qIdx) {
        const qData = currentQuestions[qIdx];
        qData.state = 'unanswered';
        
        // é‡æ–°æ´—ç‰Œé¸é … - å›é ­æ‰¾åŸå§‹ quizData
        const originalOptions = quizData.questions[qIdx].options;
        qData.shuffledOptions = shuffleArray([...originalOptions]);

        // é‡æ–°æ¸²æŸ“è©²é¡Œçš„é¸é …å€åŸŸ
        const optionsList = document.getElementById(`options-list-${qIdx}`);
        optionsList.innerHTML = '';
        const isMulti = qData.type === 'multi';
        const inputType = isMulti ? 'checkbox' : 'radio';

        qData.shuffledOptions.forEach((opt, optIdx) => {
            optionsList.innerHTML += `
                <label class="option-item ${isMulti ? 'multi' : ''}" onclick="selectOption(${qIdx}, ${optIdx}, '${inputType}')">
                    <input type="${inputType}" name="q-${qIdx}" value="${opt}">
                    <div class="option-indicator">${String.fromCharCode(65 + optIdx)}</div>
                    <div class="option-content">${opt}</div>
                </label>
            `;
        });

        // éš±è—è©³è§£
        document.getElementById(`explain-${qIdx}`).style.display = 'none';

        // åˆ‡æ›æŒ‰éˆ•
        document.getElementById(`btn-submit-${qIdx}`).style.display = 'inline-block';
        document.getElementById(`btn-reset-${qIdx}`).style.display = 'none';

        // é‡ç½® Tab ç‹€æ…‹
        updateTabStatus(qIdx, 'unanswered');
        
        // æ›´æ–°é€²åº¦
        updateGlobalProgress();

        // æ²å‹•å›é ‚éƒ¨
        const card = document.getElementById(`question-${qIdx}`);
        card.scrollIntoView({ behavior: 'smooth', block: 'start' });
    }

    // æ›´æ–° Tab ç‹€æ…‹æ¨£å¼
    function updateTabStatus(idx, state) {
        const tab = document.getElementById(`tab-${idx}`);
        tab.classList.remove('correct', 'wrong');
        
        let icon = '';
        if (state === 'correct') {
            tab.classList.add('correct');
            icon = 'âœ“ ';
        } else if (state === 'wrong') {
            tab.classList.add('wrong');
            icon = 'âœ— ';
        }
        
        tab.innerHTML = `<span>${icon}ç¬¬ ${quizData.questions[idx].id} é¡Œ</span>`;
    }

    // æ›´æ–°å…¨åŸŸé€²åº¦æ¢
    function updateGlobalProgress() {
        const total = currentQuestions.length;
        const completed = currentQuestions.filter(q => q.state !== 'unanswered').length;
        const percent = (completed / total) * 100;

        document.getElementById('progressCount').textContent = completed;
        document.getElementById('progressBar').style.width = `${percent}%`;
    }

    // è‡ªæˆ‘æª¢æ¸¬ç­”æ¡ˆåˆ‡æ›
    function toggleSelfCheckAnswer(btn) {
        const answerDiv = btn.nextElementSibling;
        if (answerDiv.style.display === 'block') {
            answerDiv.style.display = 'none';
            btn.textContent = 'çœ‹ç­”æ¡ˆ';
        } else {
            answerDiv.style.display = 'block';
            btn.textContent = 'éš±è—ç­”æ¡ˆ';
        }
    }

</script>

</body>
</html>