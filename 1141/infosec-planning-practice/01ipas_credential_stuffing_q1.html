<!DOCTYPE html>
<html lang="zh-Hant-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>iPAS 資安互動教學 - 憑證填充攻擊</title>
    <style>
        :root {
            --primary-color: #2c3e50;
            --accent-color: #3498db;
            --success-color: #27ae60;
            --error-color: #c0392b;
            --bg-color: #f5f7fa;
            --card-bg: #ffffff;
            --text-color: #333333;
            --border-color: #e0e0e0;
            --highlight-color: #fff9c4;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: "Microsoft JhengHei", "PingFang TC", sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background-color: var(--card-bg);
            padding: 40px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            border-top: 5px solid var(--primary-color);
        }

        h1 {
            font-size: 24px;
            margin-bottom: 10px;
            color: var(--primary-color);
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 10px;
        }

        .subtitle {
            font-size: 16px;
            color: #666;
            margin-bottom: 30px;
        }

        /* 題目區域 */
        .question-box {
            background-color: #fafafa;
            border: 1px solid var(--border-color);
            padding: 20px;
            border-radius: 6px;
            margin-bottom: 25px;
            font-size: 18px;
            font-weight: 500;
        }

        .options-group {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-top: 20px;
        }

        .option-label {
            display: flex;
            align-items: center;
            padding: 12px 15px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .option-label:hover {
            background-color: #f0f8ff;
        }

        .option-label input[type="radio"] {
            margin-right: 12px;
            transform: scale(1.2);
        }

        /* 按鈕區域 */
        .action-buttons {
            margin-top: 25px;
            display: flex;
            gap: 15px;
        }

        button {
            padding: 10px 24px;
            font-size: 16px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
            transition: opacity 0.2s;
        }

        .btn-submit {
            background-color: var(--primary-color);
            color: white;
        }

        .btn-reset {
            background-color: #95a5a6;
            color: white;
        }

        button:hover {
            opacity: 0.9;
        }

        /* 結果顯示區域 */
        .result-message {
            margin-top: 20px;
            padding: 15px;
            border-radius: 4px;
            font-weight: bold;
            display: none; /* 初始隱藏 */
        }

        .result-correct {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .result-wrong {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        /* 解析區塊 (Accordion) */
        .analysis-section {
            display: none; /* 初始隱藏，提交後顯示 */
            margin-top: 30px;
            border-top: 2px dashed var(--border-color);
            padding-top: 20px;
        }

        details {
            margin-bottom: 15px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            overflow: hidden;
        }

        summary {
            background-color: #f8f9fa;
            padding: 15px;
            cursor: pointer;
            font-weight: bold;
            color: var(--primary-color);
            list-style: none; /* 移除預設箭頭 */
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        summary::after {
            content: "+";
            font-size: 20px;
            font-weight: bold;
        }

        details[open] summary::after {
            content: "-";
        }

        .content {
            padding: 20px;
            background-color: white;
            border-top: 1px solid var(--border-color);
        }

        /* 內容樣式 */
        .highlight {
            background-color: var(--highlight-color);
            padding: 0 4px;
            border-radius: 2px;
            font-weight: bold;
        }

        .step-label {
            display: inline-block;
            background-color: var(--accent-color);
            color: white;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 12px;
            margin-bottom: 8px;
        }

        ul {
            padding-left: 20px;
            margin-top: 10px;
        }

        li {
            margin-bottom: 8px;
        }

        /* 流程圖樣式 */
        .flowchart {
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 20px 0;
            flex-wrap: wrap;
            gap: 10px;
        }

        .flow-box {
            border: 2px solid var(--text-color);
            padding: 10px 15px;
            border-radius: 4px;
            background-color: white;
            font-weight: bold;
            text-align: center;
        }

        .flow-arrow {
            font-size: 20px;
            color: var(--accent-color);
            font-weight: bold;
        }

        /* 表格樣式 */
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }

        .comparison-table th, .comparison-table td {
            border: 1px solid var(--border-color);
            padding: 10px;
            text-align: left;
        }

        .comparison-table th {
            background-color: #f1f1f1;
            font-weight: bold;
        }

        /* RWD 調整 */
        @media (max-width: 600px) {
            .container {
                padding: 20px;
            }
            .flowchart {
                flex-direction: column;
            }
            .flow-arrow {
                transform: rotate(90deg);
            }
        }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>iPAS 資安題庫解析 - Credential Stuffing 防護</h1>
        <p class="subtitle">單元：身分驗證與存取控制</p>
    </header>

    <!-- A. 題目 -->
    <section id="quiz-area">
        <div class="question-box">
            題目：<br>
            為避免所建置之網購系統遭受憑證填充攻擊，下列何項舉措最無效果？
        </div>
        
        <div class="options-group">
            <label class="option-label">
                <input type="radio" name="answer" value="A">
                (A) 使用一次性密碼 (One Time Password)
            </label>
            <label class="option-label">
                <input type="radio" name="answer" value="B">
                (B) 使用多因子驗證方式 (Multi-factor authentication)
            </label>
            <label class="option-label">
                <input type="radio" name="answer" value="C">
                (C) 使用雙因子驗證方式 (Two-factor authentication)
            </label>
            <label class="option-label">
                <input type="radio" name="answer" value="D">
                (D) 強化密碼複雜度 (Password Complexity)
            </label>
        </div>

        <div class="action-buttons">
            <button class="btn-submit" onclick="submitAnswer()">提交答案</button>
            <button class="btn-reset" onclick="resetQuiz()">重作一次</button>
        </div>

        <div id="result-msg" class="result-message"></div>
    </section>

    <!-- 解析區域 (初始隱藏) -->
    <div id="analysis-area" class="analysis-section">
        
        <!-- B. 第一步：找關鍵字 -->
        <details open>
            <summary>第一步：找關鍵字</summary>
            <div class="content">
                <p>請圈出題目中的這兩個詞：</p>
                <ul>
                    <li><span class="highlight">憑證填充攻擊 (Credential Stuffing)</span>：這是攻擊的類型，解題的核心線索。</li>
                    <li><span class="highlight">最無效果</span>：題目在問哪一個方法「擋不住」或「對症下藥錯誤」，而非問哪個方法最好。</li>
                </ul>
            </div>
        </details>

        <!-- C. 第二步：白話翻譯 -->
        <details>
            <summary>第二步：白話翻譯</summary>
            <div class="content">
                <p><strong>題目翻譯成高中生聽得懂的話：</strong></p>
                <p>「駭客手上已經拿著一份從別的網站偷來的『正確帳號密碼表』，現在正準備拿這份表單來登入你的網站。請問下列哪一種防禦手段，對這種攻擊方式是完全沒用的？」</p>
            </div>
        </details>

        <!-- D. 第三步：解題思路 -->
        <details>
            <summary>第三步：解題思路</summary>
            <div class="content">
                <p><strong>核心考點：</strong>理解「憑證填充」的運作原理與「密碼複雜度」的侷限性。</p>
                
                <p><strong>解題步驟：</strong></p>
                <ol>
                    <li>確認攻擊流程：駭客不是在「猜」密碼，而是用「已知」的舊密碼去試。</li>
                    <li>檢查防禦邏輯：既然駭客有鑰匙，把鎖芯做得更複雜（密碼複雜度）沒用，因為他手上的鑰匙剛好能開。</li>
                    <li>尋找有效解法：必須加裝「第二道鎖」（2FA/MFA/OTP），讓舊鑰匙失效。</li>
                </ol>

                <hr style="margin: 20px 0; border: 0; border-top: 1px solid #eee;">
                
                <p><strong>攻擊流程圖：</strong></p>
                <div class="flowchart">
                    <div class="flow-box">外洩帳密名單<br>(從別站偷的)</div>
                    <div class="flow-arrow">→</div>
                    <div class="flow-box">自動化程式<br>(去撞你的網站)</div>
                    <div class="flow-arrow">→</div>
                    <div class="flow-box">成功接管帳號<br>(如果你沒設第二道鎖)</div>
                </div>
            </div>
        </details>

        <!-- E. 第四步：選項分析 -->
        <details>
            <summary>第四步：選項分析</summary>
            <div class="content">
                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th>防護手段</th>
                            <th>擋 Credential Stuffing 效果</th>
                            <th>理由（白話解釋）</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>(A) 一次性密碼 (OTP)</td>
                            <td>有效</td>
                            <td>即使駭客有密碼，但他收不到寄到你手機的簡訊代碼，所以登不進去。</td>
                        </tr>
                        <tr>
                            <td>(B) 多因子驗證 (MFA)</td>
                            <td>非常有效</td>
                            <td>需要兩種以上的證據（如：密碼 + 指紋 + 手機），駭客只有密碼沒用。</td>
                        </tr>
                        <tr>
                            <td>(C) 雙因子驗證 (2FA)</td>
                            <td>有效</td>
                            <td>原理同上，多了一道關卡（例如 App 推播確認），駭客過不去。</td>
                        </tr>
                        <tr style="background-color: #fff9c4;">
                            <td>(D) 強化密碼複雜度</td>
                            <td><strong>無效</strong></td>
                            <td>因為駭客用的是「使用者設定過的正確密碼」。不管你規定密碼要多複雜，只要使用者在別處用過且外洩了，這組複雜密碼就是駭客手上的鑰匙。</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </details>

        <!-- F. 觀念補充與延伸 -->
        <details>
            <summary>觀念補充與延伸</summary>
            <div class="content">
                <p><span class="step-label">核心觀念定位</span> 屬於「身分驗證 (Authentication)」章節。這是資安考試的<strong>必考題</strong>。</p>
                
                <p><span class="step-label">定義說明</span></p>
                <p><strong>憑證填充 (Credential Stuffing)：</strong> 利用使用者「一組密碼走天下（在不同網站用相同密碼）」的壞習慣。駭客不破解密碼，而是拿 A 站流出的資料去 B 站「填充」登入。</p>
                
                <p><span class="step-label">觸類旁通：三種攻擊比一比</span></p>
                <ul>
                    <li><strong>Credential Stuffing (憑證填充)：</strong> 拿「鑰匙清單」試開門。針對性高，成功率取決於使用者是否共用密碼。</li>
                    <li><strong>Brute Force (暴力破解)：</strong> 坐在門口從 0000 試到 9999。針對單一帳號，嘗試所有組合。 -> <em>這個才需要「密碼複雜度」來防禦。</em></li>
                    <li><strong>Password Spraying (密碼噴灑)：</strong> 拿「一把萬能鑰匙（如 123456）」去試「所有住戶」的門。避免因為試錯太多次被鎖定。</li>
                </ul>
            </div>
        </details>

        <!-- G. 記憶口訣 -->
        <details>
            <summary>記憶口訣</summary>
            <div class="content">
                <div style="background-color: #e8f4f8; padding: 15px; border-radius: 6px; font-size: 1.1em; font-weight: bold; text-align: center;">
                    「填充就是撞庫，拿舊鑰匙開門。<br>
                    密碼再難無用，多設道鎖才穩。」
                </div>
                <p style="margin-top: 10px; font-size: 0.9em; color: #666;">註：撞庫是中國用語，台灣多稱憑證填充，但口訣借用「庫（資料庫）」字較好記。</p>
            </div>
        </details>

        <!-- H. 常見陷阱 -->
        <details>
            <summary>常見陷阱</summary>
            <div class="content">
                <p><strong>1. 心理盲點：</strong></p>
                <p>學生看到「資安防護」直覺就會選「密碼越複雜越好」。請記得：<span class="highlight">對症下藥</span>。感冒藥（密碼複雜度）治不好骨折（憑證外洩）。</p>
                
                <p><strong>2. 混淆觀念：</strong></p>
                <p>容易把「憑證填充」跟「暴力破解」搞混。如果是暴力破解，答案 D 就是有效的。所以<span class="highlight">看題目第一句話</span>至關重要。</p>
                
                <p><strong>3. 避坑指南：</strong></p>
                <p>看到題目寫「外洩清單」、「撞庫」、「其他網站流出」關鍵字 -> 密碼複雜度無效，MFA 有效。</p>
            </div>
        </details>

        <!-- I. 正確答案 -->
        <details>
            <summary>正確答案</summary>
            <div class="content">
                <p style="font-size: 1.2em;"><strong>正確答案：(D)</strong></p>
                <p><strong>一句話理由：</strong> 因為駭客已經擁有正確的密碼，無需猜測，所以增加密碼複雜度擋不住他。</p>
            </div>
        </details>

        <!-- J. 自我檢測 -->
        <details>
            <summary>自我檢測</summary>
            <div class="content">
                <ol>
                    <li>如果題目改成「防止駭客使用暴力破解法猜測密碼」，這題答案該選什麼？</li>
                    <li>如果在登入頁面加入「圖形驗證碼 (CAPTCHA)」，對於防範憑證填充攻擊有效嗎？為什麼？</li>
                    <li>為什麼「定期更換密碼」對憑證填充攻擊有一定的防禦效果？</li>
                </ol>
                
                <!-- 新增參考解答區塊 -->
                <details style="margin-top: 20px; border: 1px dashed #aaa; background-color: #fff;">
                    <summary style="background-color: #eee; font-size: 0.9em;">點此查看參考解答</summary>
                    <div class="content" style="background-color: #fafafa;">
                        <ol>
                            <li style="margin-bottom: 15px;">
                                <strong>答案：(D) 強化密碼複雜度。</strong><br>
                                理由：暴力破解是嘗試所有可能的字元組合。密碼越長、越複雜（包含大小寫、數字、符號），組合總數呈指數成長，駭客破解所需的時間成本就會高到不切實際。
                            </li>
                            <li style="margin-bottom: 15px;">
                                <strong>答案：有效。</strong><br>
                                理由：憑證填充攻擊通常依賴「自動化腳本」快速大量嘗試登入。圖形驗證碼 (CAPTCHA) 的設計目的就是區分「人」與「機器」，能有效阻擋自動化程式的撞庫行為。
                            </li>
                            <li>
                                <strong>答案：因為讓舊憑證失效。</strong><br>
                                理由：駭客手上的外洩名單通常是「過去」某個時間點流出的。如果使用者更改了密碼，駭客手上那組舊密碼就無法通過驗證，從而阻斷攻擊。
                            </li>
                        </ol>
                    </div>
                </details>
            </div>
        </details>

    </div>
</div>

<script>
    function submitAnswer() {
        // 取得使用者選擇
        const options = document.getElementsByName('answer');
        let selectedValue = null;
        for (const option of options) {
            if (option.checked) {
                selectedValue = option.value;
                break;
            }
        }

        const resultMsg = document.getElementById('result-msg');
        const analysisArea = document.getElementById('analysis-area');

        // 未作答檢核
        if (!selectedValue) {
            alert('請先選擇一個答案！');
            return;
        }

        // 顯示解析區塊
        analysisArea.style.display = 'block';

        // 判斷對錯
        if (selectedValue === 'D') {
            resultMsg.textContent = '正確！(D) 是正解。請閱讀下方解析了解原因。';
            resultMsg.className = 'result-message result-correct';
        } else {
            // 針對錯誤選項的特定提示
            let hint = '錯誤。你可能把「憑證填充」當成「暴力破解」了。';
            hint += ' 憑證填充是用「已經偷到的正確密碼」來登入，所以密碼設得再複雜，駭客照樣能進去。請看下方「選項分析」與「常見陷阱」。';
            
            resultMsg.textContent = hint;
            resultMsg.className = 'result-message result-wrong';
        }
        
        // 顯示結果訊息
        resultMsg.style.display = 'block';

        // 自動捲動到結果處
        resultMsg.scrollIntoView({ behavior: 'smooth', block: 'center' });
    }

    function resetQuiz() {
        // 清空選項
        const options = document.getElementsByName('answer');
        for (const option of options) {
            option.checked = false;
        }

        // 隱藏結果訊息與解析
        document.getElementById('result-msg').style.display = 'none';
        document.getElementById('analysis-area').style.display = 'none';
        
        // 重置所有 accordion 回到預設狀態 (只展開第一個，或全部收起，這裡選擇全部收起讓畫面乾淨，或維持預設HTML狀態)
        const details = document.querySelectorAll('details');
        details.forEach((detail, index) => {
            if(index === 0) detail.open = true; // 預設只開第一個
            else detail.open = false;
        });

        // 捲動回頂部
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }
</script>

</body>
</html>