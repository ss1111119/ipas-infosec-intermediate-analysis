<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è³‡å®‰äº‹ä»¶èª¿æŸ¥é¡Œçµ„ï¼šWEBã€DB èˆ‡ AD çš„é€£é–æ”»æ“Š</title>
    <style>
        /* --- èªçŸ¥å‹å–„é…è‰²ç³»çµ± --- */
        :root {
            --body-bg: #f4f7f6;       /* å†·ç°èª¿èƒŒæ™¯ */
            --card-bg: #ffffff;       /* å¡ç‰‡åº•è‰² */
            --text-primary: #2c3e50;  /* æ·±è—ç°æ–‡å­— */
            --text-secondary: #546e7a; /* æ¬¡è¦æ–‡å­— */
            --primary: #2980b9;       /* ä¸»è¦è—è‰² */
            --primary-hover: #1abc9c; /* äº’å‹•æ‡¸åœè‰² */
            --highlight: #f1c40f;     /* è¨˜æ†¶é»ƒæ¨™è¨˜ */
            --success-bg: #e8f5e9;    /* æ­£ç¢ºèƒŒæ™¯ */
            --success-text: #2e7d32;  /* æ­£ç¢ºæ–‡å­— */
            --error-bg: #fce4ec;      /* éŒ¯èª¤èƒŒæ™¯ */
            --error-text: #c62828;    /* éŒ¯èª¤æ–‡å­— */
            --border-color: #ecf0f1;
            --shadow: 0 4px 20px rgba(0,0,0,0.08);
            
            /* æ¨™ç±¤è‰²å½© */
            --tag-law: #607d8b;
            --tag-sec: #c0392b;
            --tag-mgm: #d35400;
        }

        /* --- åŸºç¤è¨­å®š --- */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: system-ui, "Noto Sans TC", sans-serif;
            background-color: var(--body-bg);
            color: var(--text-primary);
            line-height: 1.6;
        }

        /* --- ç‰ˆå‹èˆ‡éŸ¿æ‡‰å¼ --- */
        .page-container {
            max-width: 960px;
            width: 100%;
            margin: 40px auto;
            padding: 40px;
            background-color: var(--card-bg);
            box-shadow: var(--shadow);
            border-radius: 16px;
        }

        @media (max-width: 768px) {
            .page-container {
                margin: 16px;
                padding: 20px;
                border-radius: 12px;
                width: auto;
            }
            
            h1 { font-size: 24px; }
            h2 { font-size: 20px; }
            h3 { font-size: 18px; }
        }

        /* --- 1. Header (é¡Œçµ„å°ˆç”¨) --- */
        .group-header {
            margin-bottom: 32px;
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 24px;
        }

        .group-header h1 {
            color: var(--primary);
            margin-bottom: 16px;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--text-secondary);
        }

        .progress-bar {
            width: 100%;
            height: 10px;
            background-color: #ecf0f1;
            border-radius: 5px;
            overflow: hidden;
            margin-bottom: 12px;
        }

        .progress-fill {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, var(--primary), #3498db);
            transition: width 400ms ease;
        }

        .completion-status {
            font-size: 14px;
            font-weight: bold;
        }
        
        .status-pending { color: var(--text-secondary); }
        .status-done { color: var(--success-text); }

        /* --- 2. Context (é¡Œçµ„èƒŒæ™¯) --- */
        .group-context {
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 32px;
            border-left: 4px solid var(--primary);
        }

        /* --- 3. Tabs (åˆ‡é¡Œæ©Ÿåˆ¶) --- */
        .tabs-container {
            display: flex;
            gap: 8px;
            margin-bottom: 24px;
            overflow-x: auto;
            padding-bottom: 4px; /* Scrollbar space */
        }

        .tab-btn {
            background: #fff;
            border: 1px solid var(--border-color);
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 500;
            color: var(--text-secondary);
            transition: all 200ms ease;
            min-height: 48px;
            white-space: nowrap;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .tab-btn:hover {
            background-color: #e3f2fd;
            transform: translateY(-2px);
            color: var(--primary);
        }

        .tab-btn.active {
            background-color: var(--primary);
            color: white;
            border-color: var(--primary);
            box-shadow: 0 4px 8px rgba(41,128,185,0.3);
        }

        .tab-status {
            font-size: 14px;
            font-weight: bold;
        }

        /* --- 4. Tab å…§å®¹ (å–®é¡Œæ¯ç‰ˆ) --- */
        .question-content {
            display: none; /* JS åˆ‡æ› */
            animation: fadeIn 300ms ease;
        }
        
        .question-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(5px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* é¡Œå…§ Header */
        .q-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }
        
        .q-badge {
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 14px;
            font-weight: bold;
        }
        
        .q-badge.pending { background: #eee; color: #666; }
        .q-badge.correct { background: var(--success-bg); color: var(--success-text); }
        .q-badge.wrong { background: var(--error-bg); color: var(--error-text); }

        /* é¡Œå…§ Context & Image */
        .q-context-box {
            margin-bottom: 20px;
        }
        
        .q-image {
            max-width: 100%;
            height: auto;
            display: block;
            margin: 10px 0 20px 0;
            border-radius: 8px;
            border: 1px solid #ddd;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        /* é¡Œç›®æ•˜è¿°èˆ‡é¸é … */
        .question-text {
            font-size: 1.125rem;
            font-weight: 600;
            margin-bottom: 20px;
            color: var(--text-primary);
        }

        .options-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-bottom: 24px;
        }

        .option-label {
            display: flex;
            align-items: flex-start;
            padding: 16px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            cursor: pointer;
            transition: all 150ms ease;
            background: #fff;
        }

        .option-label:hover {
            background-color: #e3f2fd;
            border-color: #90caf9;
        }

        .option-label input {
            margin-top: 4px;
            margin-right: 12px;
            transform: scale(1.2);
            cursor: pointer;
        }
        
        /* é¸ä¸­æ¨£å¼ (ç”± JS æ·»åŠ  class) */
        .option-label.selected {
            background-color: #bbdefb;
            border-color: var(--primary);
        }
        
        .option-label.disabled {
            cursor: not-allowed;
            opacity: 0.7;
        }
        
        .option-text {
            width: 100%;
            word-break: break-word;
        }

        /* Action Area */
        .action-area {
            margin-bottom: 24px;
        }

        .btn-primary {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 12px 32px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 200ms ease;
            min-height: 44px;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(41,128,185,0.3);
            background-color: #2980b9;
        }

        .btn-retry {
            background-color: #7f8c8d;
        }
        
        .btn-retry:hover {
            background-color: #95a5a6;
            box-shadow: 0 4px 12px rgba(127,140,141,0.3);
        }

        /* Feedback Area */
        .feedback {
            padding: 16px;
            border-radius: 8px;
            margin-bottom: 24px;
            display: none; /* é è¨­éš±è— */
            animation: fadeInUp 300ms ease;
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .feedback.success {
            background-color: var(--success-bg);
            border-left: 4px solid var(--success-text);
            color: var(--success-text);
        }

        .feedback.error {
            background-color: var(--error-bg);
            border-left: 4px solid var(--error-text);
            color: var(--error-text);
        }

        /* Explain Area */
        details {
            background-color: #fff;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            margin-bottom: 16px;
            overflow: hidden;
        }

        summary {
            padding: 16px;
            cursor: pointer;
            font-weight: 600;
            background-color: #f8f9fa;
            list-style: none; /* Remove default triangle */
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        summary::after {
            content: '+';
            font-size: 20px;
            font-weight: bold;
        }
        
        details[open] summary::after {
            content: '-';
        }

        .explain-content {
            padding: 20px;
            background-color: #fff;
        }

        .explain-section {
            margin-bottom: 20px;
            padding: 16px;
            background-color: #f8f9fa;
            border-left: 4px solid var(--primary);
            border-radius: 0 4px 4px 0;
        }

        /* Specific style for Self Check section when not using details wrapper */
        .self-check-area {
            display: none; /* Hidden initially */
            border-left-color: #8e44ad; /* Purple for Self Check */
        }

        .explain-section h4 {
            margin-bottom: 12px;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .self-check-area h4 {
            color: #8e44ad;
        }

        /* Inner details for answers */
        .self-check-area details {
            margin-top: 10px;
            margin-bottom: 10px;
            border: 1px solid #ddd;
        }
        
        .self-check-area summary {
            background-color: #f0f0f0;
            font-size: 0.9em;
            padding: 10px 16px;
        }

        mark {
            background-color: var(--highlight);
            color: var(--text-primary);
            padding: 0 4px;
            border-radius: 2px;
        }
        
        /* Tags */
        .tag {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 12px;
            color: white;
            margin-right: 4px;
            vertical-align: middle;
        }
        
        .tag.sec { background-color: var(--tag-sec); }
        .tag.mgm { background-color: var(--tag-mgm); }

    </style>
</head>
<body>

<div class="page-container">
    <!-- 1. Header -->
    <header class="group-header">
        <h1>è³‡å®‰äº‹ä»¶èª¿æŸ¥é¡Œçµ„ï¼šWEBã€DB èˆ‡ AD çš„é€£é–æ”»æ“Š</h1>
        <div class="progress-info">
            <span id="progress-text">å·²å®Œæˆï¼š0 / 4</span>
            <span id="progress-percent">0%</span>
        </div>
        <div class="progress-bar">
            <div id="progress-fill" class="progress-fill"></div>
        </div>
        <div class="completion-status">
            <span id="completion-msg" class="status-pending">ğŸ“ å°šæœªå®Œæˆ</span>
        </div>
    </header>

    <!-- 2. Context -->
    <div class="group-context">
        <h3>ğŸ“‚ æ¡ˆä»¶èƒŒæ™¯</h3>
        <p style="margin-top: 8px;">æœ¬é¡Œçµ„æ¨¡æ“¬ä¸€æ¬¡å®Œæ•´çš„ä¼æ¥­å…¥ä¾µäº‹ä»¶èª¿æŸ¥ã€‚ä½ å°‡æ‰®æ¼”è³‡å®‰å°çµ„æˆå“¡ï¼Œä¾åºæª¢è¦– <strong>WEB ä¸»æ©Ÿ</strong>ã€<strong>è³‡æ–™åº«ä¼ºæœå™¨</strong>èˆ‡ <strong>AD ä¸»æ©Ÿ</strong>çš„è·¡è­‰ï¼Œåˆ¤æ–·æ”»æ“Šè€…ä½¿ç”¨çš„æ‰‹æ³•ï¼ˆLog Injectionã€LFIã€Persistenceã€Pass-the-Ticketï¼‰ä¸¦æå‡ºé˜²è­·å»ºè­°ã€‚</p>
    </div>

    <!-- 3. Tabs -->
    <div class="tabs-container" id="tabs-container">
        <!-- JS generates buttons here -->
    </div>

    <!-- 4. Question Contents -->
    <div id="questions-wrapper">
        <!-- JS generates question contents here -->
    </div>
</div>

<script>
/**
 * Data Structure
 */
const quizData = {
    groupName: "è³‡å®‰äº‹ä»¶èª¿æŸ¥é¡Œçµ„ï¼šWEBã€DB èˆ‡ AD çš„é€£é–æ”»æ“Š",
    questions: [
        {
            id: 5,
            type: "single",
            title: "ç¬¬ 5 é¡Œ",
            image: "https://i.meee.com.tw/McfwHw8.png",
            question: "åœ¨é€²è¡Œä¾‹è¡Œæ€§çš„æª¢æŸ¥æ™‚ï¼Œä½ ç™¼ç¾åœ¨ WEB ä¸»æ©Ÿä¸Šå‡ºç¾äº†é™„åœ–ä¸€çš„ log è¨˜éŒ„ï¼Œé€™å€‹ log è¨˜éŒ„ä¸­å‡ºç¾äº†ç™»å…¥éŒ¯èª¤çš„è¨Šæ¯ï¼Œä½†é€™å€‹è¨Šæ¯ææ€•ä¸æ˜¯ç™»å…¥éŒ¯èª¤è€Œå·²ï¼Œé€™æ¨£çš„ log è¨˜éŒ„å…§å®¹ï¼Œä½ å¯èƒ½å·²ç¶“é­å—åˆ°ä¸‹åˆ—ä½•ç¨®æ”»æ“Šï¼Ÿ",
            options: [
                { id: "A", text: "ä¿®æ”¹ç¶²ç«™çš„é…ç½®æ–‡ä»¶ä»¥ç²å¾—ç®¡ç†å“¡æ¬Šé™" },
                { id: "B", text: "åˆ©ç”¨ SQL æ³¨å…¥æ¼æ´ä¾†æ§åˆ¶è³‡æ–™åº«ï¼Œé€²è€ŒåŸ·è¡Œä»£ç¢¼" },
                { id: "C", text: "é€šéæ³¨å…¥æƒ¡æ„æŒ‡ä»¤åˆ° SSH æ—¥èªŒæ–‡ä»¶ä¸­ï¼Œç„¶å¾Œé€šé LFIï¼ˆæœ¬æ©Ÿæª”æ¡ˆåŒ…å«ï¼‰åŠ è¼‰è©²æ—¥èªŒæ–‡ä»¶ä¾†åŸ·è¡Œæƒ¡æ„æŒ‡ä»¤" },
                { id: "D", text: "ç¶²ç«™è¢«ç™¼èµ·äº† XSS Server Side çš„æ”»æ“Š" }
            ],
            correctAnswer: ["C"],
            reason: "æ—¥èªŒä¸­å‡ºç¾æƒ¡æ„æŒ‡ä»¤ç‰‡æ®µï¼Œç¬¦åˆã€Œå…ˆæ±¡æŸ“ SSH æ—¥èªŒï¼Œå†é€é LFI è¼‰å…¥æ—¥èªŒè§¸ç™¼åŸ·è¡Œã€çš„æ”»æ“Šéˆã€‚",
            explanation: `
                <div class="explain-section">
                    <h4>ğŸ” ç¬¬ä¸€æ­¥ï¼šæ‰¾é—œéµå­—</h4>
                    <p><strong>é™„åœ–ä¸€ / auth.log / sshd</strong>ï¼šLinux å¸¸è¦‹ SSH é©—è­‰æ—¥èªŒï¼Œé—œéµåœ¨ã€Œç™»å…¥å¤±æ•—å…§å®¹ã€ã€‚<br>
                    <strong>Failed password / invalid user</strong>ï¼šè¡¨é¢åƒçˆ†ç ´ï¼Œä½†é¡Œç›®æš—ç¤ºã€Œä¸åªæ˜¯ç™»å…¥éŒ¯èª¤ã€ã€‚<br>
                    <strong>php system($_GET[...])</strong>ï¼šå…¸å‹çš„æƒ¡æ„ PHP ç¨‹å¼ç¢¼ç‰‡æ®µã€‚<br>
                    <strong>LFI + log</strong>ï¼šæŠŠæ—¥èªŒç•¶æˆå¯è¢«ç¶²ç«™è¼‰å…¥çš„æª”æ¡ˆï¼Œé€²è€ŒåŸ·è¡Œæƒ¡æ„æŒ‡ä»¤ã€‚</p>
                </div>
                <div class="explain-section">
                    <h4>ğŸ—£ï¸ ç¬¬äºŒæ­¥ï¼šç™½è©±ç¿»è­¯</h4>
                    <p>ä½ çœ‹åˆ°çš„æ˜¯ã€ŒSSH ç™»å…¥å¤±æ•—ã€çš„ç´€éŒ„ï¼Œä½†è£¡é¢å±…ç„¶æ··é€²äº†åƒ PHP çš„æƒ¡æ„æŒ‡ä»¤ç‰‡æ®µã€‚é€™é€šå¸¸ä¸æ˜¯å–®ç´”æœ‰äººæ‰“éŒ¯å¯†ç¢¼ï¼Œè€Œæ˜¯æ”»æ“Šè€…æ•…æ„æŠŠæƒ¡æ„å­—ä¸²å¯«é€²æ—¥èªŒï¼Œæ¥è‘—åˆ©ç”¨ç¶²ç«™çš„ã€Œè®€æª”æ¼æ´ï¼ˆLFIï¼‰ã€å»è¼‰å…¥é‚£å€‹æ—¥èªŒï¼Œè®“æƒ¡æ„å­—ä¸²è¢«ç•¶ä½œç¨‹å¼è·‘èµ·ä¾†ã€‚</p>
                </div>
                <div class="explain-section">
                    <h4>ğŸ’¡ ç¬¬ä¸‰æ­¥ï¼šè§£é¡Œæ€è·¯</h4>
                    <p><strong>è§£é¡Œæ­¥é©Ÿï¼š</strong><br>1. å…ˆç¢ºèªæ—¥èªŒé¡å‹ï¼šauth.log/sshd æ˜¯ SSH ç™»å…¥äº‹ä»¶è¨˜éŒ„ã€‚<br>2. çœ‹ã€Œå¯ç–‘æ¬„ä½ã€æ˜¯å¦å‡ºç¾ç¨‹å¼ç¢¼ï¼šä¾‹å¦‚æŠŠ code ç•¶å¸³è™Ÿè¼¸å…¥ã€‚<br>3. æ¨å›æ”»æ“Šéˆï¼šLog Poisoning + LFIã€‚</p>
                    <p><strong>åŸç†èˆ‡è¦å‰‡ï¼š</strong>æ—¥èªŒæœ¬åªæ˜¯æ–‡å­—ï¼Œä½†è‹¥ç¶²ç«™æœ‰ LFIï¼Œæ”»æ“Šè€…èƒ½æŒ‡å®šè¼‰å…¥ã€Œè¢«æ±¡æŸ“çš„æ—¥èªŒã€ï¼Œä½¿å…¶è¢«è§£æåŸ·è¡Œã€‚</p>
                    <p><strong>ç”Ÿæ´»æ¯”å–»ï¼š</strong>æŠŠã€Œæƒ¡ä½œåŠ‡ç´™æ¢ã€å¡é€²å…¬å¸å…¬å‘Šæ¬„ï¼ˆå¯«å…¥æ—¥èªŒï¼‰ï¼Œå†åˆ©ç”¨ã€Œå¤§å®¶éƒ½æœƒç…§è‘—å…¬å‘Šæ¬„å…§å®¹åšäº‹ã€çš„åˆ¶åº¦æ¼æ´ï¼ˆLFIï¼‰ï¼Œé–“æ¥æŒ‡æ®åˆ¥äººåšå£äº‹ã€‚</p>
                </div>
                <div class="explain-section">
                    <h4>âš–ï¸ ç¬¬å››æ­¥ï¼šé¸é …åˆ†æ</h4>
                    <p>(A) éŒ¯ã€‚ä¸åƒæ”¹é…ç½®æª”ï¼Œé‚£æœƒæœ‰æª”æ¡ˆè®Šæ›´ç·šç´¢ã€‚<br>(B) éŒ¯ã€‚SQL æ³¨å…¥ä¸æœƒåœ¨ SSH log å‡ºç¾ PHP æŒ‡ä»¤ã€‚<br>(C) å°ã€‚æ—¥èªŒæ··å…¥æƒ¡æ„å­—ä¸² + LFI è¼‰å…¥åŸ·è¡Œã€‚<br>(D) éŒ¯ã€‚XSS å½±éŸ¿ç€è¦½å™¨ï¼Œä¸æœƒå‡ºç¾åœ¨ SSH logã€‚</p>
                </div>
                <div class="explain-section">
                    <h4>ğŸ“š è§€å¿µè£œå……èˆ‡å»¶ä¼¸</h4>
                    <p><strong>æ³•æ¢æˆ–å®šç¾©ï¼š</strong><br>LFI (Local File Inclusion)ï¼šåˆ©ç”¨ç¶²ç«™ç¼ºé™·è®€å–æœ¬æ©Ÿæª”æ¡ˆã€‚<br>Log Poisoningï¼šæŠŠå¯åŸ·è¡Œå­—ä¸²å¯«é€²æ—¥èªŒã€‚</p>
                    <p><strong>è§¸é¡æ—é€šï¼š</strong>è‹¥é¡Œç›®æ˜¯è®€å– /var/log/access.log ä¸”æœ‰ PHP tagsï¼Œä¹Ÿæ˜¯ Log Poisoningã€‚</p>
                </div>
                <div class="explain-section">
                    <h4>ğŸ§  è¨˜æ†¶å£è¨£</h4>
                    <p>ã€Œæ—¥èªŒè¢«å¡ç¢¼ï¼Œå†ç”¨ LFI æŠŠå®ƒè¼‰ï¼›ä¸æ˜¯ç™»å…¥éŒ¯ï¼Œæ˜¯æ—¥èªŒä¸­æ‹›åœ¨ã€‚ã€</p>
                </div>
                <div class="explain-section">
                    <h4>âš ï¸ å¸¸è¦‹é™·é˜±</h4>
                    <p><strong>å¿ƒç†ç›²é»ï¼š</strong>çœ‹åˆ° "Failed password" å°±é¸æš´åŠ›ç ´è§£ã€‚<br><strong>é¿å‘æŒ‡å—ï¼š</strong>çœ‹åˆ° log è£¡æœ‰ &lt;?phpã€system(ï¼Œå„ªå…ˆå¾€ Log Injection æƒ³ã€‚</p>
                </div>
            `,
            selfCheck: `
                <h4>ğŸ§  è‡ªæˆ‘æª¢æ¸¬</h4>
                <p><strong>Q1ï¼š</strong>å¦‚æœç¶²ç«™æœ‰ LFIï¼Œä½†æ—¥èªŒæ²’æœ‰è¢«æ±¡æŸ“ï¼Œæ”»æ“Šè€…é‚„å¯èƒ½è®€åˆ°å“ªäº›æ•æ„Ÿæª”ï¼Ÿ</p>
                <details><summary>é¡¯ç¤ºç­”æ¡ˆ</summary><p>ä¾‹ï¼š/etc/passwdã€è¨­å®šæª” (config.php)ã€é‡‘é‘°æª”ã€ç’°å¢ƒè®Šæ•¸æª”ã€ç¶²ç«™åŸå§‹ç¢¼ç­‰ã€‚</p></details>
                <hr style="margin: 10px 0; border: 0; border-top: 1px dashed #ccc;">
                <p><strong>Q2ï¼š</strong>è‹¥è¦é˜²æ­¢æ­¤é¡æ”»æ“Šï¼Œé‡å°ã€ŒLFIã€èˆ‡ã€Œæ—¥èªŒã€å„èªªä¸€å€‹é˜²è­·é‡é»ã€‚</p>
                <details><summary>é¡¯ç¤ºç­”æ¡ˆ</summary><p>LFIï¼šç™½åå–®é™åˆ¶è¼‰å…¥è·¯å¾‘ã€ç¦ç”¨å‹•æ…‹ includeã€‚æ—¥èªŒï¼šé¿å…å¯æ§è¼¸å…¥ç›´æ¥å¯«å…¥ã€æ¬Šé™éš”é›¢ã€‚</p></details>
                <hr style="margin: 10px 0; border: 0; border-top: 1px dashed #ccc;">
                <p><strong>Q3ï¼š</strong>å¦‚æœæ—¥èªŒè¢«è¼‰å…¥å°±æœƒåŸ·è¡Œï¼Œä»£è¡¨ç¶²ç«™ç«¯å¯èƒ½ç”¨ä»€éº¼æ–¹å¼è™•ç†è¢«è¼‰å…¥æª”æ¡ˆï¼Ÿ</p>
                <details><summary>é¡¯ç¤ºç­”æ¡ˆ</summary><p>å¯èƒ½æ˜¯ä»¥å¯è§£ææ–¹å¼ include/requireï¼ˆå¦‚ PHPï¼‰æˆ–ä»¥æ¨¡æ¿å¼•æ“è§£æã€‚</p></details>
            `
        },
        {
            id: 6,
            type: "single",
            title: "ç¬¬ 6 é¡Œ",
            image: "https://i.meee.com.tw/BzaceLK.png",
            question: "åœ¨ä½ è‡ªè¦ºåˆ°å…¬å¸çš„ç¶²ç«™ä¼ºæœå™¨å¯èƒ½å…¥ä¾µçš„åŒæ™‚ï¼Œä½ ç™¼ç¾åœ¨è³‡æ–™åº«ä¼ºæœå™¨çš„å·¥ä½œæ’ç¨‹ä¸­å‡ºç¾äº†ä¸€å€‹åç‚º windowsupdate çš„å·¥ä½œï¼ŒåŸ·è¡Œçš„å…§å®¹å¦‚é™„åœ–äºŒæ‰€ç¤ºã€‚è«‹å•å°æ–¼ windowsupdate çš„å·¥ä½œå…§å®¹æè¿°ï¼Œä¸‹åˆ—ä½•è€…æ­£ç¢ºï¼Ÿ",
            options: [
                { id: "A", text: "é€™æ˜¯æ®µ PowerShellï¼Œå®ƒè©¦åœ–åœ¨èƒŒæ™¯åŸ·è¡Œï¼Œä¸”æœƒç”¢å‡ºä¸€å€‹åç‚º LSASS çš„ Script" },
                { id: "B", text: "å°±èªªæ˜çœ‹ä¾†å®ƒæ‡‰è©² Windows æ›´æ–°å·¥ä½œ" },
                { id: "C", text: "é€™æ˜¯æ®µ PowerShellï¼Œå®ƒè©¦åœ–ç•¥éåŸ·è¡Œæ”¿ç­–ä¸¦ä¸”è½‰æ› Script ç‚ºåŸ·è¡Œæª”" },
                { id: "D", text: "å°±èªªæ˜çœ‹ä¾†å®ƒæ‡‰è©²æ˜¯æœƒç”¢ç”Ÿä¸€æ”¯å¯é€²è¡Œ Windows æ›´æ–°çš„æª”æ¡ˆ" }
            ],
            correctAnswer: ["C"],
            reason: "æŒ‡ä»¤åŒ…å« -ExecutionPolicy bypass ä¸”å°‡ .ps1 è¼¸å‡ºç‚º .exeï¼Œå±¬æ˜é¡¯æƒ¡æ„å½è£è¡Œç‚ºã€‚",
            explanation: `
                <div class="explain-section">
                    <h4>ğŸ” ç¬¬ä¸€æ­¥ï¼šæ‰¾é—œéµå­—</h4>
                    <p><strong>æ’ç¨‹åç¨± windowsupdate</strong>ï¼šé«˜é¢¨éšªå½è£ï¼ˆçœ‹èµ·ä¾†å¾ˆæ­£å¸¸çš„åå­—ï¼‰ã€‚<br>
                    <strong>powershell.exe -ExecutionPolicy bypass</strong>ï¼š<mark>bypass</mark> æœ¬èº«å°±æ˜¯å¼·çƒˆæƒ¡æ„ç·šç´¢ï¼Œæ„åœ–ç¹éæ”¿ç­–ã€‚<br>
                    <strong>inputFile 'LSASS.ps1' / outputFile 'Winupdate.exe'</strong>ï¼šæŠŠè…³æœ¬è½‰æˆå¯åŸ·è¡Œæª”ï¼Œç¬¦åˆæŒä¹…åŒ– (Persistence) ä½œæ³•ã€‚</p>
                </div>
                <div class="explain-section">
                    <h4>ğŸ—£ï¸ ç¬¬äºŒæ­¥ï¼šç™½è©±ç¿»è­¯</h4>
                    <p>ä½ åœ¨è³‡æ–™åº«ä¼ºæœå™¨çœ‹åˆ°ä¸€å€‹å«ã€Œwindowsupdateã€çš„æ’ç¨‹ï¼Œä½†å®ƒå…¶å¯¦åœ¨è·‘ PowerShellï¼Œé‚„åˆ»æ„è·³éç³»çµ±çš„åŸ·è¡Œæ”¿ç­–ï¼Œä¸¦æŠŠæŸå€‹è…³æœ¬è¼¸å‡ºæˆ .exeã€‚é€™ä¸åƒæ›´æ–°ï¼Œåƒæ˜¯åœ¨æŠŠæƒ¡æ„è…³æœ¬åŒ…æˆç¨‹å¼ï¼Œæ–¹ä¾¿ä»¥å¾Œä¸€ç›´è·‘ã€‚</p>
                </div>
                <div class="explain-section">
                    <h4>ğŸ’¡ ç¬¬ä¸‰æ­¥ï¼šè§£é¡Œæ€è·¯</h4>
                    <p><strong>è§£é¡Œæ­¥é©Ÿï¼š</strong><br>1. çœ‹æœ‰ç„¡ã€Œbypass/hidden/nopã€ç­‰åƒæ•¸ã€‚<br>2. çœ‹è¼¸å…¥/è¼¸å‡ºï¼šæ˜¯å¦æŠŠ .ps1 ç”¢å‡º .exeï¼ˆå½è£ï¼‰ã€‚<br>3. åˆ¤æ–·åˆç†æ€§ï¼šçœŸæ­£çš„ Windows Update ä¸æœƒé€™æ¨£åšã€‚</p>
                    <p><strong>åŸç†èˆ‡è¦å‰‡ï¼š</strong>Execution Policy æ˜¯é˜²å‘†æ©Ÿåˆ¶ï¼Œbypass æ˜¯ç¹éã€‚æŠŠè…³æœ¬åŒ…æˆ exe æœ‰åŠ©æ–¼èº²é¿æª¢æŸ¥ã€‚</p>
                </div>
                <div class="explain-section">
                    <h4>âš–ï¸ ç¬¬å››æ­¥ï¼šé¸é …åˆ†æ</h4>
                    <p>(A) éŒ¯ã€‚å®ƒä¸æ˜¯ç”¢å‡º Scriptï¼Œè€Œæ˜¯å°‡ ps1 è½‰ç‚º exeã€‚<br>(B) éŒ¯ã€‚å…§å®¹ã€Œbypass + ç”¢ exeã€ä¸ç¬¦åˆæ­£å¸¸æ›´æ–°æµç¨‹ã€‚<br>(C) å°ã€‚æœ‰ bypass ä¸”è¼¸å‡º exeã€‚<br>(D) éŒ¯ã€‚ä¸èƒ½å› ç‚ºæª”åå°±èªç‚ºå®ƒèƒ½æ›´æ–°ã€‚</p>
                </div>
                <div class="explain-section">
                    <h4>ğŸ“š è§€å¿µè£œå……èˆ‡å»¶ä¼¸</h4>
                    <p><strong>æ³•æ¢æˆ–å®šç¾©ï¼š</strong>Persistence (æŒä¹…åŒ–)ï¼šç•™ä¸‹å¯é‡è¤‡å›ä¾†çš„æ©Ÿåˆ¶ã€‚<br>ExecutionPolicy bypassï¼šç¹é PowerShell åŸ·è¡Œé™åˆ¶ã€‚</p>
                    <p><strong>è§¸é¡æ—é€šï¼š</strong>æ’ç¨‹åç¨±æ›æˆ GoogleUpdate/AdobeUpdateï¼Œæœ¬è³ªä»æ˜¯ã€Œçœ‹å…§å®¹ï¼Œä¸çœ‹åå­—ã€ã€‚</p>
                </div>
                <div class="explain-section">
                    <h4>ğŸ§  è¨˜æ†¶å£è¨£</h4>
                    <p>ã€Œåå­—å«æ›´æ–°ä¸ä»£è¡¨æ›´æ–°ï¼›çœ‹åˆ° bypass å¤šåŠæ˜¯å£å¿ƒã€‚ã€</p>
                </div>
                <div class="explain-section">
                    <h4>âš ï¸ å¸¸è¦‹é™·é˜±</h4>
                    <p><strong>å¿ƒç†ç›²é»ï¼š</strong>å¤ªç›¸ä¿¡ç³»çµ±å…§å»ºåç¨± (windowsupdate)ã€‚<br><strong>é¿å‘æŒ‡å—ï¼š</strong>å…ˆçœ‹æŒ‡ä»¤åˆ—åƒæ•¸ï¼Œç‰¹åˆ¥æ˜¯ bypassã€hiddenã€‚</p>
                </div>
            `,
            selfCheck: `
                <h4>ğŸ§  è‡ªæˆ‘æª¢æ¸¬</h4>
                <p><strong>Q1ï¼š</strong>ç‚ºä»€éº¼æ”»æ“Šè€…å–œæ­¡ç”¨ã€Œwindowsupdateã€é€™ç¨®åå­—ï¼Ÿ</p>
                <details><summary>é¡¯ç¤ºç­”æ¡ˆ</summary><p>é™ä½è¢«ç®¡ç†å“¡æ³¨æ„æ©Ÿç‡ã€æ··å…¥æ­£å¸¸ç¶­é‹å·¥ä½œæ¸…å–®ã€‚</p></details>
                <hr style="margin: 10px 0; border: 0; border-top: 1px dashed #ccc;">
                <p><strong>Q2ï¼š</strong>ä½ æœƒç”¨å“ªäº›æ–¹å¼é©—è­‰ Winupdate.exe æ˜¯å¦æƒ¡æ„ï¼Ÿè‡³å°‘åˆ— 2 å€‹ã€‚</p>
                <details><summary>é¡¯ç¤ºç­”æ¡ˆ</summary><p>æª”æ¡ˆé›œæ¹Šæ¯”å° (VirusTotal)ã€æ•¸ä½ç°½ç« æª¢æŸ¥ã€æ²™ç®±è¡Œç‚ºåˆ†æã€‚</p></details>
                <hr style="margin: 10px 0; border: 0; border-top: 1px dashed #ccc;">
                <p><strong>Q3ï¼š</strong>è‹¥è¦é™ä½æ­¤é¡é¢¨éšªï¼Œæ’ç¨‹èˆ‡ PowerShell å„åšä¸€å€‹ç®¡æ§é‡é»ã€‚</p>
                <details><summary>é¡¯ç¤ºç­”æ¡ˆ</summary><p>æ’ç¨‹ï¼šé™åˆ¶å»ºç«‹æ¬Šé™èˆ‡ç¨½æ ¸ï¼›PowerShellï¼šScript Block Loggingã€å•Ÿç”¨ AMSIã€‚</p></details>
            `
        },
        {
            id: 7,
            type: "single",
            title: "ç¬¬ 7 é¡Œ",
            image: "https://i.meee.com.tw/RaBrThA.png",
            question: "ç•¶è³‡å®‰å°çµ„é–‹å§‹èª¿æŸ¥é€™å€‹äº‹ä»¶æ™‚ï¼Œåœ¨ AD ä¸»æ©Ÿä¸Šç™¼ç¾äº†é™„åœ–ä¸‰çš„å…§å®¹ï¼ˆå¤§é‡ .kirbi æª”æ¡ˆèˆ‡ mimikatzï¼‰ã€‚è«‹å•ä½ é­å—äº†ä»€éº¼é¡å‹çš„æ”»æ“Šï¼Ÿ",
            options: [
                { id: "A", text: "Denial of Service æ”»æ“Š" },
                { id: "B", text: "Pass the Ticket æ”»æ“Š" },
                { id: "C", text: "Buffer Overflow æ”»æ“Š" },
                { id: "D", text: "Directory Sync æ”»æ“Š" }
            ],
            correctAnswer: ["B"],
            reason: ".kirbi ç¥¨è­‰æª”èˆ‡ mimikatz ç·šç´¢é«˜åº¦æŒ‡å‘ç«Šå–ä¸¦é‡æ”¾ Kerberos ç¥¨è­‰çš„ Pass-the-Ticketã€‚",
            explanation: `
                <div class="explain-section">
                    <h4>ğŸ” ç¬¬ä¸€æ­¥ï¼šæ‰¾é—œéµå­—</h4>
                    <p><strong>AD ä¸»æ©Ÿ</strong>ï¼šèº«åˆ†é©—è­‰æ ¸å¿ƒã€‚<br>
                    <strong>.kirbi æª”</strong>ï¼šå¸¸è¦‹æ˜¯ <mark>Kerberos ç¥¨è­‰ (Ticket)</mark> çš„æª”æ¡ˆå½¢å¼ã€‚<br>
                    <strong>mimikatz</strong>ï¼šå¸¸è¦‹ç”¨æ–¼æŠ“å–èªè­‰è³‡æ–™/ç¥¨è­‰çš„å·¥å…·ç·šç´¢ã€‚</p>
                </div>
                <div class="explain-section">
                    <h4>ğŸ—£ï¸ ç¬¬äºŒæ­¥ï¼šç™½è©±ç¿»è­¯</h4>
                    <p>ä½ åœ¨ AD ä¸»æ©Ÿçœ‹åˆ°ä¸€å † .kirbiï¼ˆç¥¨è­‰æª”ï¼‰è·Ÿ mimikatzã€‚é€™ä»£è¡¨æ”»æ“Šè€…å¯èƒ½å·åˆ°äº† Kerberos ç¥¨è­‰ï¼Œæ¥è‘—ç›´æ¥æ‹¿é‚£å¼µã€Œé€šè¡Œè­‰ã€å»å‡å†’ä½¿ç”¨è€…ç™»å…¥ï¼Œä¸ç”¨çŸ¥é“å¯†ç¢¼ï¼Œé€™å°±æ˜¯ Pass-the-Ticketã€‚</p>
                </div>
                <div class="explain-section">
                    <h4>ğŸ’¡ ç¬¬ä¸‰æ­¥ï¼šè§£é¡Œæ€è·¯</h4>
                    <p><strong>è§£é¡Œæ­¥é©Ÿï¼š</strong><br>1. çœ‹åˆ° .kirbi â†’ è¯æƒ³åˆ° Kerberos Ticketã€‚<br>2. çœ‹åˆ° mimikatz â†’ è¯æƒ³åˆ°æ“·å–ç¥¨è­‰ã€‚<br>3. å…©è€…åˆä¸€ â†’ Pass-the-Ticketã€‚</p>
                    <p><strong>åŸç†èˆ‡è¦å‰‡ï¼š</strong>Kerberos ä¸­ç¥¨è­‰ä¸€æ—¦è¢«å·èµ°ï¼Œå¯è¢«é‡æ”¾ (Replay)ã€‚PtT æ ¸å¿ƒæ˜¯ä¸éœ€å¯†ç¢¼ï¼Œé ç¥¨è­‰å°±èƒ½å†’ç”¨èº«åˆ†ã€‚</p>
                </div>
                <div class="explain-section">
                    <h4>âš–ï¸ ç¬¬å››æ­¥ï¼šé¸é …åˆ†æ</h4>
                    <p>(A) éŒ¯ã€‚DoS æœƒæµé‡æš´å¢ï¼Œä¸æœƒç•™ä¸‹ç¥¨è­‰æª”ã€‚<br>(B) å°ã€‚.kirbi + mimikatz æ˜¯å…¸å‹ç¥¨è­‰è¢«æ“·å–ä¸¦é‡æ”¾çš„çµ„åˆã€‚<br>(C) éŒ¯ã€‚Buffer Overflow æ˜¯è¨˜æ†¶é«”æ¼æ´ï¼Œç„¡ç›´æ¥å°æ‡‰ã€‚<br>(D) éŒ¯ã€‚Directory Sync åå‘æ¬Šé™æ¿«ç”¨ï¼Œ .kirbi æ›´ç›´æ¥æŒ‡å‘ç¥¨è­‰ã€‚</p>
                </div>
                <div class="explain-section">
                    <h4>ğŸ“š è§€å¿µè£œå……èˆ‡å»¶ä¼¸</h4>
                    <p><strong>æ³•æ¢æˆ–å®šç¾©ï¼š</strong>Pass-the-Ticketï¼šç«Šå–ä¸¦é‡æ”¾ Kerberos ç¥¨è­‰ä»¥å†’ç”¨èº«åˆ†ã€‚<br><strong>è§¸é¡æ—é€šï¼š</strong>è‹¥é¡Œç›®å‡ºç¾ TGT/TGS å­—çœ¼ï¼Œä¹Ÿæ˜¯ç¥¨è­‰æ”»æ“Šã€‚</p>
                </div>
                <div class="explain-section">
                    <h4>ğŸ§  è¨˜æ†¶å£è¨£</h4>
                    <p>ã€Œçœ‹åˆ° kirbi æƒ³ç¥¨è­‰ï¼›ç¥¨è­‰è¢«å·å°± PTTã€‚ã€</p>
                </div>
                <div class="explain-section">
                    <h4>âš ï¸ å¸¸è¦‹é™·é˜±</h4>
                    <p><strong>å¿ƒç†ç›²é»ï¼š</strong>ææ·· Pass-the-Hash (å·é›œæ¹Š) èˆ‡ Pass-the-Ticket (å·ç¥¨è­‰)ã€‚<br><strong>é¿å‘æŒ‡å—ï¼š</strong>çœ‹åˆ° .kirbi å°±é–å®š Ticketã€‚</p>
                </div>
            `,
            selfCheck: `
                <h4>ğŸ§  è‡ªæˆ‘æª¢æ¸¬</h4>
                <p><strong>Q1ï¼š</strong>Pass-the-Ticket ç‚ºä»€éº¼ã€Œä¸éœ€è¦å¯†ç¢¼ã€ä¹Ÿèƒ½ç™»å…¥ï¼Ÿ</p>
                <details><summary>é¡¯ç¤ºç­”æ¡ˆ</summary><p>å› ç‚º Kerberos ä½¿ç”¨ç¥¨è­‰ä½œç‚ºèº«åˆ†æ†‘è­‰ï¼Œç¥¨è­‰è¢«å·å¯è¢«é‡æ”¾æˆ–æ³¨å…¥ã€‚</p></details>
                <hr style="margin: 10px 0; border: 0; border-top: 1px dashed #ccc;">
                <p><strong>Q2ï¼š</strong>è‹¥è¦é™ä½ç¥¨è­‰è¢«æ¿«ç”¨ï¼ŒAD/ç«¯é»å±¤é¢å¯åšå“ªäº›æ§ç®¡ï¼Ÿ</p>
                <details><summary>é¡¯ç¤ºç­”æ¡ˆ</summary><p>é™åˆ¶é«˜æ¬Šé™å¸³è™Ÿç™»å…¥ä½ç½®ã€å•Ÿç”¨ Credential Guardã€ç›£æ§ç¥¨è­‰ç•°å¸¸ã€‚</p></details>
                <hr style="margin: 10px 0; border: 0; border-top: 1px dashed #ccc;">
                <p><strong>Q3ï¼š</strong>.kirbi èˆ‡å¯†ç¢¼é›œæ¹Š (hash) æœ€å¤§å·®ç•°æ˜¯ä»€éº¼ï¼Ÿ</p>
                <details><summary>é¡¯ç¤ºç­”æ¡ˆ</summary><p>kirbi æ˜¯ç¥¨è­‰æ†‘è­‰ (Ticket)ï¼›hash æ˜¯å¯†ç¢¼çš„æŒ‡ç´‹ (ç”¨æ–¼é©—è­‰)ï¼Œå±¬ä¸åŒèªè­‰ææ–™ã€‚</p></details>
            `
        },
        {
            id: 8,
            type: "multiple",
            title: "ç¬¬ 8 é¡Œ",
            image: "https://i.meee.com.tw/Ja0BCik.png",
            question: "é‡å°ä¸Šè¿°æƒ…å¢ƒï¼Œä¸‹åˆ—å“ªäº›æªæ–½å¯ä»¥æœ‰æ•ˆé™ä½é¡ä¼¼æ”»æ“Šå†æ¬¡ç™¼ç”Ÿçš„æ©Ÿç‡ï¼Ÿï¼ˆè¤‡é¸ï¼‰",
            options: [
                { id: "A", text: "é‡å°è³‡æ–™åº«ä¸»æ©Ÿè³¼ç½®æ›´å¼·çš„è³‡æ–™åº«ç¨½æ ¸ç³»çµ±" },
                { id: "B", text: "å®šæœŸé€²è¡Œå“¡å·¥å®‰å…¨æ„è­˜åŸ¹è¨“" },
                { id: "C", text: "åŠ å¼·å°ç¶²è·¯å’Œç³»çµ±çš„æŒçºŒç›£æ§" },
                { id: "D", text: "å¯¦æ–½æ›´åš´æ ¼çš„èº«ä»½é©—è­‰å’Œå­˜å–æ§åˆ¶ç­–ç•¥" }
            ],
            correctAnswer: ["A", "B", "C", "D"],
            reason: "æœ¬æ¡ˆæ¶‰åŠå¤šéšæ®µå…¥ä¾µï¼Œéœ€ä»¥ã€Œç¸±æ·±é˜²ç¦¦ã€å¾äººå“¡ã€æ¬Šé™ã€ç›£æ§ã€ç¨½æ ¸å››å€‹é¢å‘å…¨é¢é˜²è­·ã€‚",
            explanation: `
                <div class="explain-section">
                    <h4>ğŸ” ç¬¬ä¸€æ­¥ï¼šæ‰¾é—œéµå­—</h4>
                    <p><strong>é‡å°ä¸Šè¿°æƒ…å¢ƒ</strong>ï¼šåŒ…å« Web å…¥ä¾µã€DB æ’ç¨‹ã€AD ç¥¨è­‰ï¼Œéœ€å¤šå±¤é˜²è­·ã€‚<br>
                    <strong>é™ä½å†æ¬¡ç™¼ç”Ÿæ©Ÿç‡</strong>ï¼šéœ€åŒ…å«é é˜²ã€åµæ¸¬ã€å›æ‡‰ã€ç¨½æ ¸ã€‚</p>
                </div>
                <div class="explain-section">
                    <h4>ğŸ—£ï¸ ç¬¬äºŒæ­¥ï¼šç™½è©±ç¿»è­¯</h4>
                    <p>å‰é¢å·²ç¶“å‡ºç¾ Web è¢«åˆ©ç”¨ã€DB è¢«æ”¾æ’ç¨‹ã€AD æœ‰ç¥¨è­‰è¢«å·ã€‚è¦é¿å…ä¸‹æ¬¡å†ä¸­ï¼Œæœƒéœ€è¦ã€ŒæŠ€è¡“æ§ç®¡ + ç›£æ§ç¨½æ ¸ + äººå“¡æ•™è‚² + å­˜å–æ§åˆ¶ã€ä¸€èµ·ä¸Šã€‚</p>
                </div>
                <div class="explain-section">
                    <h4>ğŸ’¡ ç¬¬ä¸‰æ­¥ï¼šè§£é¡Œæ€è·¯</h4>
                    <p><strong>è§£é¡Œæ­¥é©Ÿï¼š</strong>å°ç…§æ”»æ“Šéˆ (Web/DB/AD) -> æª¢æŸ¥é¸é …è¦†è“‹é¢ (é é˜²/åµæ¸¬/ç¨½æ ¸)ã€‚<br>
                    <strong>åŸç†èˆ‡è¦å‰‡ï¼š</strong><mark>ç¸±æ·±é˜²ç¦¦ (Defense in Depth)</mark>ï¼šå¤šå±¤æ§åˆ¶åŒæ™‚å­˜åœ¨ï¼Œä¸æŠŠå¸Œæœ›æŠ¼åœ¨å–®ä¸€æ§åˆ¶ã€‚</p>
                </div>
                <div class="explain-section">
                    <h4>âš–ï¸ ç¬¬å››æ­¥ï¼šé¸é …åˆ†æ</h4>
                    <p>(A) å°ã€‚è³‡æ–™åº«ç¨½æ ¸å¼·åŒ–åµæ¸¬èˆ‡äº‹å¾Œè¿½æŸ¥ã€‚<br>(B) å°ã€‚æ„è­˜åŸ¹è¨“é™ä½åˆå§‹å…¥ä¾µ (é‡£é­š/å¼±å¯†ç¢¼) é¢¨éšªã€‚<br>(C) å°ã€‚æŒçºŒç›£æ§èƒ½æ›´æ—©ç™¼ç¾ç•°å¸¸ (æŠŠåŠå¹´ç¸®çŸ­ç‚ºå³æ™‚)ã€‚<br>(D) å°ã€‚åš´æ ¼å­˜å–æ§åˆ¶èƒ½é™ä½æ¬Šé™è¢«æ¿«ç”¨å¾Œçš„æ“´æ•£ç¯„åœã€‚</p>
                </div>
                <div class="explain-section">
                    <h4>ğŸ“š è§€å¿µè£œå……èˆ‡å»¶ä¼¸</h4>
                    <p><strong>æ³•æ¢æˆ–å®šç¾©ï¼š</strong>ç¸±æ·±é˜²ç¦¦ï¼šå³ä½¿ä¸€å±¤è¢«çªç ´ï¼Œå…¶ä»–å±¤ä»èƒ½æ””æˆªã€‚<br><strong>è§¸é¡æ—é€šï¼š</strong>è‹¥é¡Œç›®å•ã€Œå“ªå€‹å±¬åµæ¸¬ã€ï¼Œé¸ç›£æ§/ç¨½æ ¸ã€‚</p>
                </div>
                <div class="explain-section">
                    <h4>ğŸ§  è¨˜æ†¶å£è¨£</h4>
                    <p>ã€Œç¨½æ ¸è¦ç•™è­‰ã€æ•™è‚²é™äººç¦ã€ç›£æ§æ—©ç™¼ç¾ã€æ§æ¬Šç¸®ç½å®³ã€‚ã€</p>
                </div>
                <div class="explain-section">
                    <h4>âš ï¸ å¸¸è¦‹é™·é˜±</h4>
                    <p><strong>å¿ƒç†ç›²é»ï¼š</strong>åªæƒ³é¸ã€Œè²·å·¥å…·ã€ï¼Œå¿½ç•¥ B èˆ‡ D æ‰æ˜¯é—œéµã€‚<br><strong>é¿å‘æŒ‡å—ï¼š</strong>APT æƒ…å¢ƒå„ªå…ˆæ¡ã€Œé é˜²+åµæ¸¬+æ¬Šé™+ç¨½æ ¸ã€çµ„åˆã€‚</p>
                </div>
            `,
            selfCheck: `
                <h4>ğŸ§  è‡ªæˆ‘æª¢æ¸¬</h4>
                <p><strong>Q1ï¼š</strong>è«‹æŠŠ (A)(B)(C)(D) åˆ†åˆ¥æ­¸é¡ç‚ºã€Œé é˜² / åµæ¸¬ / ç¨½æ ¸ / ç®¡ç†ã€ã€‚</p>
                <details><summary>é¡¯ç¤ºç­”æ¡ˆ</summary><p>A=ç¨½æ ¸/åµæ¸¬ï¼›B=ç®¡ç†/é é˜²ï¼›C=åµæ¸¬ï¼›D=é é˜²/é™ä½æ“´æ•£ã€‚</p></details>
                <hr style="margin: 10px 0; border: 0; border-top: 1px dashed #ccc;">
                <p><strong>Q2ï¼š</strong>è‹¥åªèƒ½å…ˆåšå…©ä»¶äº‹ï¼Œä½ æœƒå…ˆé¸å“ªå…©é …ï¼Ÿç†ç”±ï¼Ÿ</p>
                <details><summary>é¡¯ç¤ºç­”æ¡ˆ</summary><p>C+Dï¼ˆå…ˆæ—©åµæ¸¬ã€å†ç¸®å°æ¬Šé™ï¼‰ï¼›æˆ– B+Dï¼ˆå…ˆé™ä½äººç‚ºç ´å£èˆ‡ç‰¹æ¬Šæ¿«ç”¨ï¼‰ã€‚</p></details>
                <hr style="margin: 10px 0; border: 0; border-top: 1px dashed #ccc;">
                <p><strong>Q3ï¼š</strong>é‡å°ã€Œç¥¨è­‰æ”»æ“Šã€ä½ æœƒåŠ å¼·ç›£æ§å“ªäº›è¡Œç‚ºæŒ‡æ¨™ï¼Ÿ</p>
                <details><summary>é¡¯ç¤ºç­”æ¡ˆ</summary><p>ç•°å¸¸ç¥¨è­‰ä½¿ç”¨ã€ç‰¹æ¬Šå¸³è™Ÿä¸åˆç†æ™‚æ®µç™»å…¥ã€ç¥¨è­‰å¿«å–ç•°å¸¸å¢é•·ã€‚</p></details>
            `
        }
    ]
};

/**
 * State Management
 */
const quizState = {
    questions: quizData.questions.map(q => ({
        id: q.id,
        status: 'pending', // pending, correct, wrong
        userAnswer: []
    })),
    currentTab: 0 // Index
};

/**
 * Initialization
 */
document.addEventListener('DOMContentLoaded', () => {
    renderTabs();
    renderQuestions();
    updateProgress();
    switchTab(0); // Show first tab
});

/**
 * DOM Generators
 */
function renderTabs() {
    const container = document.getElementById('tabs-container');
    container.innerHTML = quizData.questions.map((q, index) => `
        <button class="tab-btn" onclick="switchTab(${index})" id="tab-${index}">
            ${q.title} <span class="tab-status" id="tab-status-${index}"></span>
        </button>
    `).join('');
}

function renderQuestions() {
    const container = document.getElementById('questions-wrapper');
    container.innerHTML = quizData.questions.map((q, index) => `
        <div class="question-content" id="q-content-${index}">
            <!-- Header -->
            <div class="q-header">
                <h3>å•é¡Œ ${q.id}</h3>
                <span class="q-badge pending" id="q-badge-${index}">å°šæœªä½œç­”</span>
            </div>

            <!-- Question Context (Image) -->
            ${q.image ? `
            <div class="q-context-box">
                <img src="${q.image}" alt="é¡Œç›®é™„åœ–" class="q-image" loading="lazy">
            </div>
            ` : ''}

            <!-- Question & Options -->
            <div class="question-text">
                ${q.type === 'multiple' ? '<span class="tag mgm">è¤‡é¸</span>' : '<span class="tag sec">å–®é¸</span>'}
                ${q.question}
            </div>

            <div class="options-list">
                ${q.options.map(opt => `
                    <label class="option-label" id="opt-label-${index}-${opt.id}" onclick="selectOption(${index}, '${opt.id}', '${q.type}')">
                        <input type="${q.type === 'single' ? 'radio' : 'checkbox'}" 
                               name="q${index}" 
                               value="${opt.id}"
                               id="opt-input-${index}-${opt.id}">
                        <span class="option-text"><strong>(${opt.id})</strong> ${opt.text}</span>
                    </label>
                `).join('')}
            </div>

            <!-- Action -->
            <div class="action-area">
                <button class="btn-primary" id="btn-action-${index}" onclick="submitAnswer(${index})">é€å‡ºç­”æ¡ˆ</button>
            </div>

            <!-- Feedback -->
            <div class="feedback" id="feedback-${index}">
                <!-- Content injected by JS -->
            </div>

            <!-- Explain -->
            <details id="explain-${index}" style="display:none">
                <summary>æŸ¥çœ‹è©³ç´°è§£æ</summary>
                <div class="explain-content">
                    ${q.explanation}
                </div>
            </details>

            <!-- SelfCheck (New Structure: Visible div, internal details) -->
            <div id="selfcheck-${index}" class="explain-section self-check-area">
                ${q.selfCheck}
            </div>
        </div>
    `).join('');
}

/**
 * Logic Functions
 */
function switchTab(index) {
    // Update State
    quizState.currentTab = index;

    // UI: Tabs
    document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
    document.getElementById(`tab-${index}`).classList.add('active');

    // UI: Content
    document.querySelectorAll('.question-content').forEach(content => content.classList.remove('active'));
    const targetContent = document.getElementById(`q-content-${index}`);
    targetContent.classList.add('active');
    
    // Smooth scroll to top of question
    targetContent.scrollIntoView({ behavior: 'smooth', block: 'start' });
}

function selectOption(qIndex, optId, type) {
    const qState = quizState.questions[qIndex];
    if (qState.status !== 'pending') return; // Locked

    const label = document.getElementById(`opt-label-${qIndex}-${optId}`);
    const input = document.getElementById(`opt-input-${qIndex}-${optId}`);

    // UI & State Update
    if (type === 'single') {
        // Clear previous selection
        document.querySelectorAll(`#q-content-${qIndex} .option-label`).forEach(l => l.classList.remove('selected'));
        qState.userAnswer = [optId];
        label.classList.add('selected');
        input.checked = true;
    } else {
        // Toggle
        if (input.checked) { // Previously unchecked, now checked by click (event bubble)
             if(!qState.userAnswer.includes(optId)) qState.userAnswer.push(optId);
             label.classList.add('selected');
        } else {
            qState.userAnswer = qState.userAnswer.filter(id => id !== optId);
            label.classList.remove('selected');
        }
    }
}

function submitAnswer(qIndex) {
    const qState = quizState.questions[qIndex];
    const qData = quizData.questions[qIndex];

    if (qState.userAnswer.length === 0) {
        alert("è«‹å…ˆé¸æ“‡ç­”æ¡ˆï¼");
        return;
    }

    // Check Logic
    const isCorrect = arraysEqual(qState.userAnswer.sort(), qData.correctAnswer.sort());
    
    // Update State
    qState.status = isCorrect ? 'correct' : 'wrong';

    // UI Updates
    disableOptions(qIndex);
    showFeedback(qIndex, isCorrect, qData);
    updateTabStatus(qIndex, isCorrect);
    updateBadge(qIndex, isCorrect);
    updateProgress();
    
    // Change Button
    const btn = document.getElementById(`btn-action-${qIndex}`);
    btn.textContent = "é‡æ–°ä½œç­”";
    btn.className = "btn-primary btn-retry";
    btn.onclick = () => resetQuestion(qIndex);

    // Reveal Explain & SelfCheck
    document.getElementById(`explain-${qIndex}`).style.display = 'block';
    document.getElementById(`selfcheck-${qIndex}`).style.display = 'block';
}

function resetQuestion(qIndex) {
    const qState = quizState.questions[qIndex];
    
    // Reset State
    qState.status = 'pending';
    qState.userAnswer = [];

    // UI Reset
    const container = document.getElementById(`q-content-${qIndex}`);
    
    // Options
    container.querySelectorAll('input').forEach(inp => {
        inp.checked = false;
        inp.disabled = false;
    });
    container.querySelectorAll('.option-label').forEach(lbl => {
        lbl.classList.remove('selected', 'disabled');
        lbl.style.pointerEvents = 'auto'; // Re-enable clicks
    });

    // Feedback & Explain
    document.getElementById(`feedback-${qIndex}`).style.display = 'none';
    document.getElementById(`explain-${qIndex}`).style.display = 'none';
    document.getElementById(`explain-${qIndex}`).removeAttribute('open');
    document.getElementById(`selfcheck-${qIndex}`).style.display = 'none';
    
    // Reset internal details in selfcheck
    const selfCheckArea = document.getElementById(`selfcheck-${qIndex}`);
    if (selfCheckArea) {
        selfCheckArea.querySelectorAll('details').forEach(d => d.removeAttribute('open'));
    }

    // Button
    const btn = document.getElementById(`btn-action-${qIndex}`);
    btn.textContent = "é€å‡ºç­”æ¡ˆ";
    btn.className = "btn-primary";
    btn.onclick = () => submitAnswer(qIndex);

    // Badge & Tab
    const badge = document.getElementById(`q-badge-${qIndex}`);
    badge.className = "q-badge pending";
    badge.textContent = "å°šæœªä½œç­”";
    
    document.getElementById(`tab-status-${qIndex}`).textContent = "";
    
    updateProgress();
}

/**
 * Helpers
 */
function arraysEqual(a, b) {
    if (a.length !== b.length) return false;
    for (let i = 0; i < a.length; i++) {
        if (a[i] !== b[i]) return false;
    }
    return true;
}

function disableOptions(qIndex) {
    const container = document.getElementById(`q-content-${qIndex}`);
    container.querySelectorAll('.option-label').forEach(lbl => {
        lbl.classList.add('disabled');
        lbl.style.pointerEvents = 'none'; // Prevent clicks
    });
    container.querySelectorAll('input').forEach(inp => inp.disabled = true);
}

function showFeedback(qIndex, isCorrect, qData) {
    const fbBox = document.getElementById(`feedback-${qIndex}`);
    fbBox.className = `feedback ${isCorrect ? 'success' : 'error'}`;
    fbBox.style.display = 'block';
    
    let html = '';
    if (isCorrect) {
        html = `<strong>âœ“ ç­”å°äº†ï¼</strong><p>${qData.reason}</p>`;
    } else {
        html = `<strong>âœ— ç­”éŒ¯äº†</strong>
                <p>æ­£ç¢ºç­”æ¡ˆï¼š${qData.correctAnswer.join('ã€')}</p>
                <p>${qData.reason}</p>`;
    }
    fbBox.innerHTML = html;
}

function updateTabStatus(qIndex, isCorrect) {
    const statusSpan = document.getElementById(`tab-status-${qIndex}`);
    statusSpan.textContent = isCorrect ? 'âœ“' : 'âœ—';
}

function updateBadge(qIndex, isCorrect) {
    const badge = document.getElementById(`q-badge-${qIndex}`);
    badge.className = `q-badge ${isCorrect ? 'correct' : 'wrong'}`;
    badge.textContent = isCorrect ? 'ç­”å°' : 'ç­”éŒ¯';
}

function updateProgress() {
    const total = quizData.questions.length;
    const completed = quizState.questions.filter(q => q.status !== 'pending').length;
    const percent = Math.round((completed / total) * 100);

    document.getElementById('progress-text').textContent = `å·²å®Œæˆï¼š${completed} / ${total}`;
    document.getElementById('progress-percent').textContent = `${percent}%`;
    document.getElementById('progress-fill').style.width = `${percent}%`;

    const statusMsg = document.getElementById('completion-msg');
    if (completed === total) {
        statusMsg.textContent = "âœ… æœ¬é¡Œçµ„å·²å®Œæˆ";
        statusMsg.className = "completion-status status-done";
    } else {
        statusMsg.textContent = "ğŸ“ å°šæœªå®Œæˆ";
        statusMsg.className = "completion-status status-pending";
    }
}

</script>
</body>
</html>