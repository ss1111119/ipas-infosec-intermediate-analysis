<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é¡Œçµ„ 2ï½œå®Œæ•´æ•™å­¸æ¨¡æ¿</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --body-bg: #f4f7f6;
            --card-bg: #ffffff;
            --text-primary: #2c3e50;
            --primary: #2980b9;
            --primary-hover: #3498db;
            --highlight: #f1c40f;
            --success-bg: #e8f5e9;
            --success-text: #2e7d32;
            --error-bg: #fce4ec;
            --error-text: #c62828;
            --border-radius: 16px;
            --transition-speed: 200ms;
        }

        * {
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans TC', system-ui, sans-serif;
            background-color: var(--body-bg);
            color: var(--text-primary);
            margin: 0;
            padding: 0;
            line-height: 1.6;
        }

        /* Layout */
        .page-container {
            max-width: 960px;
            width: 100%;
            margin: 40px auto;
            padding: 40px;
            background-color: var(--card-bg);
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            border-radius: var(--border-radius);
        }

        @media (max-width: 768px) {
            .page-container {
                margin: 16px;
                padding: 20px;
                width: calc(100% - 32px);
                border-radius: 12px;
            }
        }

        /* Typography */
        h1 { font-size: 24px; margin: 0 0 16px 0; color: var(--primary); }
        h2 { font-size: 20px; margin: 0 0 12px 0; }
        h3 { font-size: 18px; margin: 0 0 8px 0; }
        p { margin-bottom: 16px; }

        /* Tags */
        .tag { display: inline-block; padding: 2px 8px; border-radius: 4px; font-size: 12px; font-weight: bold; margin-right: 6px; color: white; vertical-align: middle; }
        .tag-law { background-color: #607d8b; }
        .tag-iso { background-color: #27ae60; }
        .tag-zt  { background-color: #8e44ad; }
        .tag-net { background-color: #2980b9; }
        .tag-sec { background-color: #c0392b; }
        .tag-mgm { background-color: #d35400; }

        mark { background-color: var(--highlight); color: #000; padding: 0 2px; border-radius: 2px; }

        /* Header & Progress */
        .group-header { margin-bottom: 30px; border-bottom: 2px solid #f0f0f0; padding-bottom: 20px; }
        .progress-info { display: flex; justify-content: space-between; margin-bottom: 8px; font-size: 14px; }
        .progress-bar { height: 8px; background-color: #e0e0e0; border-radius: 4px; overflow: hidden; margin-bottom: 12px; }
        .progress-fill { height: 100%; width: 0%; background: linear-gradient(90deg, var(--primary), var(--primary-hover)); transition: width 400ms ease; }
        .completion-status { font-weight: bold; font-size: 14px; }
        .status-pending { color: #f39c12; }
        .status-done { color: var(--success-text); display: none; }

        /* Context */
        .group-context { background-color: #f8f9fa; padding: 20px; border-radius: 8px; border-left: 5px solid var(--primary); margin-bottom: 30px; }
        .group-context h3 { color: var(--primary); margin-top: 0; }

        /* Tabs */
        .tabs-container { display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 24px; border-bottom: 1px solid #ddd; padding-bottom: 8px; }
        .tab-btn {
            background: #fff; border: 1px solid #ddd; padding: 8px 16px; border-radius: 8px; cursor: pointer;
            font-family: inherit; font-weight: 500; color: #666; transition: var(--transition-speed); min-height: 48px;
            display: flex; align-items: center; justify-content: center; gap: 6px;
        }
        .tab-btn:hover { background-color: #e3f2fd; transform: translateY(-2px); }
        .tab-btn.active { background-color: var(--primary); color: white; border-color: var(--primary); box-shadow: 0 4px 8px rgba(41,128,185,0.3); }
        .tab-status { font-size: 12px; opacity: 0.9; }

        /* Question Area */
        .tab-content { display: none; animation: fadeIn 300ms ease; }
        .tab-content.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        .question-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px; }
        .q-status-badge { font-size: 14px; padding: 4px 12px; border-radius: 12px; background: #eee; color: #666; }
        .q-status-badge.correct { background: var(--success-bg); color: var(--success-text); }
        .q-status-badge.wrong { background: var(--error-bg); color: var(--error-text); }

        /* Options */
        .options-list { display: flex; flex-direction: column; gap: 12px; margin-bottom: 24px; }
        .option-label {
            display: flex; align-items: flex-start; padding: 12px 16px; border: 2px solid #eee; border-radius: 8px;
            cursor: pointer; transition: var(--transition-speed); position: relative;
        }
        .option-label:hover { background-color: #e3f2fd; }
        .option-label.selected { background-color: #bbdefb; border-color: var(--primary); }
        .option-label.disabled { cursor: not-allowed; opacity: 0.7; }
        .option-label.disabled:hover { background-color: #f4f4f4; }
        
        .option-input { margin-top: 4px; margin-right: 12px; accent-color: var(--primary); }
        .option-text { width: 100%; word-break: break-word; }

        /* Buttons */
        .action-area { margin-bottom: 24px; }
        .btn-primary {
            background-color: var(--primary); color: white; border: none; padding: 10px 24px;
            border-radius: 8px; font-size: 16px; font-weight: bold; cursor: pointer; width: 100%;
            transition: var(--transition-speed); min-height: 44px;
        }
        .btn-primary:hover { background-color: var(--primary-hover); transform: translateY(-2px); box-shadow: 0 4px 12px rgba(41,128,185,0.3); }
        .btn-primary:disabled { background-color: #bdc3c7; cursor: not-allowed; transform: none; box-shadow: none; }
        
        .btn-retry { background-color: #f39c12; }
        .btn-retry:hover { background-color: #e67e22; }

        /* Feedback & Explain */
        .feedback { padding: 16px; border-radius: 8px; margin-bottom: 20px; display: none; animation: fadeInUp 300ms ease; }
        .feedback.success { background-color: var(--success-bg); border-left: 4px solid var(--success-text); color: var(--success-text); }
        .feedback.error { background-color: var(--error-bg); border-left: 4px solid var(--error-text); color: var(--error-text); }
        
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        details { background-color: #fff; border: 1px solid #ddd; border-radius: 8px; margin-bottom: 16px; overflow: hidden; }
        details summary { padding: 12px 16px; background-color: #f8f9fa; cursor: pointer; font-weight: bold; list-style: none; display: flex; align-items: center; justify-content: space-between; }
        details summary::after { content: '+'; font-size: 20px; color: #666; }
        details[open] summary::after { content: '-'; }
        .details-content { padding: 20px; border-top: 1px solid #ddd; }
        
        .explain-section { background-color: #f8f9fa; padding: 16px; border-radius: 4px; margin-bottom: 12px; border-left: 4px solid var(--primary); }
        .explain-section h4 { margin: 0 0 8px 0; color: var(--primary); font-size: 16px; display: flex; align-items: center; gap: 8px; border-bottom: 1px solid rgba(41,128,185,0.2); padding-bottom: 6px; }
        .explain-section ul { padding-left: 20px; margin: 0; }
        .explain-section li { margin-bottom: 6px; }
        
        /* Self Check Specifics */
        .self-check-box { margin-top: 20px; border: 2px solid #e0e0e0; border-radius: 8px; overflow: hidden; }
        .self-check-header { background-color: #fafafa; padding: 12px 16px; font-weight: bold; color: #444; border-bottom: 1px solid #e0e0e0; }
        .self-check-q { padding: 16px; font-weight: 500; color: #2c3e50; }
        .self-check-ans-reveal { padding: 0 16px 16px 16px; }
    </style>
</head>
<body>

<div class="page-container">
    <!-- 1. Header -->
    <header class="group-header">
        <h1>é¡Œçµ„ 2ï½œå®Œæ•´æ•™å­¸æ¨¡æ¿</h1>
        <div class="progress-info">
            <span id="progress-text">å·²å®Œæˆï¼š<strong>0</strong> / 4</span>
            <span id="overall-status" class="status-pending">ğŸ“ å°šæœªå®Œæˆ</span>
            <span id="overall-done" class="status-done">âœ… æœ¬é¡Œçµ„å·²å®Œæˆ</span>
        </div>
        <div class="progress-bar">
            <div id="progress-fill" class="progress-fill"></div>
        </div>
    </header>

    <!-- 2. Context -->
    <div class="group-context">
        <h3>ğŸ“– é¡Œçµ„èƒŒæ™¯</h3>
        <p>A å…¬å¸ç‚ºä¸€å®¶é‡‘èæ©Ÿæ§‹ï¼Œä¾æˆ‘åœ‹ã€Šè³‡é€šå®‰å…¨ç®¡ç†æ³•ã€‹ç›¸é—œè¦å®šï¼Œè¢«æ ¸å®šç‚ºè³‡é€šå®‰å…¨è²¬ä»»ç­‰ç´š <strong>A ç´š</strong>ï¼ˆä»£è¡¨å…¶è³‡è¨Šç³»çµ±è‹¥å—å½±éŸ¿ï¼Œå°‡å¯èƒ½è¡æ“Šé‡‘èç§©åºã€ç¤¾æœƒé‹ä½œæˆ–åœ‹å®¶å®‰å…¨ï¼Œå±¬æ–¼æœ€é«˜è³‡å®‰è²¬ä»»ç­‰ç´šï¼‰ã€‚</p>
        <p>è¿‘æœŸå› é§­å®¢æ”»æ“Šäº‹ä»¶é »ç¹ç™¼ç”Ÿï¼Œå…¬å¸é«˜å±¤è¦æ±‚è³‡å®‰å–®ä½ï¼Œå¿…é ˆé‡æ–°æª¢è¦–ç›®å‰å¤–éƒ¨è³‡å®‰å¨è„…ç’°å¢ƒä»¥åŠå…§éƒ¨è³‡è¨Šè³‡ç”¢çš„è®ŠåŒ–æƒ…å½¢ï¼Œé‡æ–°é€²è¡Œé¢¨éšªæª¢è¦–èˆ‡è©•ä¼°ï¼Œä¸¦ä¾è©•ä¼°çµæœæ¡å–é©åˆ‡çš„é¢¨éšªè™•ç†æªæ–½ï¼Œä»¥ç¢ºä¿å…¬å¸æ•´é«”è³‡è¨Šå®‰å…¨ã€‚</p>
    </div>

    <!-- 3. Tabs -->
    <div id="tabs-container" class="tabs-container">
        <!-- Rendered by JS -->
    </div>

    <!-- 4. Tab Content -->
    <div id="content-container">
        <!-- Rendered by JS -->
    </div>
</div>

<script>
    // --- Data ---
    const quizData = {
        groupName: "é¡Œçµ„ 2ï½œå®Œæ•´æ•™å­¸æ¨¡æ¿",
        questions: [
            {
                id: 17,
                type: "single",
                tag: "mgm", // é¢¨éšªç®¡ç†/å¼±é»ç®¡ç†
                tagName: "å¼±é»ç®¡ç†",
                question: "è©²å…¬å¸è³‡å®‰äººå“¡é‡å°æ‰€æœ‰è³‡è¨Šè³‡ç”¢é€²è¡Œäº†å¼±é»æƒæä½œæ¥­ã€‚è©¦å•æœ‰é—œè©²è³‡å®‰äººå“¡æ‰€å¯¦æ–½çš„å¼±é»æƒææ•˜è¿°ï¼Œä¸‹åˆ—ä½•è€…éŒ¯èª¤ï¼Ÿ",
                options: [
                    { id: "A", text: "ä½¿ç”¨ Fortify Static Code Analyzer åŸ·è¡Œç¶²ç«™å¼±é»æƒæä½œæ¥­" },
                    { id: "B", text: "ä½¿ç”¨ Nessus Professional åŸ·è¡Œç³»çµ±å¼±é»æƒæä½œæ¥­" },
                    { id: "C", text: "å°‡å¼±é»æƒæçµæœå±¬æ–¼ä¸­é¢¨éšªç¨‹åº¦ä»¥ä¸Šä¹‹å¼±é»é€²è¡Œå¾ŒçºŒè™•ç†ä¹‹è©•ä¼°" },
                    { id: "D", text: "ä¾æ“šå¼±é»ä¿®è£œçµæœå¯¦æ–½ç¬¬äºŒæ¬¡çš„å¼±é»æƒæè¤‡æ¸¬ä½œæ¥­" }
                ],
                correctAnswer: ["A"],
                reason: "Fortify æ˜¯ç¨‹å¼ç¢¼åˆ†æå·¥å…·(SAST)ï¼Œä¸æ˜¯ç¶²ç«™å¼±é»æƒæå·¥å…·(DAST)ã€‚",
                explanation: `
                    <div class="explain-section">
                        <h4>ğŸ” ç¬¬ä¸€æ­¥ï¼šæ‰¾é—œéµå­—</h4>
                        <p>å¼±é»æƒæã€Fortify Static Code Analyzerã€Nessus Professionalã€ä¸­é¢¨éšªä»¥ä¸Šã€è¤‡æ¸¬</p>
                    </div>
                    <div class="explain-section">
                        <h4>ğŸ—£ï¸ ç¬¬äºŒæ­¥ï¼šç™½è©±ç¿»è­¯</h4>
                        <p>å…¬å¸åœ¨åšã€Œæ‰¾ç³»çµ±æ¼æ´ã€é€™ä»¶äº‹æ™‚ï¼Œä¸‹é¢å“ªä¸€å€‹åšæ³•æ˜¯ç”¨éŒ¯å·¥å…·æˆ–æ¦‚å¿µéŒ¯èª¤çš„ï¼Ÿ</p>
                    </div>
                    <div class="explain-section">
                        <h4>ğŸ’¡ ç¬¬ä¸‰æ­¥ï¼šè§£é¡Œæ€è·¯</h4>
                        <ul>
                            <li><strong>è§£é¡Œæ­¥é©Ÿï¼š</strong>
                                <ol>
                                    <li>åˆ†è¾¨å·¥å…·æ˜¯ã€Œæƒç¨‹å¼ç¢¼ã€é‚„æ˜¯ã€Œæƒç³»çµ±ã€ã€‚</li>
                                    <li>æª¢æŸ¥å¼±é»è™•ç†æµç¨‹æ˜¯å¦åˆç†ã€‚</li>
                                    <li>æ‰¾å‡ºç”¨é€”ä¸æ­£ç¢ºçš„é¸é …ã€‚</li>
                                </ol>
                            </li>
                            <li><strong>åŸç†èˆ‡è¦å‰‡ï¼š</strong>
                                <ul>
                                    <li>æƒã€Œç¨‹å¼ç¢¼ã€(SAST) ï¼ çœ‹ DNAï¼ˆæª¢æŸ¥åŸå§‹ç¢¼é‚è¼¯ï¼‰ã€‚</li>
                                    <li>æƒã€Œç³»çµ±ä¸»æ©Ÿã€(System Scan) ï¼ ç…§ X å…‰ï¼ˆæª¢æŸ¥å·²é‹è¡Œçš„æœå‹™èˆ‡è£œä¸ï¼‰ã€‚</li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                    <div class="explain-section">
                        <h4>ğŸ“Š ç¬¬å››æ­¥ï¼šé¸é …åˆ†æ</h4>
                        <ul>
                            <li><strong>(A) éŒ¯èª¤ï¼š</strong>Fortify Static Code Analyzer æ˜¯ SASTï¼ˆéœæ…‹æ‡‰ç”¨ç¨‹å¼å®‰å…¨æ¸¬è©¦ï¼‰å·¥å…·ï¼ŒåŠŸèƒ½æ˜¯æª¢æŸ¥ã€ŒåŸå§‹ç¢¼ã€æ˜¯å¦æœ‰å®‰å…¨ç¼ºé™·ï¼Œ<strong>ä¸æ˜¯ç”¨ä¾†æƒæå·²ä¸Šç·šçš„ç¶²ç«™ç³»çµ±</strong>ï¼ˆé‚£æ˜¯ DAST å·¥å…·çš„å·¥ä½œï¼‰ã€‚</li>
                            <li><strong>(B) æ­£ç¢ºï¼š</strong>Nessus æ˜¯å…¸å‹çš„ã€Œç³»çµ±å¼±é»æƒæå·¥å…·ã€ï¼Œå¯æª¢æ¸¬ä½œæ¥­ç³»çµ±ã€æœå‹™ã€å¥—ä»¶æ¼æ´ã€‚</li>
                            <li><strong>(C) æ­£ç¢ºï¼š</strong>ä¸­é¢¨éšªä»¥ä¸Šåˆ—å…¥å¾ŒçºŒè™•ç†è©•ä¼°ï¼Œç¬¦åˆå¼±é»ç®¡ç†åŸå‰‡ã€‚</li>
                            <li><strong>(D) æ­£ç¢ºï¼š</strong>ä¿®è£œå¾Œå†æƒä¸€æ¬¡ï¼Œç¨±ç‚ºã€Œè¤‡æ¸¬ã€ï¼Œæ˜¯æ¨™æº–æµç¨‹ã€‚</li>
                        </ul>
                    </div>
                    <div class="explain-section">
                        <h4>ğŸ“š è§€å¿µè£œå……èˆ‡å»¶ä¼¸</h4>
                        <p><strong>å¼±é»ç®¡ç†å®šç¾©ï¼š</strong>æŒ‡è­˜åˆ¥ã€åˆ†æã€ä¿®è£œåŠè¿½è¹¤è³‡è¨Šç³»çµ±å¼±é»çš„ç®¡ç†ç¨‹åºã€‚ï¼ˆç™½è©±ï¼šæ‰¾æ´ã€è£œæ´ã€å†æª¢æŸ¥ï¼‰ã€‚</p>
                        <p><strong>è§¸é¡æ—é€šï¼š</strong></p>
                        <ul>
                            <li>SAST (Static Application Security Testing)ï¼šæƒåŸå§‹ç¢¼ (Source Code)ã€‚</li>
                            <li>DAST (Dynamic Application Security Testing)ï¼šæƒé‹ä½œä¸­çš„ç¶²ç«™ (Web Behavior)ã€‚</li>
                            <li>å¸¸è¦‹å·¥å…·æ›¿æ›ï¼šCheckmarx (SAST)ã€OpenVAS (ç³»çµ±æƒæ)ã€‚</li>
                        </ul>
                    </div>
                    <div class="explain-section">
                        <h4>ğŸ§  è¨˜æ†¶å£è¨£</h4>
                        <p><mark>ã€ŒFortify çœ‹ç¢¼ï¼ŒNessus çœ‹æ©Ÿã€</mark></p>
                    </div>
                    <div class="explain-section">
                        <h4>âš ï¸ å¸¸è¦‹é™·é˜±</h4>
                        <ul>
                            <li><strong>å¿ƒç†ç›²é»ï¼š</strong>çœ‹åˆ°ã€Œç¶²ç«™ã€å°±ç›´è¦ºé¸è·Ÿç¶²ç«™æœ‰é—œçš„å·¥å…·ï¼Œå¿½ç•¥äº†å·¥å…·æ˜¯çœ‹ã€Œç¨‹å¼ç¢¼ã€é‚„æ˜¯ã€Œè¡Œç‚ºã€ã€‚</li>
                            <li><strong>é¿å‘æŒ‡å—ï¼š</strong>å…ˆå•è‡ªå·±ï¼šã€Œé€™å€‹å·¥å…·æ˜¯çœ‹åŸå§‹ç¢¼ï¼Œé‚„æ˜¯çœ‹ç³»çµ±ï¼Ÿã€</li>
                        </ul>
                    </div>
                `,
                selfCheck: {
                    question: "1. è‹¥é¡Œç›®æ”¹æˆã€ŒåŸå§‹ç¢¼å®‰å…¨æª¢æ¸¬ã€ï¼ŒFortify é©ä¸é©åˆï¼Ÿ<br>2. Nessus æ˜¯å¦èƒ½å®Œæ•´æª¢æ¸¬ SQL Injectionï¼Ÿ",
                    answer: "1. é©åˆã€‚<br>2. ä¸è¡Œï¼ŒNessus ä¸»æ”»ç³»çµ±å±¤èˆ‡æœå‹™æ¼æ´ï¼ŒSQL Injection å±¬æ–¼ç¶²ç«™æ‡‰ç”¨å±¤ï¼Œéœ€ç”¨ DAST å·¥å…·ï¼ˆå¦‚ WebInspectï¼‰æª¢æ¸¬è¼ƒä½³ã€‚"
                }
            },
            {
                id: 18,
                type: "single",
                tag: "mgm",
                tagName: "é¢¨éšªè©•é‘‘",
                question: "è³‡å®‰äººå“¡æ–¼é¢¨éšªè©•é‘‘éç¨‹ä¸­ï¼Œç™¼è¦ºè©²å…¬å¸æœ‰ä¸€éƒ¨é˜²ç«ç‰†å·²é­åŸå» å®£å‘Šçµ‚æ­¢æœå‹™ï¼ˆEnd of Serviceï¼ŒEOSï¼‰ã€‚è©¦å•æœ‰é—œè³‡å®‰äººå“¡å°æ–¼æ­¤ä¸€ç™¼ç¾ä¹‹å¾ŒçºŒä½œç‚ºï¼Œä¸‹åˆ—ä½•è€…æœ€ç‚ºé©åˆ‡ï¼Ÿ",
                options: [
                    { id: "A", text: "ç«‹å³è®Šæ›´é˜²ç«ç‰†è¨­å®šï¼Œå°‡å¤–å°å…§ä¹‹å°åŒ…é€²è¡Œé˜»æ“‹" },
                    { id: "B", text: "ç«‹å³è®Šæ›´é˜²ç«ç‰†è¨­å®šï¼Œå°‡å…§å°å¤–ä¹‹å°åŒ…é€²è¡Œé˜»æ“‹" },
                    { id: "C", text: "ç«‹å³å°‡é˜²ç«ç‰†çš„è¨­å®šæª”ï¼ˆConfigï¼‰é€²è¡Œå‚™ä»½" },
                    { id: "D", text: "ç«‹å³è©•ä¼°è©²é˜²ç«ç‰†ä¹‹é¢¨éšªä¸¦å¦¥æ¡é©åˆ‡ä¹‹æ§åˆ¶æªæ–½" }
                ],
                correctAnswer: ["D"],
                reason: "é¢¨éšªç®¡ç†åŸå‰‡æ˜¯ã€Œå…ˆè©•ä¼°ã€å†è™•ç†ã€ï¼Œç›´æ¥ä¿®æ”¹è¨­å®šå¯èƒ½é€ æˆæ¥­å‹™ä¸­æ–·ã€‚",
                explanation: `
                    <div class="explain-section">
                        <h4>ğŸ” ç¬¬ä¸€æ­¥ï¼šæ‰¾é—œéµå­—</h4>
                        <p>é¢¨éšªè©•é‘‘ã€é˜²ç«ç‰†ã€EOSï¼ˆçµ‚æ­¢æœå‹™ï¼‰ã€å¾ŒçºŒä½œç‚º</p>
                    </div>
                    <div class="explain-section">
                        <h4>ğŸ—£ï¸ ç¬¬äºŒæ­¥ï¼šç™½è©±ç¿»è­¯</h4>
                        <p>ç™¼ç¾ä¸€å°é˜²ç«ç‰†ã€ŒåŸå» å·²ç¶“ä¸å†æ›´æ–°ã€ä¸å†ä¿®æ¼æ´ã€ï¼Œç¬¬ä¸€å€‹æ­£ç¢ºå‹•ä½œæ˜¯ä»€éº¼ï¼Ÿ</p>
                    </div>
                    <div class="explain-section">
                        <h4>ğŸ’¡ ç¬¬ä¸‰æ­¥ï¼šè§£é¡Œæ€è·¯</h4>
                        <ul>
                            <li><strong>è§£é¡Œæ­¥é©Ÿï¼š</strong>
                                <ol>
                                    <li>ç¢ºèª EOS æ˜¯ã€Œé¢¨éšªä¾†æºã€ã€‚</li>
                                    <li>åˆ¤æ–·ä¸èƒ½ç›´æ¥äº‚å‹•ç³»çµ±è¨­å®šã€‚</li>
                                    <li>é¸æ“‡ç¬¦åˆã€Œå…ˆè©•ä¼°ã€å†è™•ç†ã€çš„é¸é …ã€‚</li>
                                </ol>
                            </li>
                            <li><strong>åŸç†èˆ‡è¦å‰‡ï¼š</strong>é¢¨éšªç®¡ç†ä¸æ˜¯ã€Œçœ‹åˆ°å•é¡Œå°±äº‚æ”¹ã€ï¼Œè€Œæ˜¯ã€Œå…ˆææ¸…æ¥šå½±éŸ¿ï¼Œå†æ±ºå®šå°ç­–ã€ã€‚</li>
                        </ul>
                    </div>
                    <div class="explain-section">
                        <h4>ğŸ“Š ç¬¬å››æ­¥ï¼šé¸é …åˆ†æ</h4>
                        <ul>
                            <li><strong>(A) éŒ¯èª¤ï¼š</strong>æœªç¶“è©•ä¼°å°±é˜»æ“‹å¤–å°å…§æµé‡ï¼Œå¯èƒ½é€ æˆæ¥­å‹™ä¸­æ–·ã€‚</li>
                            <li><strong>(B) éŒ¯èª¤ï¼š</strong>é˜»æ“‹å…§å°å¤–æµé‡å¯èƒ½å½±éŸ¿æ­£å¸¸ä¸Šç¶²èˆ‡æ¥­å‹™ç³»çµ±ã€‚</li>
                            <li><strong>(C) ä¸å¤ é©åˆ‡ï¼š</strong>å‚™ä»½åªæ˜¯æŠ€è¡“å‹•ä½œï¼Œä¸æ˜¯é¢¨éšªè™•ç†ç­–ç•¥ã€‚</li>
                            <li><strong>(D) æ­£ç¢ºï¼š</strong>EOS å±¬æ–¼é‡å¤§é¢¨éšªï¼Œæ‡‰å…ˆè©•ä¼°ï¼Œå†æ±ºå®šæ±°æ›ã€è£œå¼·æˆ–éš”é›¢ã€‚</li>
                        </ul>
                    </div>
                    <div class="explain-section">
                        <h4>ğŸ“š è§€å¿µè£œå……èˆ‡å»¶ä¼¸</h4>
                        <p><strong>é¢¨éšªè™•ç† (Risk Treatment)ï¼š</strong>æŒ‡å°é¢¨éšªæ¡å–é¿å…ã€é™ä½ã€ç§»è½‰æˆ–æ¥å—ä¹‹æ±ºç­–ã€‚ï¼ˆç™½è©±ï¼šæ€éº¼é¢å°é¢¨éšªï¼‰ã€‚</p>
                        <p><strong>è§¸é¡æ—é€šï¼š</strong>EOS â‰  ç«‹åˆ»é—œæ©Ÿï¼›EOS = å¿…é ˆåˆ—å…¥é«˜é¢¨éšªè©•ä¼°ã€‚</p>
                    </div>
                    <div class="explain-section">
                        <h4>ğŸ§  è¨˜æ†¶å£è¨£</h4>
                        <p><mark>ã€ŒEOS å…ˆè©•ä¼°ï¼Œä¸æ˜¯å…ˆäº‚å‹•ã€</mark></p>
                    </div>
                    <div class="explain-section">
                        <h4>âš ï¸ å¸¸è¦‹é™·é˜±</h4>
                        <ul>
                            <li><strong>å¿ƒç†ç›²é»ï¼š</strong>æ€•å‡ºäº‹å°±æƒ³ç«‹åˆ»å‹•è¨­å®šï¼Œèªç‚ºã€Œé¦¬ä¸Šé—œæ‰æˆ–å°é–ã€å°±æ˜¯å¥½ä½œæ³•ã€‚</li>
                            <li><strong>é¿å‘æŒ‡å—ï¼š</strong>é¡Œç›®å‡ºç¾ã€Œé¢¨éšªè©•é‘‘ã€â†’ é¸ã€Œè©•ä¼°ã€ç›¸é—œé¸é …ã€‚</li>
                        </ul>
                    </div>
                `,
                selfCheck: {
                    question: "1. EOS æ˜¯å¦ä¸€å®šè¦ç«‹å³æ±°æ›ï¼Ÿ<br>2. EOS èˆ‡ EOL å·®åˆ¥æ˜¯å¦é‡è¦ï¼Ÿ",
                    answer: "1. ä¸ä¸€å®šï¼Œéœ€è©•ä¼°ï¼ˆå¯èƒ½æ¡éš”é›¢æªæ–½ï¼‰ã€‚<br>2. é‡è¦ï¼Œçš†å±¬é¢¨éšªä¾†æºï¼Œä½†éƒ½éœ€è¦è¢«ç´å…¥é¢¨éšªè©•é‘‘ã€‚"
                }
            },
            {
                id: 19,
                type: "single",
                tag: "mgm",
                tagName: "äº‹ä»¶æ‡‰è®Š",
                question: "ç•¶è³‡å®‰äººå“¡é€²è¡Œé¢¨éšªè©•é‘‘èˆ‡è™•ç†æ™‚ï¼Œæ¥ç²å…§éƒ¨äººå“¡é€šå ±ç™¼ç”Ÿå‹’ç´¢ç—…æ¯’æ„ŸæŸ“ä¹‹è³‡é€šå®‰å…¨äº‹ä»¶ï¼Œè©²äº‹ä»¶å·²é€ æˆæª”æ¡ˆäº¤æ›ä¸»æ©Ÿï¼ˆæœªæ¶‰åŠé—œéµåŸºç¤è¨­æ–½ç¶­é‹ï¼‰å…§çš„æª”æ¡ˆé­åŠ å¯†ç„¡æ³•é–‹å•Ÿï¼Œç³»çµ±äº¦ç„¡æ³•æ­£å¸¸ä½¿ç”¨ï¼Œå½±éŸ¿äº†æ ¸å¿ƒæ¥­å‹™çš„æ­£å¸¸é‹ä½œä¸”ç„¡æ³•æ–¼å¯å®¹å¿ä¸­æ–·æ™‚é–“å…§å›å¾©æ­£å¸¸é‹ä½œã€‚è©¦å•æœ‰é—œè³‡å®‰äººå“¡å°æ–¼æ­¤ä¸€äº‹ä»¶è™•ç†ä¹‹ä½œç‚ºï¼Œä¸‹åˆ—ä½•è€…éŒ¯èª¤ï¼Ÿ",
                options: [
                    { id: "A", text: "ä¸€å°æ™‚å…§é€šå ±é‡‘ç®¡æœƒ" },
                    { id: "B", text: "è³‡é€šå®‰å…¨äº‹ä»¶ç­‰ç´šåˆ¤æ–·ç‚ºäºŒç´š" },
                    { id: "C", text: "å°è©²æª”æ¡ˆäº¤æ›ä¸»æ©Ÿé€²è¡Œéš”é›¢" },
                    { id: "D", text: "å»ºè­°è³‡å®‰é•·å•Ÿå‹•è©²æ ¸å¿ƒæ¥­å‹™ä¹‹æ¥­å‹™æŒçºŒè¨ˆç•«" }
                ],
                correctAnswer: ["B"],
                reason: "å½±éŸ¿æ ¸å¿ƒæ¥­å‹™ä¸”ç„¡æ³•æ–¼å®¹å¿æ™‚é–“å…§å¾©åŸï¼Œå±¬æ–¼åš´é‡ç­‰ç´šï¼ˆé€šå¸¸ç‚ºä¸‰ç´šæˆ–å››ç´šï¼‰ï¼Œä¸å¯èƒ½åƒ…ç‚ºäºŒç´šã€‚",
                explanation: `
                    <div class="explain-section">
                        <h4>ğŸ” ç¬¬ä¸€æ­¥ï¼šæ‰¾é—œéµå­—</h4>
                        <p>å‹’ç´¢ç—…æ¯’ã€æ ¸å¿ƒæ¥­å‹™ã€ç„¡æ³•å›å¾©ã€äº‹ä»¶ç­‰ç´š</p>
                    </div>
                    <div class="explain-section">
                        <h4>ğŸ—£ï¸ ç¬¬äºŒæ­¥ï¼šç™½è©±ç¿»è­¯</h4>
                        <p>å…¬å¸è¢«å‹’ç´¢ç—…æ¯’æ‰“åˆ°ï¼Œå½±éŸ¿æ ¸å¿ƒæ¥­å‹™ï¼Œä¸‹é¢å“ªä¸€å€‹è™•ç†å‹•ä½œæ˜¯ã€Œåˆ¤æ–·éŒ¯èª¤çš„ã€ï¼Ÿ</p>
                    </div>
                    <div class="explain-section">
                        <h4>ğŸ’¡ ç¬¬ä¸‰æ­¥ï¼šè§£é¡Œæ€è·¯</h4>
                        <ul>
                            <li><strong>è§£é¡Œæ­¥é©Ÿï¼š</strong>
                                <ol>
                                    <li>åˆ¤æ–·äº‹ä»¶åš´é‡æ€§ã€‚</li>
                                    <li>æª¢æŸ¥ç­‰ç´šæ˜¯å¦åˆç†ã€‚</li>
                                    <li>æ‰¾å‡ºä½ä¼°äº‹ä»¶åš´é‡åº¦çš„é¸é …ã€‚</li>
                                </ol>
                            </li>
                            <li><strong>åŸç†èˆ‡è¦å‰‡ï¼š</strong>è³‡é€šå®‰å…¨äº‹ä»¶ç­‰ç´šä¾å½±éŸ¿ç¯„åœã€æ¥­å‹™ä¸­æ–·ç¨‹åº¦é€²è¡Œåˆ†ç´šã€‚ï¼ˆç™½è©±ï¼šå½±éŸ¿è¶Šå¤§ï¼Œç­‰ç´šè¶Šé«˜ï¼‰ã€‚</li>
                        </ul>
                    </div>
                    <div class="explain-section">
                        <h4>ğŸ“Š ç¬¬å››æ­¥ï¼šé¸é …åˆ†æ</h4>
                        <ul>
                            <li><strong>(A) æ­£ç¢ºï¼š</strong>é‡‘èæ©Ÿæ§‹ç™¼ç”Ÿé‡å¤§è³‡å®‰äº‹ä»¶ï¼Œéœ€é€šå ±ä¸»ç®¡æ©Ÿé—œã€‚</li>
                            <li><strong>(B) éŒ¯èª¤ï¼š</strong>å·²å½±éŸ¿æ ¸å¿ƒæ¥­å‹™ä¸”ç„¡æ³•æ–¼å¯å®¹å¿æ™‚é–“å…§å¾©åŸï¼Œäº‹ä»¶ç­‰ç´šä¸å¯èƒ½åƒ…ç‚ºäºŒç´šï¼ˆé€šå¸¸ç‚ºä¸‰ç´šä»¥ä¸Šï¼‰ã€‚</li>
                            <li><strong>(C) æ­£ç¢ºï¼š</strong>éš”é›¢æ„ŸæŸ“ä¸»æ©Ÿæ˜¯æ¨™æº–è™•ç½®ã€‚</li>
                            <li><strong>(D) æ­£ç¢ºï¼š</strong>å•Ÿå‹• BCPï¼ˆæ¥­å‹™æŒçºŒè¨ˆç•«ï¼‰æ˜¯åˆç†ä½œæ³•ã€‚</li>
                        </ul>
                    </div>
                    <div class="explain-section">
                        <h4>ğŸ“š è§€å¿µè£œå……èˆ‡å»¶ä¼¸</h4>
                        <p><strong>è§¸é¡æ—é€šï¼š</strong></p>
                        <ul>
                            <li>æœªå½±éŸ¿æ¥­å‹™ â‰  ä½ç­‰ç´šï¼ˆä»éœ€è©•ä¼°è³‡æ–™å¤–æ´©ç¨‹åº¦ï¼‰ã€‚</li>
                            <li>å½±éŸ¿æ ¸å¿ƒæ¥­å‹™ = é«˜ç­‰ç´šã€‚</li>
                        </ul>
                    </div>
                    <div class="explain-section">
                        <h4>ğŸ§  è¨˜æ†¶å£è¨£</h4>
                        <p><mark>ã€Œæ ¸å¿ƒæ¥­å‹™åœï¼Œç­‰ç´šä¸æœƒè¼•ã€</mark></p>
                    </div>
                    <div class="explain-section">
                        <h4>âš ï¸ å¸¸è¦‹é™·é˜±</h4>
                        <ul>
                            <li><strong>å¿ƒç†ç›²é»ï¼š</strong>çœ‹åˆ°ã€Œæœªæ¶‰åŠé—œéµåŸºç¤è¨­æ–½ã€å°±ä»¥ç‚ºç­‰ç´šä½ï¼ŒæŠŠã€Œé—œéµåŸºç¤è¨­æ–½ã€å’Œã€Œæ ¸å¿ƒæ¥­å‹™ã€æ··ç‚ºä¸€è«‡ã€‚</li>
                            <li><strong>é¿å‘æŒ‡å—ï¼š</strong>çœ‹ã€Œæœ‰æ²’æœ‰å½±éŸ¿æ ¸å¿ƒæ¥­å‹™ã€ã€‚</li>
                        </ul>
                    </div>
                `,
                selfCheck: {
                    question: "1. è‹¥åƒ…å½±éŸ¿å–®ä¸€ä½¿ç”¨è€…ï¼Œç­‰ç´šæœƒæé«˜å—ï¼Ÿ<br>2. BCP èˆ‡ DRP æ˜¯å¦åŒæ™‚å•Ÿå‹•ï¼Ÿ",
                    answer: "1. ä¸ä¸€å®šï¼Œéœ€è¦–è©²ä½¿ç”¨è€…æ¬Šé™èˆ‡è³‡æ–™é‡è¦æ€§ã€‚<br>2. è¦–æƒ…æ³ï¼ŒDRP æ˜¯ BCP çš„ä¸€éƒ¨åˆ†ï¼Œé€šå¸¸æŠ€è¡“å¾©åŸï¼ˆDRPï¼‰å…ˆè¡Œæˆ–åŒæ™‚é‹ä½œã€‚"
                }
            },
            {
                id: 20,
                type: "multiple",
                tag: "mgm",
                tagName: "æƒ…è³‡åˆ†äº«",
                question: "é‘’æ–¼é˜²ç«ç‰† EOS çš„äº‹ä»¶ï¼Œè©²å…¬å¸è³‡å®‰é•·éå¸¸é‡è¦–äº‹å‰è³‡é€šå®‰å…¨æƒ…è³‡çš„è’é›†èˆ‡åˆ†æï¼Œä¿¾åˆ©å…¬å¸èƒ½æœ‰è¶³å¤ çš„æ™‚é–“ä¾†å› æ‡‰çªç™¼çš„è³‡è¨Šå®‰å…¨é¢¨éšªç™¼ç”Ÿã€‚è©¦å•æœ‰é—œè³‡å®‰äººå“¡å°æ–¼è³‡é€šå®‰å…¨æƒ…è³‡çš„è’é›†èˆ‡åˆ†æä½œç‚ºï¼Œä¸‹åˆ—å“ªäº›æ­£ç¢ºï¼Ÿï¼ˆè¤‡é¸ï¼‰",
                options: [
                    { id: "A", text: "è³‡é€šå®‰å…¨æƒ…è³‡åŒ…å«ä½¿è³‡é€šç³»çµ±å®‰å…¨æ§åˆ¶æªæ–½ç„¡æ•ˆæˆ–åˆ©ç”¨å®‰å…¨æ¼æ´ä¹‹æ–¹æ³•åœ¨å…§" },
                    { id: "B", text: "è³‡é€šå®‰å…¨æƒ…è³‡åŒ…å«è³‡é€šå®‰å…¨äº‹ä»¶é€ æˆä¹‹å¯¦éš›æå®³æˆ–å¯èƒ½ç”¢ç”Ÿä¹‹è² é¢å½±éŸ¿åœ¨å…§" },
                    { id: "C", text: "åŠ å…¥è¡›ç”Ÿç¦åˆ©éƒ¨è³‡å®‰è³‡è¨Šåˆ†äº«èˆ‡åˆ†æä¸­å¿ƒï¼ˆH-ISACï¼‰å¹³å°" },
                    { id: "D", text: "åŠ å…¥é‡‘èè³‡å®‰è³‡è¨Šåˆ†äº«èˆ‡åˆ†æä¸­å¿ƒï¼ˆF-ISACï¼‰å¹³å°" }
                ],
                correctAnswer: ["A", "B", "D"],
                reason: "æƒ…è³‡å…§å®¹åŒ…å«æ¼æ´åˆ©ç”¨èˆ‡å½±éŸ¿è©•ä¼°ï¼›ä¸”è©²å…¬å¸ç‚ºã€Œé‡‘èæ©Ÿæ§‹ã€ï¼Œæ‡‰åŠ å…¥ F-ISAC è€Œé H-ISACã€‚",
                explanation: `
                    <div class="explain-section">
                        <h4>ğŸ” ç¬¬ä¸€æ­¥ï¼šæ‰¾é—œéµå­—</h4>
                        <p>è³‡é€šå®‰å…¨æƒ…è³‡ï¼ˆCTIï¼‰ã€è’é›†èˆ‡åˆ†æã€ISAC</p>
                    </div>
                    <div class="explain-section">
                        <h4>ğŸ—£ï¸ ç¬¬äºŒæ­¥ï¼šç™½è©±ç¿»è­¯</h4>
                        <p>å…¬å¸è¦ææ—©çŸ¥é“ã€Œå¯èƒ½æœƒè¢«æ€éº¼æ‰“ã€æœƒé€ æˆä»€éº¼å½±éŸ¿ã€ï¼Œå“ªäº›ä½œæ³•æ˜¯æ­£ç¢ºçš„ï¼Ÿ</p>
                    </div>
                    <div class="explain-section">
                        <h4>ğŸ’¡ ç¬¬ä¸‰æ­¥ï¼šè§£é¡Œæ€è·¯</h4>
                        <ul>
                            <li><strong>è§£é¡Œæ­¥é©Ÿï¼š</strong>
                                <ol>
                                    <li>åˆ¤æ–·ä»€éº¼ç®—ã€Œæƒ…è³‡å…§å®¹ã€ã€‚</li>
                                    <li>åˆ¤æ–·é‡‘èæ¥­è©²åŠ å…¥å“ªå€‹ ISACã€‚</li>
                                    <li>é¸å‡ºç¬¦åˆç”¢æ¥­åˆ¥çš„é¸é …ã€‚</li>
                                </ol>
                            </li>
                        </ul>
                    </div>
                    <div class="explain-section">
                        <h4>ğŸ“Š ç¬¬å››æ­¥ï¼šé¸é …åˆ†æ</h4>
                        <ul>
                            <li><strong>(A) æ­£ç¢ºï¼š</strong>æ¼æ´åˆ©ç”¨æ–¹å¼æœ¬èº«å°±æ˜¯é‡è¦æƒ…è³‡ã€‚</li>
                            <li><strong>(B) æ­£ç¢ºï¼š</strong>äº‹ä»¶é€ æˆçš„è¡æ“Šèˆ‡æå®³å±¬æ–¼æƒ…è³‡åˆ†æé‡é»ã€‚</li>
                            <li><strong>(C) éŒ¯èª¤ï¼š</strong>H-ISAC ç‚ºé†«ç™‚é«”ç³»ä½¿ç”¨ï¼Œéé‡‘èæ¥­ã€‚</li>
                            <li><strong>(D) æ­£ç¢ºï¼š</strong>é‡‘èæ©Ÿæ§‹æ‡‰åŠ å…¥ F-ISACã€‚</li>
                        </ul>
                    </div>
                    <div class="explain-section">
                        <h4>ğŸ“š è§€å¿µè£œå……èˆ‡å»¶ä¼¸</h4>
                        <p><strong>CTI (Cyber Threat Intelligence)ï¼š</strong>è’é›†ã€åˆ†æèˆ‡åˆ†äº«å¨è„…ç›¸é—œè³‡è¨Šï¼Œä»¥é é˜²èˆ‡æ‡‰å°æ”»æ“Šã€‚ï¼ˆç™½è©±ï¼šææ—©çŸ¥é“é¢¨éšªï¼‰ã€‚</p>
                        <p><strong>è§¸é¡æ—é€šï¼š</strong>é‡‘èæ¥­ â†’ F-ISACï¼›é†«ç™‚æ¥­ â†’ H-ISACã€‚</p>
                    </div>
                    <div class="explain-section">
                        <h4>ğŸ§  è¨˜æ†¶å£è¨£</h4>
                        <p><mark>ã€Œé‡‘èæ‰¾ Fï¼Œé†«ç™‚æ‰¾ Hã€</mark></p>
                    </div>
                    <div class="explain-section">
                        <h4>âš ï¸ å¸¸è¦‹é™·é˜±</h4>
                        <ul>
                            <li><strong>å¿ƒç†ç›²é»ï¼š</strong>çœ‹åˆ° ISAC å°±ä»¥ç‚ºéƒ½èƒ½åŠ å…¥ï¼Œå¿½ç•¥ã€Œç”¢æ¥­åˆ¥ã€ã€‚</li>
                            <li><strong>é¿å‘æŒ‡å—ï¼š</strong>é¡Œç›®å‡ºç¾ç”¢æ¥­ â†’ å°æ‡‰ ISACã€‚</li>
                        </ul>
                    </div>
                `,
                selfCheck: {
                    question: "1. è‹¥æ˜¯é›»ä¿¡æ¥­ï¼Œæ‡‰åŠ å…¥å“ªé¡ ISACï¼Ÿ<br>2. æƒ…è³‡æ˜¯å¦åªåŒ…å«æŠ€è¡“ç´°ç¯€ï¼Ÿ",
                    answer: "1. é›»ä¿¡ç›¸é—œ ISACï¼ˆå¦‚ NCC æˆ– T-ISACï¼‰ã€‚<br>2. å¦ï¼Œäº¦åŒ…å«å½±éŸ¿è©•ä¼°ã€ç­–ç•¥é¢è³‡è¨Šã€‚"
                }
            }
        ]
    };

    // --- State Management ---
    const quizState = {
        questions: quizData.questions.map(q => ({
            id: q.id,
            status: 'pending', // pending, correct, wrong
            selected: []
        }))
    };

    // --- DOM Elements ---
    const tabsContainer = document.getElementById('tabs-container');
    const contentContainer = document.getElementById('content-container');
    const progressFill = document.getElementById('progress-fill');
    const progressText = document.getElementById('progress-text');
    const overallStatus = document.getElementById('overall-status');
    const overallDone = document.getElementById('overall-done');

    // --- Render Logic ---

    function init() {
        renderTabs();
        renderQuestions();
        switchTab(0);
        updateProgress();
    }

    function renderTabs() {
        tabsContainer.innerHTML = '';
        quizData.questions.forEach((q, index) => {
            const btn = document.createElement('button');
            btn.className = 'tab-btn';
            btn.innerHTML = `ç¬¬ ${q.id} é¡Œ <span class="tab-status" id="tab-status-${q.id}"></span>`;
            btn.onclick = () => switchTab(index);
            tabsContainer.appendChild(btn);
        });
    }

    function renderQuestions() {
        contentContainer.innerHTML = '';
        quizData.questions.forEach((q, index) => {
            const container = document.createElement('div');
            container.className = 'tab-content';
            container.id = `q-content-${q.id}`;

            // Type Label text
            const typeText = q.type === 'single' ? 'å–®é¸é¡Œ' : 'è¤‡é¸é¡Œ';
            const tagClass = `tag-${q.tag || 'sec'}`;

            // Options HTML
            const optionsHtml = q.options.map(opt => `
                <label class="option-label" id="opt-label-${q.id}-${opt.id}" onclick="handleOptionSelect(${q.id}, '${opt.id}', '${q.type}')">
                    <input type="${q.type === 'single' ? 'radio' : 'checkbox'}" 
                           name="q-${q.id}" 
                           class="option-input" 
                           id="opt-input-${q.id}-${opt.id}"
                           value="${opt.id}">
                    <span class="option-text">(${opt.id}) ${opt.text}</span>
                </label>
            `).join('');

            container.innerHTML = `
                <div class="question-header">
                    <div>
                        <span class="tag ${tagClass}">${q.tagName}</span>
                        <span style="color: #666; font-size: 14px;">${typeText}</span>
                    </div>
                    <span id="badge-${q.id}" class="q-status-badge">æœªä½œç­”</span>
                </div>

                <div class="question-body">
                    <h2 style="font-size: 18px; line-height: 1.5; margin-bottom: 20px;">${q.question}</h2>
                    <div class="options-list">
                        ${optionsHtml}
                    </div>
                </div>

                <div class="action-area">
                    <button id="btn-${q.id}" class="btn-primary" onclick="submitAnswer(${q.id})">é€å‡ºç­”æ¡ˆ</button>
                </div>

                <div id="feedback-${q.id}" class="feedback"></div>

                <details id="explain-${q.id}" style="display: none;">
                    <summary>ğŸ’¡ å®Œæ•´è§£æèˆ‡è©³è§£</summary>
                    <div class="details-content">
                        ${q.explanation}
                    </div>
                </details>

                <div id="check-${q.id}" class="self-check-box" style="display: none;">
                    <div class="self-check-header">ğŸ” è‡ªæˆ‘æª¢æ¸¬</div>
                    <div class="self-check-q">${q.selfCheck.question}</div>
                    <details class="self-check-ans-reveal">
                        <summary style="cursor: pointer; color: #2980b9; font-weight: 500;">é»æ“ŠæŸ¥çœ‹åƒè€ƒç­”æ¡ˆ</summary>
                        <div style="margin-top: 10px; padding: 10px; background: #f0f4f8; border-radius: 6px;">
                            ${q.selfCheck.answer}
                        </div>
                    </details>
                </div>
            `;
            contentContainer.appendChild(container);
        });
    }

    // --- Interaction Logic ---

    function switchTab(index) {
        // Update Buttons
        const buttons = document.querySelectorAll('.tab-btn');
        buttons.forEach((btn, i) => {
            if (i === index) btn.classList.add('active');
            else btn.classList.remove('active');
        });

        // Update Content
        const contents = document.querySelectorAll('.tab-content');
        contents.forEach((content, i) => {
            if (i === index) content.classList.add('active');
            else content.classList.remove('active');
        });

        // Scroll to top of container smoothly
        document.querySelector('.page-container').scrollIntoView({ behavior: 'smooth', block: 'start' });
    }

    function handleOptionSelect(qId, optId, type) {
        // Prevent selection if already submitted
        const qState = quizState.questions.find(q => q.id === qId);
        if (qState.status !== 'pending') return;

        const inputs = document.querySelectorAll(`input[name="q-${qId}"]`);
        const labels = document.querySelectorAll(`#q-content-${qId} .option-label`);

        // UI Update
        labels.forEach(label => label.classList.remove('selected'));
        
        if (type === 'single') {
            qState.selected = [optId];
            document.getElementById(`opt-label-${qId}-${optId}`).classList.add('selected');
        } else {
            // Multiple
            const checkbox = document.getElementById(`opt-input-${qId}-${optId}`);
            // Custom visual sync:
            setTimeout(() => {
                const selectedOpts = [];
                inputs.forEach(input => {
                    const label = document.getElementById(`opt-label-${qId}-${input.value}`);
                    if (input.checked) {
                        label.classList.add('selected');
                        selectedOpts.push(input.value);
                    } else {
                        label.classList.remove('selected');
                    }
                });
                qState.selected = selectedOpts;
            }, 0);
        }
    }

    function submitAnswer(qId) {
        const qData = quizData.questions.find(q => q.id === qId);
        const qState = quizState.questions.find(q => q.id === qId);

        // Validation
        if (qState.selected.length === 0) {
            alert("è«‹å…ˆé¸æ“‡ç­”æ¡ˆ");
            return;
        }

        // Logic Check
        // Sort both arrays to compare
        const userAns = [...qState.selected].sort().join(',');
        const correctAns = [...qData.correctAnswer].sort().join(',');
        const isCorrect = userAns === correctAns;

        // Update State
        qState.status = isCorrect ? 'correct' : 'wrong';

        // UI Updates
        // 1. Disable Options
        const inputs = document.querySelectorAll(`input[name="q-${qId}"]`);
        inputs.forEach(input => input.disabled = true);
        const labels = document.querySelectorAll(`#q-content-${qId} .option-label`);
        labels.forEach(label => classAdd(label, 'disabled'));

        // 2. Show Feedback
        const feedbackEl = document.getElementById(`feedback-${qId}`);
        feedbackEl.style.display = 'block';
        feedbackEl.className = `feedback ${isCorrect ? 'success' : 'error'}`;
        feedbackEl.innerHTML = isCorrect 
            ? `<strong>âœ“ ç­”å°äº†ï¼</strong><p>${qData.reason}</p>`
            : `<strong>âœ— ç­”éŒ¯äº†</strong><p>æ­£ç¢ºç­”æ¡ˆï¼š${qData.correctAnswer.join('ã€')}</p><p>${qData.reason}</p>`;

        // 3. Show Details
        document.getElementById(`explain-${qId}`).style.display = 'block';
        document.getElementById(`explain-${qId}`).open = true;
        document.getElementById(`check-${qId}`).style.display = 'block';

        // 4. Update Header Status
        const badge = document.getElementById(`badge-${qId}`);
        badge.textContent = isCorrect ? 'å·²ç­”å°' : 'å·²ç­”éŒ¯';
        badge.className = `q-status-badge ${isCorrect ? 'correct' : 'wrong'}`;

        // 5. Update Tab Status
        const tabStatus = document.getElementById(`tab-status-${qId}`);
        tabStatus.textContent = isCorrect ? 'âœ“' : 'âœ—';
        
        // 6. Change Button
        const btn = document.getElementById(`btn-${qId}`);
        btn.textContent = 'é‡æ–°ä½œç­”';
        btn.className = 'btn-primary btn-retry';
        btn.onclick = () => retryQuestion(qId); // Override click handler

        updateProgress();
    }

    function retryQuestion(qId) {
        const qState = quizState.questions.find(q => q.id === qId);
        
        // 1. Reset State
        qState.status = 'pending';
        qState.selected = [];

        // 2. Reset Options UI
        const inputs = document.querySelectorAll(`input[name="q-${qId}"]`);
        inputs.forEach(input => {
            input.disabled = false;
            input.checked = false;
        });
        const labels = document.querySelectorAll(`#q-content-${qId} .option-label`);
        labels.forEach(label => {
            label.classList.remove('disabled');
            label.classList.remove('selected');
        });

        // 3. Hide Feedback & Details
        document.getElementById(`feedback-${qId}`).style.display = 'none';
        const explain = document.getElementById(`explain-${qId}`);
        explain.style.display = 'none';
        explain.open = false;
        const check = document.getElementById(`check-${qId}`);
        check.style.display = 'none';
        // check.open = false; // Self check logic managed by internal details

        // 4. Reset Header Status
        const badge = document.getElementById(`badge-${qId}`);
        badge.textContent = 'æœªä½œç­”';
        badge.className = 'q-status-badge';

        // 5. Reset Tab Status
        document.getElementById(`tab-status-${qId}`).textContent = '';

        // 6. Reset Button
        const btn = document.getElementById(`btn-${qId}`);
        btn.textContent = 'é€å‡ºç­”æ¡ˆ';
        btn.className = 'btn-primary';
        btn.onclick = () => submitAnswer(qId);

        updateProgress();

        // Scroll to question top
        document.getElementById(`q-content-${qId}`).scrollIntoView({ behavior: 'smooth', block: 'start' });
    }

    function updateProgress() {
        const completedCount = quizState.questions.filter(q => q.status !== 'pending').length;
        const total = quizData.questions.length;
        const percentage = Math.round((completedCount / total) * 100);

        progressFill.style.width = `${percentage}%`;
        progressText.innerHTML = `å·²å®Œæˆï¼š<strong>${completedCount}</strong> / ${total}`;

        if (completedCount === total) {
            overallStatus.style.display = 'none';
            overallDone.style.display = 'inline';
        } else {
            overallStatus.style.display = 'inline';
            overallDone.style.display = 'none';
        }
    }

    // Helper for classList
    function classAdd(el, className) {
        if (!el.classList.contains(className)) el.classList.add(className);
    }

    // Run
    init();

</script>

</body>
</html>